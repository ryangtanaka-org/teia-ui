var wn=Object.defineProperty;var Rn=(h,i,Y)=>i in h?wn(h,i,{enumerable:!0,configurable:!0,writable:!0,value:Y}):h[i]=Y;var fe=(h,i,Y)=>(Rn(h,typeof i!="symbol"?i+"":i,Y),Y),We=(h,i,Y)=>{if(!i.has(h))throw TypeError("Cannot "+Y)};var mt=(h,i,Y)=>(We(h,i,"read from private field"),Y?Y.call(h):i.get(h)),qt=(h,i,Y)=>{if(i.has(h))throw TypeError("Cannot add the same private member more than once");i instanceof WeakSet?i.add(h):i.set(h,Y)},Qt=(h,i,Y,e)=>(We(h,i,"write to private field"),e?e.call(h,Y):i.set(h,Y),Y);var qe=(h,i,Y,e)=>({set _(a){Qt(h,i,a,Y)},get _(){return mt(h,i,e)}}),zt=(h,i,Y)=>(We(h,i,"access private method"),Y);import{g as getDefaultExportFromCjs,b as browser$1,B as Buffer,c as commonjsRequire,r as require$$5}from"./contracts-CtlCcq48.js";function _mergeNamespaces(h,i){for(var Y=0;Y<i.length;Y++){const e=i[Y];if(typeof e!="string"&&!Array.isArray(e)){for(const a in e)if(a!=="default"&&!(a in h)){const ht=Object.getOwnPropertyDescriptor(e,a);ht&&Object.defineProperty(h,a,ht.get?ht:{enumerable:!0,get:()=>e[a]})}}}return Object.freeze(Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}))}var react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l=Symbol.for("react.element"),n=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),r$1=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z=Symbol.iterator;function A(h){return h===null||typeof h!="object"?null:(h=z&&h[z]||h["@@iterator"],typeof h=="function"?h:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,D={};function E(h,i,Y){this.props=h,this.context=i,this.refs=D,this.updater=Y||B}E.prototype.isReactComponent={};E.prototype.setState=function(h,i){if(typeof h!="object"&&typeof h!="function"&&h!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,h,i,"setState")};E.prototype.forceUpdate=function(h){this.updater.enqueueForceUpdate(this,h,"forceUpdate")};function F(){}F.prototype=E.prototype;function G(h,i,Y){this.props=h,this.context=i,this.refs=D,this.updater=Y||B}var H=G.prototype=new F;H.constructor=G;C(H,E.prototype);H.isPureReactComponent=!0;var I=Array.isArray,J=Object.prototype.hasOwnProperty,K={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function M(h,i,Y){var e,a={},ht=null,dt=null;if(i!=null)for(e in i.ref!==void 0&&(dt=i.ref),i.key!==void 0&&(ht=""+i.key),i)J.call(i,e)&&!L.hasOwnProperty(e)&&(a[e]=i[e]);var st=arguments.length-2;if(st===1)a.children=Y;else if(1<st){for(var b=Array(st),j=0;j<st;j++)b[j]=arguments[j+2];a.children=b}if(h&&h.defaultProps)for(e in st=h.defaultProps,st)a[e]===void 0&&(a[e]=st[e]);return{$$typeof:l,type:h,key:ht,ref:dt,props:a,_owner:K.current}}function N(h,i){return{$$typeof:l,type:h.type,key:i,ref:h.ref,props:h.props,_owner:h._owner}}function O(h){return typeof h=="object"&&h!==null&&h.$$typeof===l}function escape$1(h){var i={"=":"=0",":":"=2"};return"$"+h.replace(/[=:]/g,function(Y){return i[Y]})}var P=/\/+/g;function Q(h,i){return typeof h=="object"&&h!==null&&h.key!=null?escape$1(""+h.key):i.toString(36)}function R(h,i,Y,e,a){var ht=typeof h;(ht==="undefined"||ht==="boolean")&&(h=null);var dt=!1;if(h===null)dt=!0;else switch(ht){case"string":case"number":dt=!0;break;case"object":switch(h.$$typeof){case l:case n:dt=!0}}if(dt)return dt=h,a=a(dt),h=e===""?"."+Q(dt,0):e,I(a)?(Y="",h!=null&&(Y=h.replace(P,"$&/")+"/"),R(a,i,Y,"",function(j){return j})):a!=null&&(O(a)&&(a=N(a,Y+(!a.key||dt&&dt.key===a.key?"":(""+a.key).replace(P,"$&/")+"/")+h)),i.push(a)),1;if(dt=0,e=e===""?".":e+":",I(h))for(var st=0;st<h.length;st++){ht=h[st];var b=e+Q(ht,st);dt+=R(ht,i,Y,b,a)}else if(b=A(h),typeof b=="function")for(h=b.call(h),st=0;!(ht=h.next()).done;)ht=ht.value,b=e+Q(ht,st++),dt+=R(ht,i,Y,b,a);else if(ht==="object")throw i=String(h),Error("Objects are not valid as a React child (found: "+(i==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":i)+"). If you meant to render a collection of children, use an array instead.");return dt}function S(h,i,Y){if(h==null)return h;var e=[],a=0;return R(h,e,"","",function(ht){return i.call(Y,ht,a++)}),e}function T(h){if(h._status===-1){var i=h._result;i=i(),i.then(function(Y){(h._status===0||h._status===-1)&&(h._status=1,h._result=Y)},function(Y){(h._status===0||h._status===-1)&&(h._status=2,h._result=Y)}),h._status===-1&&(h._status=0,h._result=i)}if(h._status===1)return h._result.default;throw h._result}var U={current:null},V={transition:null},W={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:V,ReactCurrentOwner:K};function X(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S,forEach:function(h,i,Y){S(h,function(){i.apply(this,arguments)},Y)},count:function(h){var i=0;return S(h,function(){i++}),i},toArray:function(h){return S(h,function(i){return i})||[]},only:function(h){if(!O(h))throw Error("React.Children.only expected to receive a single React element child.");return h}};react_production_min.Component=E;react_production_min.Fragment=p;react_production_min.Profiler=r$1;react_production_min.PureComponent=G;react_production_min.StrictMode=q;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W;react_production_min.act=X;react_production_min.cloneElement=function(h,i,Y){if(h==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+h+".");var e=C({},h.props),a=h.key,ht=h.ref,dt=h._owner;if(i!=null){if(i.ref!==void 0&&(ht=i.ref,dt=K.current),i.key!==void 0&&(a=""+i.key),h.type&&h.type.defaultProps)var st=h.type.defaultProps;for(b in i)J.call(i,b)&&!L.hasOwnProperty(b)&&(e[b]=i[b]===void 0&&st!==void 0?st[b]:i[b])}var b=arguments.length-2;if(b===1)e.children=Y;else if(1<b){st=Array(b);for(var j=0;j<b;j++)st[j]=arguments[j+2];e.children=st}return{$$typeof:l,type:h.type,key:a,ref:ht,props:e,_owner:dt}};react_production_min.createContext=function(h){return h={$$typeof:u,_currentValue:h,_currentValue2:h,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},h.Provider={$$typeof:t,_context:h},h.Consumer=h};react_production_min.createElement=M;react_production_min.createFactory=function(h){var i=M.bind(null,h);return i.type=h,i};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(h){return{$$typeof:v,render:h}};react_production_min.isValidElement=O;react_production_min.lazy=function(h){return{$$typeof:y,_payload:{_status:-1,_result:h},_init:T}};react_production_min.memo=function(h,i){return{$$typeof:x,type:h,compare:i===void 0?null:i}};react_production_min.startTransition=function(h){var i=V.transition;V.transition={};try{h()}finally{V.transition=i}};react_production_min.unstable_act=X;react_production_min.useCallback=function(h,i){return U.current.useCallback(h,i)};react_production_min.useContext=function(h){return U.current.useContext(h)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(h){return U.current.useDeferredValue(h)};react_production_min.useEffect=function(h,i){return U.current.useEffect(h,i)};react_production_min.useId=function(){return U.current.useId()};react_production_min.useImperativeHandle=function(h,i,Y){return U.current.useImperativeHandle(h,i,Y)};react_production_min.useInsertionEffect=function(h,i){return U.current.useInsertionEffect(h,i)};react_production_min.useLayoutEffect=function(h,i){return U.current.useLayoutEffect(h,i)};react_production_min.useMemo=function(h,i){return U.current.useMemo(h,i)};react_production_min.useReducer=function(h,i,Y){return U.current.useReducer(h,i,Y)};react_production_min.useRef=function(h){return U.current.useRef(h)};react_production_min.useState=function(h){return U.current.useState(h)};react_production_min.useSyncExternalStore=function(h,i,Y){return U.current.useSyncExternalStore(h,i,Y)};react_production_min.useTransition=function(){return U.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var pdf={exports:{}};(function(module,exports){(function(i,Y){module.exports=Y()})(globalThis,()=>(()=>{var __webpack_modules__=[,(h,i,Y)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.VerbosityLevel=i.Util=i.UnknownErrorException=i.UnexpectedResponseException=i.UNSUPPORTED_FEATURES=i.TextRenderingMode=i.StreamType=i.RenderingIntentFlag=i.PermissionFlag=i.PasswordResponses=i.PasswordException=i.PageActionEventType=i.OPS=i.MissingPDFException=i.LINE_FACTOR=i.LINE_DESCENT_FACTOR=i.InvalidPDFException=i.ImageKind=i.IDENTITY_MATRIX=i.FormatError=i.FontType=i.FeatureTest=i.FONT_IDENTITY_MATRIX=i.DocumentActionEventType=i.CMapCompressionType=i.BaseException=i.AnnotationType=i.AnnotationStateModelType=i.AnnotationReviewState=i.AnnotationReplyType=i.AnnotationMode=i.AnnotationMarkedState=i.AnnotationFlag=i.AnnotationFieldFlag=i.AnnotationEditorType=i.AnnotationEditorPrefix=i.AnnotationEditorParamsType=i.AnnotationBorderStyleType=i.AnnotationActionEventType=i.AbortException=void 0,i.arrayByteLength=Ut,i.arraysToBytes=Vt,i.assert=$,i.bytesToString=yt,i.createPromiseCapability=Kt,i.createValidAbsoluteUrl=pt,i.escapeString=le,i.getModificationDate=Wt,i.getVerbosityLevel=jt,i.info=Ht,i.isArrayBuffer=ge,i.isArrayEqual=Ie,i.isAscii=pe,i.objectFromMap=Nt,i.objectSize=$t,i.setVerbosityLevel=Ft,i.shadow=vt,i.string32=It,i.stringToBytes=Pt,i.stringToPDFString=se,i.stringToUTF16BEString=de,i.stringToUTF8String=we,i.unreachable=Et,i.utf8StringToString=ae,i.warn=te,Y(2);const e=[1,0,0,1,0,0];i.IDENTITY_MATRIX=e;const a=[.001,0,0,.001,0,0];i.FONT_IDENTITY_MATRIX=a;const ht=1.35;i.LINE_FACTOR=ht;const dt=.35;i.LINE_DESCENT_FACTOR=dt;const st={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};i.RenderingIntentFlag=st;const b={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};i.AnnotationMode=b;const j="pdfjs_internal_editor_";i.AnnotationEditorPrefix=j;const lt={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};i.AnnotationEditorType=lt;const _t={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};i.AnnotationEditorParamsType=_t;const ut={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};i.PermissionFlag=ut;const at={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};i.TextRenderingMode=at;const _={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};i.ImageKind=_;const s={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};i.AnnotationType=s;const f={MARKED:"Marked",REVIEW:"Review"};i.AnnotationStateModelType=f;const g={MARKED:"Marked",UNMARKED:"Unmarked"};i.AnnotationMarkedState=g;const rt={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};i.AnnotationReviewState=rt;const it={GROUP:"Group",REPLY:"R"};i.AnnotationReplyType=it;const m={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};i.AnnotationFlag=m;const o={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};i.AnnotationFieldFlag=o;const c={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};i.AnnotationBorderStyleType=c;const tt={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};i.AnnotationActionEventType=tt;const ft={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};i.DocumentActionEventType=ft;const ot={O:"PageOpen",C:"PageClose"};i.PageActionEventType=ot;const et={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};i.StreamType=et;const gt={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};i.FontType=gt;const Lt={ERRORS:0,WARNINGS:1,INFOS:5};i.VerbosityLevel=Lt;const Bt={NONE:0,BINARY:1,STREAM:2};i.CMapCompressionType=Bt;const Dt={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};i.OPS=Dt;const Ot={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};i.UNSUPPORTED_FEATURES=Ot;const Tt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};i.PasswordResponses=Tt;let Rt=Lt.WARNINGS;function Ft(Mt){Number.isInteger(Mt)&&(Rt=Mt)}function jt(){return Rt}function Ht(Mt){Rt>=Lt.INFOS&&console.log(`Info: ${Mt}`)}function te(Mt){Rt>=Lt.WARNINGS&&console.log(`Warning: ${Mt}`)}function Et(Mt){throw new Error(Mt)}function $(Mt,Ct){Mt||Et(Ct)}function k(Mt){if(!Mt)return!1;switch(Mt.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function pt(Mt,Ct=null,wt=null){if(!Mt)return null;try{if(wt&&typeof Mt=="string"){if(wt.addDefaultProtocol&&Mt.startsWith("www.")){const Zt=Mt.match(/\./g);Zt&&Zt.length>=2&&(Mt=`http://${Mt}`)}if(wt.tryConvertEncoding)try{Mt=we(Mt)}catch{}}const Jt=Ct?new URL(Mt,Ct):new URL(Mt);if(k(Jt))return Jt}catch{}return null}function vt(Mt,Ct,wt){return Object.defineProperty(Mt,Ct,{value:wt,enumerable:!0,configurable:!0,writable:!1}),wt}const At=function(){function Ct(wt,Jt){this.constructor===Ct&&Et("Cannot initialize BaseException."),this.message=wt,this.name=Jt}return Ct.prototype=new Error,Ct.constructor=Ct,Ct}();i.BaseException=At;class St extends At{constructor(Ct,wt){super(Ct,"PasswordException"),this.code=wt}}i.PasswordException=St;class kt extends At{constructor(Ct,wt){super(Ct,"UnknownErrorException"),this.details=wt}}i.UnknownErrorException=kt;class xt extends At{constructor(Ct){super(Ct,"InvalidPDFException")}}i.InvalidPDFException=xt;class d extends At{constructor(Ct){super(Ct,"MissingPDFException")}}i.MissingPDFException=d;class Z extends At{constructor(Ct,wt){super(Ct,"UnexpectedResponseException"),this.status=wt}}i.UnexpectedResponseException=Z;class nt extends At{constructor(Ct){super(Ct,"FormatError")}}i.FormatError=nt;class ct extends At{constructor(Ct){super(Ct,"AbortException")}}i.AbortException=ct;function yt(Mt){(typeof Mt!="object"||Mt===null||Mt.length===void 0)&&Et("Invalid argument for bytesToString");const Ct=Mt.length,wt=8192;if(Ct<wt)return String.fromCharCode.apply(null,Mt);const Jt=[];for(let Zt=0;Zt<Ct;Zt+=wt){const ne=Math.min(Zt+wt,Ct),ie=Mt.subarray(Zt,ne);Jt.push(String.fromCharCode.apply(null,ie))}return Jt.join("")}function Pt(Mt){typeof Mt!="string"&&Et("Invalid argument for stringToBytes");const Ct=Mt.length,wt=new Uint8Array(Ct);for(let Jt=0;Jt<Ct;++Jt)wt[Jt]=Mt.charCodeAt(Jt)&255;return wt}function Ut(Mt){if(Mt.length!==void 0)return Mt.length;if(Mt.byteLength!==void 0)return Mt.byteLength;Et("Invalid argument for arrayByteLength")}function Vt(Mt){const Ct=Mt.length;if(Ct===1&&Mt[0]instanceof Uint8Array)return Mt[0];let wt=0;for(let ne=0;ne<Ct;ne++)wt+=Ut(Mt[ne]);let Jt=0;const Zt=new Uint8Array(wt);for(let ne=0;ne<Ct;ne++){let ie=Mt[ne];ie instanceof Uint8Array||(typeof ie=="string"?ie=Pt(ie):ie=new Uint8Array(ie));const ce=ie.byteLength;Zt.set(ie,Jt),Jt+=ce}return Zt}function It(Mt){return String.fromCharCode(Mt>>24&255,Mt>>16&255,Mt>>8&255,Mt&255)}function $t(Mt){return Object.keys(Mt).length}function Nt(Mt){const Ct=Object.create(null);for(const[wt,Jt]of Mt)Ct[wt]=Jt;return Ct}function Gt(){const Mt=new Uint8Array(4);return Mt[0]=1,new Uint32Array(Mt.buffer,0,1)[0]===1}function Yt(){try{return new Function(""),!0}catch{return!1}}class bt{static get isLittleEndian(){return vt(this,"isLittleEndian",Gt())}static get isEvalSupported(){return vt(this,"isEvalSupported",Yt())}static get isOffscreenCanvasSupported(){return vt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}}i.FeatureTest=bt;const Xt=[...Array(256).keys()].map(Mt=>Mt.toString(16).padStart(2,"0"));class ee{static makeHexColor(Ct,wt,Jt){return`#${Xt[Ct]}${Xt[wt]}${Xt[Jt]}`}static scaleMinMax(Ct,wt){let Jt;Ct[0]?(Ct[0]<0&&(Jt=wt[0],wt[0]=wt[1],wt[1]=Jt),wt[0]*=Ct[0],wt[1]*=Ct[0],Ct[3]<0&&(Jt=wt[2],wt[2]=wt[3],wt[3]=Jt),wt[2]*=Ct[3],wt[3]*=Ct[3]):(Jt=wt[0],wt[0]=wt[2],wt[2]=Jt,Jt=wt[1],wt[1]=wt[3],wt[3]=Jt,Ct[1]<0&&(Jt=wt[2],wt[2]=wt[3],wt[3]=Jt),wt[2]*=Ct[1],wt[3]*=Ct[1],Ct[2]<0&&(Jt=wt[0],wt[0]=wt[1],wt[1]=Jt),wt[0]*=Ct[2],wt[1]*=Ct[2]),wt[0]+=Ct[4],wt[1]+=Ct[4],wt[2]+=Ct[5],wt[3]+=Ct[5]}static transform(Ct,wt){return[Ct[0]*wt[0]+Ct[2]*wt[1],Ct[1]*wt[0]+Ct[3]*wt[1],Ct[0]*wt[2]+Ct[2]*wt[3],Ct[1]*wt[2]+Ct[3]*wt[3],Ct[0]*wt[4]+Ct[2]*wt[5]+Ct[4],Ct[1]*wt[4]+Ct[3]*wt[5]+Ct[5]]}static applyTransform(Ct,wt){const Jt=Ct[0]*wt[0]+Ct[1]*wt[2]+wt[4],Zt=Ct[0]*wt[1]+Ct[1]*wt[3]+wt[5];return[Jt,Zt]}static applyInverseTransform(Ct,wt){const Jt=wt[0]*wt[3]-wt[1]*wt[2],Zt=(Ct[0]*wt[3]-Ct[1]*wt[2]+wt[2]*wt[5]-wt[4]*wt[3])/Jt,ne=(-Ct[0]*wt[1]+Ct[1]*wt[0]+wt[4]*wt[1]-wt[5]*wt[0])/Jt;return[Zt,ne]}static getAxialAlignedBoundingBox(Ct,wt){const Jt=ee.applyTransform(Ct,wt),Zt=ee.applyTransform(Ct.slice(2,4),wt),ne=ee.applyTransform([Ct[0],Ct[3]],wt),ie=ee.applyTransform([Ct[2],Ct[1]],wt);return[Math.min(Jt[0],Zt[0],ne[0],ie[0]),Math.min(Jt[1],Zt[1],ne[1],ie[1]),Math.max(Jt[0],Zt[0],ne[0],ie[0]),Math.max(Jt[1],Zt[1],ne[1],ie[1])]}static inverseTransform(Ct){const wt=Ct[0]*Ct[3]-Ct[1]*Ct[2];return[Ct[3]/wt,-Ct[1]/wt,-Ct[2]/wt,Ct[0]/wt,(Ct[2]*Ct[5]-Ct[4]*Ct[3])/wt,(Ct[4]*Ct[1]-Ct[5]*Ct[0])/wt]}static apply3dTransform(Ct,wt){return[Ct[0]*wt[0]+Ct[1]*wt[1]+Ct[2]*wt[2],Ct[3]*wt[0]+Ct[4]*wt[1]+Ct[5]*wt[2],Ct[6]*wt[0]+Ct[7]*wt[1]+Ct[8]*wt[2]]}static singularValueDecompose2dScale(Ct){const wt=[Ct[0],Ct[2],Ct[1],Ct[3]],Jt=Ct[0]*wt[0]+Ct[1]*wt[2],Zt=Ct[0]*wt[1]+Ct[1]*wt[3],ne=Ct[2]*wt[0]+Ct[3]*wt[2],ie=Ct[2]*wt[1]+Ct[3]*wt[3],ce=(Jt+ie)/2,me=Math.sqrt((Jt+ie)**2-4*(Jt*ie-ne*Zt))/2,he=ce+me||1,oe=ce-me||1;return[Math.sqrt(he),Math.sqrt(oe)]}static normalizeRect(Ct){const wt=Ct.slice(0);return Ct[0]>Ct[2]&&(wt[0]=Ct[2],wt[2]=Ct[0]),Ct[1]>Ct[3]&&(wt[1]=Ct[3],wt[3]=Ct[1]),wt}static intersect(Ct,wt){const Jt=Math.max(Math.min(Ct[0],Ct[2]),Math.min(wt[0],wt[2])),Zt=Math.min(Math.max(Ct[0],Ct[2]),Math.max(wt[0],wt[2]));if(Jt>Zt)return null;const ne=Math.max(Math.min(Ct[1],Ct[3]),Math.min(wt[1],wt[3])),ie=Math.min(Math.max(Ct[1],Ct[3]),Math.max(wt[1],wt[3]));return ne>ie?null:[Jt,ne,Zt,ie]}static bezierBoundingBox(Ct,wt,Jt,Zt,ne,ie,ce,me){const he=[],oe=[[],[]];let _e,ye,Ae,ue,be,Ee,Re,ke;for(let xe=0;xe<2;++xe){if(xe===0?(ye=6*Ct-12*Jt+6*ne,_e=-3*Ct+9*Jt-9*ne+3*ce,Ae=3*Jt-3*Ct):(ye=6*wt-12*Zt+6*ie,_e=-3*wt+9*Zt-9*ie+3*me,Ae=3*Zt-3*wt),Math.abs(_e)<1e-12){if(Math.abs(ye)<1e-12)continue;ue=-Ae/ye,0<ue&&ue<1&&he.push(ue);continue}Re=ye*ye-4*Ae*_e,ke=Math.sqrt(Re),!(Re<0)&&(be=(-ye+ke)/(2*_e),0<be&&be<1&&he.push(be),Ee=(-ye-ke)/(2*_e),0<Ee&&Ee<1&&he.push(Ee))}let Te=he.length,ve;const Pe=Te;for(;Te--;)ue=he[Te],ve=1-ue,oe[0][Te]=ve*ve*ve*Ct+3*ve*ve*ue*Jt+3*ve*ue*ue*ne+ue*ue*ue*ce,oe[1][Te]=ve*ve*ve*wt+3*ve*ve*ue*Zt+3*ve*ue*ue*ie+ue*ue*ue*me;return oe[0][Pe]=Ct,oe[1][Pe]=wt,oe[0][Pe+1]=ce,oe[1][Pe+1]=me,oe[0].length=oe[1].length=Pe+2,[Math.min(...oe[0]),Math.min(...oe[1]),Math.max(...oe[0]),Math.max(...oe[1])]}}i.Util=ee;const re=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function se(Mt){if(Mt[0]>="ï"){let wt;if(Mt[0]==="þ"&&Mt[1]==="ÿ"?wt="utf-16be":Mt[0]==="ÿ"&&Mt[1]==="þ"?wt="utf-16le":Mt[0]==="ï"&&Mt[1]==="»"&&Mt[2]==="¿"&&(wt="utf-8"),wt)try{const Jt=new TextDecoder(wt,{fatal:!0}),Zt=Pt(Mt);return Jt.decode(Zt)}catch(Jt){te(`stringToPDFString: "${Jt}".`)}}const Ct=[];for(let wt=0,Jt=Mt.length;wt<Jt;wt++){const Zt=re[Mt.charCodeAt(wt)];Ct.push(Zt?String.fromCharCode(Zt):Mt.charAt(wt))}return Ct.join("")}function le(Mt){return Mt.replace(/([()\\\n\r])/g,Ct=>Ct===`
`?"\\n":Ct==="\r"?"\\r":`\\${Ct}`)}function pe(Mt){return/^[\x00-\x7F]*$/.test(Mt)}function de(Mt){const Ct=["þÿ"];for(let wt=0,Jt=Mt.length;wt<Jt;wt++){const Zt=Mt.charCodeAt(wt);Ct.push(String.fromCharCode(Zt>>8&255),String.fromCharCode(Zt&255))}return Ct.join("")}function we(Mt){return decodeURIComponent(escape(Mt))}function ae(Mt){return unescape(encodeURIComponent(Mt))}function ge(Mt){return typeof Mt=="object"&&Mt!==null&&Mt.byteLength!==void 0}function Ie(Mt,Ct){if(Mt.length!==Ct.length)return!1;for(let wt=0,Jt=Mt.length;wt<Jt;wt++)if(Mt[wt]!==Ct[wt])return!1;return!0}function Wt(Mt=new Date){return[Mt.getUTCFullYear().toString(),(Mt.getUTCMonth()+1).toString().padStart(2,"0"),Mt.getUTCDate().toString().padStart(2,"0"),Mt.getUTCHours().toString().padStart(2,"0"),Mt.getUTCMinutes().toString().padStart(2,"0"),Mt.getUTCSeconds().toString().padStart(2,"0")].join("")}function Kt(){const Mt=Object.create(null);let Ct=!1;return Object.defineProperty(Mt,"settled",{get(){return Ct}}),Mt.promise=new Promise(function(wt,Jt){Mt.resolve=function(Zt){Ct=!0,wt(Zt)},Mt.reject=function(Zt){Ct=!0,Jt(Zt)}}),Mt}},(h,i,Y)=>{Y(3)},(h,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isNodeJS=void 0;const Y=typeof browser$1=="object"&&browser$1+""=="[object process]"&&!browser$1.versions.nw&&!(browser$1.versions.electron&&browser$1.type&&browser$1.type!=="browser");i.isNodeJS=Y},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var h,Y,e,a,ht,dt,st,b,j,$e,_t,ut;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(5),_display_utils=__w_pdfjs_require__(8),_font_loader=__w_pdfjs_require__(11),_canvas=__w_pdfjs_require__(12),_worker_options=__w_pdfjs_require__(15),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(16),_metadata=__w_pdfjs_require__(17),_optional_content_config=__w_pdfjs_require__(18),_transport_stream=__w_pdfjs_require__(19),_xfa_text=__w_pdfjs_require__(20);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:_,NodeCMapReaderFactory:s,NodeStandardFontDataFactory:f}=__w_pdfjs_require__(21);exports.DefaultCanvasFactory=DefaultCanvasFactory=_,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=s,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=f}let createPDFNetworkStream;function setPDFNetworkStreamFactory(_){createPDFNetworkStream=_}function getDocument(_){const s=new PDFDocumentLoadingTask;let f;if(typeof _=="string"||_ instanceof URL)f={url:_};else if((0,_util.isArrayBuffer)(_))f={data:_};else if(_ instanceof PDFDataRangeTransport)f={range:_};else{if(typeof _!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!_.url&&!_.data&&!_.range)throw new Error("Invalid parameter object: need either .data, .range or .url");f=_}const g=Object.create(null);let rt=null,it=null;for(const o in f){const c=f[o];switch(o){case"url":if(typeof window<"u")try{g[o]=new URL(c,window.location).href;continue}catch(tt){(0,_util.warn)(`Cannot create valid URL: "${tt}".`)}else if(typeof c=="string"||c instanceof URL){g[o]=c.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":rt=c;continue;case"worker":it=c;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&c instanceof Buffer)g[o]=new Uint8Array(c);else{if(c instanceof Uint8Array)break;if(typeof c=="string")g[o]=(0,_util.stringToBytes)(c);else if(typeof c=="object"&&c!==null&&!isNaN(c.length))g[o]=new Uint8Array(c);else if((0,_util.isArrayBuffer)(c))g[o]=new Uint8Array(c);else throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}continue}g[o]=c}if(g.CMapReaderFactory=g.CMapReaderFactory||DefaultCMapReaderFactory,g.StandardFontDataFactory=g.StandardFontDataFactory||DefaultStandardFontDataFactory,g.ignoreErrors=g.stopAtErrors!==!0,g.fontExtraProperties=g.fontExtraProperties===!0,g.pdfBug=g.pdfBug===!0,g.enableXfa=g.enableXfa===!0,(!Number.isInteger(g.rangeChunkSize)||g.rangeChunkSize<1)&&(g.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof g.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(g.docBaseUrl))&&(g.docBaseUrl=null),(!Number.isInteger(g.maxImageSize)||g.maxImageSize<-1)&&(g.maxImageSize=-1),typeof g.cMapUrl!="string"&&(g.cMapUrl=null),typeof g.standardFontDataUrl!="string"&&(g.standardFontDataUrl=null),typeof g.useWorkerFetch!="boolean"&&(g.useWorkerFetch=g.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&g.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof g.isEvalSupported!="boolean"&&(g.isEvalSupported=!0),typeof g.disableFontFace!="boolean"&&(g.disableFontFace=_is_node.isNodeJS),typeof g.useSystemFonts!="boolean"&&(g.useSystemFonts=!_is_node.isNodeJS&&!g.disableFontFace),(typeof g.ownerDocument!="object"||g.ownerDocument===null)&&(g.ownerDocument=globalThis.document),typeof g.disableRange!="boolean"&&(g.disableRange=!1),typeof g.disableStream!="boolean"&&(g.disableStream=!1),typeof g.disableAutoFetch!="boolean"&&(g.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(g.verbosity),!it){const o={verbosity:g.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};it=o.port?PDFWorker.fromPort(o):new PDFWorker(o),s._worker=it}const m=s.docId;return it.promise.then(function(){if(s.destroyed)throw new Error("Loading aborted");const o=_fetchDocument(it,g,rt,m),c=new Promise(function(tt){let ft;rt?ft=new _transport_stream.PDFDataTransportStream({length:g.length,initialData:g.initialData,progressiveDone:g.progressiveDone,contentDispositionFilename:g.contentDispositionFilename,disableRange:g.disableRange,disableStream:g.disableStream},rt):g.data||(ft=createPDFNetworkStream({url:g.url,length:g.length,httpHeaders:g.httpHeaders,withCredentials:g.withCredentials,rangeChunkSize:g.rangeChunkSize,disableRange:g.disableRange,disableStream:g.disableStream})),tt(ft)});return Promise.all([o,c]).then(function([tt,ft]){if(s.destroyed)throw new Error("Loading aborted");const ot=new _message_handler.MessageHandler(m,tt,it.port),et=new WorkerTransport(ot,s,ft,g);s._transport=et,ot.send("Ready",null)})}).catch(s._capability.reject),s}async function _fetchDocument(_,s,f,g){if(_.destroyed)throw new Error("Worker was destroyed");f&&(s.length=f.length,s.initialData=f.initialData,s.progressiveDone=f.progressiveDone,s.contentDispositionFilename=f.contentDispositionFilename);const rt=await _.messageHandler.sendWithPromise("GetDocRequest",{docId:g,apiVersion:"2.16.105",source:{data:s.data,url:s.url,password:s.password,disableAutoFetch:s.disableAutoFetch,rangeChunkSize:s.rangeChunkSize,length:s.length},maxImageSize:s.maxImageSize,disableFontFace:s.disableFontFace,docBaseUrl:s.docBaseUrl,ignoreErrors:s.ignoreErrors,isEvalSupported:s.isEvalSupported,fontExtraProperties:s.fontExtraProperties,enableXfa:s.enableXfa,useSystemFonts:s.useSystemFonts,cMapUrl:s.useWorkerFetch?s.cMapUrl:null,standardFontDataUrl:s.useWorkerFetch?s.standardFontDataUrl:null});if(s.data&&(s.data=null),_.destroyed)throw new Error("Worker was destroyed");return rt}const i=class i{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${qe(i,h)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var s;this.destroyed=!0,await((s=this._transport)==null?void 0:s.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};h=new WeakMap,qt(i,h,0);let PDFDocumentLoadingTask=i;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(s,f,g=!1,rt=null){this.length=s,this.initialData=f,this.progressiveDone=g,this.contentDispositionFilename=rt,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(s){this._rangeListeners.push(s)}addProgressListener(s){this._progressListeners.push(s)}addProgressiveReadListener(s){this._progressiveReadListeners.push(s)}addProgressiveDoneListener(s){this._progressiveDoneListeners.push(s)}onDataRange(s,f){for(const g of this._rangeListeners)g(s,f)}onDataProgress(s,f){this._readyCapability.promise.then(()=>{for(const g of this._progressListeners)g(s,f)})}onDataProgressiveRead(s){this._readyCapability.promise.then(()=>{for(const f of this._progressiveReadListeners)f(s)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const s of this._progressiveDoneListeners)s()})}transportReady(){this._readyCapability.resolve()}requestDataRange(s,f){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(s,f){this._pdfInfo=s,this._transport=f,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(s){return this._transport.getPage(s)}getPageIndex(s){return this._transport.getPageIndex(s)}getDestinations(){return this._transport.getDestinations()}getDestination(s){return this._transport.getDestination(s)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(s=!1){return this._transport.startCleanup(s||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(s,f,g,rt,it=!1){this._pageIndex=s,this._pageInfo=f,this._ownerDocument=rt,this._transport=g,this._stats=it?new _display_utils.StatTimer:null,this._pdfBug=it,this.commonObjs=g.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:s,rotation:f=this.rotate,offsetX:g=0,offsetY:rt=0,dontFlip:it=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:s,rotation:f,offsetX:g,offsetY:rt,dontFlip:it})}getAnnotations({intent:s="display"}={}){const f=this._transport.getRenderingIntent(s);let g=this._annotationPromises.get(f.cacheKey);return g||(g=this._transport.getAnnotations(this._pageIndex,f.renderingIntent),this._annotationPromises.set(f.cacheKey,g),g=g.then(rt=>{for(const it of rt)it.titleObj!==void 0&&Object.defineProperty(it,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),it.titleObj.str}}),it.contentsObj!==void 0&&Object.defineProperty(it,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),it.contentsObj.str}});return rt})),g}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var s;return((s=this._transport._htmlForXfa)==null?void 0:s.children[this._pageIndex])||null}render({canvasContext:s,viewport:f,intent:g="display",annotationMode:rt=_util.AnnotationMode.ENABLE,transform:it=null,imageLayer:m=null,canvasFactory:o=null,background:c=null,optionalContentConfigPromise:tt=null,annotationCanvasMap:ft=null,pageColors:ot=null,printAnnotationStorage:et=null}){var Ft,jt;((Ft=arguments[0])==null?void 0:Ft.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&rt===_util.AnnotationMode.ENABLE&&(rt=_util.AnnotationMode.ENABLE_FORMS)),((jt=arguments[0])==null?void 0:jt.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&rt===_util.AnnotationMode.ENABLE&&(rt=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const gt=this._transport.getRenderingIntent(g,rt,et);this.pendingCleanup=!1,tt||(tt=this._transport.getOptionalContentConfig());let Lt=this._intentStates.get(gt.cacheKey);Lt||(Lt=Object.create(null),this._intentStates.set(gt.cacheKey,Lt)),Lt.streamReaderCancelTimeout&&(clearTimeout(Lt.streamReaderCancelTimeout),Lt.streamReaderCancelTimeout=null);const Bt=o||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),Dt=!!(gt.renderingIntent&_util.RenderingIntentFlag.PRINT);Lt.displayReadyCapability||(Lt.displayReadyCapability=(0,_util.createPromiseCapability)(),Lt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(gt));const Ot=Ht=>{Lt.renderTasks.delete(Tt),(this.cleanupAfterRender||Dt)&&(this.pendingCleanup=!0),this._tryCleanup(),Ht?(Tt.capability.reject(Ht),this._abortOperatorList({intentState:Lt,reason:Ht instanceof Error?Ht:new Error(Ht)})):Tt.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},Tt=new InternalRenderTask({callback:Ot,params:{canvasContext:s,viewport:f,transform:it,imageLayer:m,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:ft,operatorList:Lt.operatorList,pageIndex:this._pageIndex,canvasFactory:Bt,useRequestAnimationFrame:!Dt,pdfBug:this._pdfBug,pageColors:ot});(Lt.renderTasks||(Lt.renderTasks=new Set)).add(Tt);const Rt=Tt.task;return Promise.all([Lt.displayReadyCapability.promise,tt]).then(([Ht,te])=>{if(this.pendingCleanup){Ot();return}this._stats&&this._stats.time("Rendering"),Tt.initializeGraphics({transparency:Ht,optionalContentConfig:te}),Tt.operatorListChanged()}).catch(Ot),Rt}getOperatorList({intent:s="display",annotationMode:f=_util.AnnotationMode.ENABLE,printAnnotationStorage:g=null}={}){function rt(){m.operatorList.lastChunk&&(m.opListReadCapability.resolve(m.operatorList),m.renderTasks.delete(o))}const it=this._transport.getRenderingIntent(s,f,g,!0);let m=this._intentStates.get(it.cacheKey);m||(m=Object.create(null),this._intentStates.set(it.cacheKey,m));let o;return m.opListReadCapability||(o=Object.create(null),o.operatorListChanged=rt,m.opListReadCapability=(0,_util.createPromiseCapability)(),(m.renderTasks||(m.renderTasks=new Set)).add(o),m.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(it)),m.opListReadCapability.promise}streamTextContent({disableCombineTextItems:s=!1,includeMarkedContent:f=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:s!==!0,includeMarkedContent:f===!0},{highWaterMark:100,size(rt){return rt.items.length}})}getTextContent(s={}){if(this._transport._htmlForXfa)return this.getXfa().then(g=>_xfa_text.XfaText.textContent(g));const f=this.streamTextContent(s);return new Promise(function(g,rt){function it(){m.read().then(function({value:c,done:tt}){if(tt){g(o);return}Object.assign(o.styles,c.styles),o.items.push(...c.items),it()},rt)}const m=f.getReader(),o={items:[],styles:Object.create(null)};it()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const s=[];for(const f of this._intentStates.values())if(this._abortOperatorList({intentState:f,reason:new Error("Page was destroyed."),force:!0}),!f.opListReadCapability)for(const g of f.renderTasks)s.push(g.completed),g.cancel();this.objs.clear();for(const f of this._bitmaps)f.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(s)}cleanup(s=!1){return this.pendingCleanup=!0,this._tryCleanup(s)}_tryCleanup(s=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:f,operatorList:g}of this._intentStates.values())if(f.size>0||!g.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,s&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const f of this._bitmaps)f.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(s,f){const g=this._intentStates.get(f);g&&(this._stats&&this._stats.timeEnd("Page Request"),g.displayReadyCapability&&g.displayReadyCapability.resolve(s))}_renderPageChunk(s,f){for(let g=0,rt=s.length;g<rt;g++)f.operatorList.fnArray.push(s.fnArray[g]),f.operatorList.argsArray.push(s.argsArray[g]);f.operatorList.lastChunk=s.lastChunk,f.operatorList.separateAnnots=s.separateAnnots;for(const g of f.renderTasks)g.operatorListChanged();s.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:s,cacheKey:f,annotationStorageMap:g}){const it=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:s,cacheKey:f,annotationStorage:g}).getReader(),m=this._intentStates.get(f);m.streamReader=it;const o=()=>{it.read().then(({value:c,done:tt})=>{if(tt){m.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(c,m),o())},c=>{if(m.streamReader=null,!this._transport.destroyed){if(m.operatorList){m.operatorList.lastChunk=!0;for(const tt of m.renderTasks)tt.operatorListChanged();this._tryCleanup()}if(m.displayReadyCapability)m.displayReadyCapability.reject(c);else if(m.opListReadCapability)m.opListReadCapability.reject(c);else throw c}})};o()}_abortOperatorList({intentState:s,reason:f,force:g=!1}){if(s.streamReader){if(!g){if(s.renderTasks.size>0)return;if(f instanceof _display_utils.RenderingCancelledException){s.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:s,reason:f,force:!0}),s.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(s.streamReader.cancel(new _util.AbortException(f.message)).catch(()=>{}),s.streamReader=null,!this._transport.destroyed){for(const[rt,it]of this._intentStates)if(it===s){this._intentStates.delete(rt);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(s,f){const g={data:structuredClone(s,f)};this._deferred.then(()=>{for(const rt of this._listeners)rt.call(this,g)})}addEventListener(s,f){this._listeners.push(f)}removeEventListener(s,f){const g=this._listeners.indexOf(f);this._listeners.splice(g,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const _=(Y=document==null?void 0:document.currentScript)==null?void 0:Y.src;_&&(PDFWorkerUtil.fallbackWorkerSrc=_.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(_,s){let f;try{if(f=new URL(_),!f.origin||f.origin==="null")return!1}catch{return!1}const g=new URL(s,f);return f.origin===g.origin},PDFWorkerUtil.createCDNWrapper=function(_){const s=`importScripts("${_}");`;return URL.createObjectURL(new Blob([s]))}}const _PDFWorker=class _PDFWorker{constructor({name:_=null,port:s=null,verbosity:f=(0,_util.getVerbosityLevel)()}={}){if(s&&mt(_PDFWorker,e).has(s))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=_,this.destroyed=!1,this.verbosity=f,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,s){mt(_PDFWorker,e).set(s,this),this._initializeFromPort(s);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(_){this._port=_,this._messageHandler=new _message_handler.MessageHandler("main","worker",_),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:_}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,_)||(_=PDFWorkerUtil.createCDNWrapper(new URL(_,window.location).href));const s=new Worker(_),f=new _message_handler.MessageHandler("main","worker",s),g=()=>{s.removeEventListener("error",rt),f.destroy(),s.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},rt=()=>{this._webWorker||g()};s.addEventListener("error",rt),f.on("test",m=>{if(s.removeEventListener("error",rt),this.destroyed){g();return}m?(this._messageHandler=f,this._port=s,this._webWorker=s,this._readyCapability.resolve(),f.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),f.destroy(),s.terminate())}),f.on("ready",m=>{if(s.removeEventListener("error",rt),this.destroyed){g();return}try{it()}catch{this._setupFakeWorker()}});const it=()=>{const m=new Uint8Array;f.send("test",m,[m.buffer])};it();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(_=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const s=new LoopbackPort;this._port=s;const f=`fake${PDFWorkerUtil.fakeWorkerId++}`,g=new _message_handler.MessageHandler(f+"_worker",f,s);_.setup(g,s);const rt=new _message_handler.MessageHandler(f,f+"_worker",s);this._messageHandler=rt,this._readyCapability.resolve(),rt.send("configure",{verbosity:this.verbosity})}).catch(_=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${_.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),mt(_PDFWorker,e).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(_){if(!(_!=null&&_.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return mt(this,e).has(_.port)?mt(this,e).get(_.port):new _PDFWorker(_)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var _;try{return((_=globalThis.pdfjsWorker)==null?void 0:_.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};e=new WeakMap,qt(_PDFWorker,e,new WeakMap);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(s,f,g,rt){qt(this,a,null);qt(this,ht,new Map);qt(this,dt,new Map);qt(this,st,null);this.messageHandler=s,this.loadingTask=f,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:f.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:rt.ownerDocument,styleElement:rt.styleElement}),this._params=rt,rt.useWorkerFetch||(this.CMapReaderFactory=new rt.CMapReaderFactory({baseUrl:rt.cMapUrl,isCompressed:rt.cMapPacked}),this.StandardFontDataFactory=new rt.StandardFontDataFactory({baseUrl:rt.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=g,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return mt(this,a)}getRenderingIntent(s,f=_util.AnnotationMode.ENABLE,g=null,rt=!1){let it=_util.RenderingIntentFlag.DISPLAY,m=null;switch(s){case"any":it=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":it=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${s}`)}switch(f){case _util.AnnotationMode.DISABLE:it+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:it+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:it+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,m=(it&_util.RenderingIntentFlag.PRINT&&g instanceof _annotation_storage.PrintAnnotationStorage?g:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${f}`)}return rt&&(it+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:it,cacheKey:`${it}_${_annotation_storage.AnnotationStorage.getHash(m)}`,annotationStorageMap:m}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const s=[];for(const g of mt(this,ht).values())s.push(g._destroy());mt(this,ht).clear(),mt(this,dt).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const f=this.messageHandler.sendWithPromise("Terminate",null);return s.push(f),Promise.all(s).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),Qt(this,st,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:s,loadingTask:f}=this;s.on("GetReader",(g,rt)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=it=>{this._lastProgress={loaded:it.loaded,total:it.total}},rt.onPull=()=>{this._fullReader.read().then(function({value:it,done:m}){if(m){rt.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(it),"GetReader - expected an ArrayBuffer."),rt.enqueue(new Uint8Array(it),1,[it])}).catch(it=>{rt.error(it)})},rt.onCancel=it=>{this._fullReader.cancel(it),rt.ready.catch(m=>{if(!this.destroyed)throw m})}}),s.on("ReaderHeadersReady",g=>{const rt=(0,_util.createPromiseCapability)(),it=this._fullReader;return it.headersReady.then(()=>{var m;(!it.isStreamingSupported||!it.isRangeSupported)&&(this._lastProgress&&((m=f.onProgress)==null||m.call(f,this._lastProgress)),it.onProgress=o=>{var c;(c=f.onProgress)==null||c.call(f,{loaded:o.loaded,total:o.total})}),rt.resolve({isStreamingSupported:it.isStreamingSupported,isRangeSupported:it.isRangeSupported,contentLength:it.contentLength})},rt.reject),rt.promise}),s.on("GetRangeReader",(g,rt)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const it=this._networkStream.getRangeReader(g.begin,g.end);if(!it){rt.close();return}rt.onPull=()=>{it.read().then(function({value:m,done:o}){if(o){rt.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(m),"GetRangeReader - expected an ArrayBuffer."),rt.enqueue(new Uint8Array(m),1,[m])}).catch(m=>{rt.error(m)})},rt.onCancel=m=>{it.cancel(m),rt.ready.catch(o=>{if(!this.destroyed)throw o})}}),s.on("GetDoc",({pdfInfo:g})=>{this._numPages=g.numPages,this._htmlForXfa=g.htmlForXfa,delete g.htmlForXfa,f._capability.resolve(new PDFDocumentProxy(g,this))}),s.on("DocException",function(g){let rt;switch(g.name){case"PasswordException":rt=new _util.PasswordException(g.message,g.code);break;case"InvalidPDFException":rt=new _util.InvalidPDFException(g.message);break;case"MissingPDFException":rt=new _util.MissingPDFException(g.message);break;case"UnexpectedResponseException":rt=new _util.UnexpectedResponseException(g.message,g.status);break;case"UnknownErrorException":rt=new _util.UnknownErrorException(g.message,g.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}f._capability.reject(rt)}),s.on("PasswordRequest",g=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),f.onPassword){const rt=it=>{it instanceof Error?this._passwordCapability.reject(it):this._passwordCapability.resolve({password:it})};try{f.onPassword(rt,g.code)}catch(it){this._passwordCapability.reject(it)}}else this._passwordCapability.reject(new _util.PasswordException(g.message,g.code));return this._passwordCapability.promise}),s.on("DataLoaded",g=>{var rt;(rt=f.onProgress)==null||rt.call(f,{loaded:g.length,total:g.length}),this.downloadInfoCapability.resolve(g)}),s.on("StartRenderPage",g=>{if(this.destroyed)return;mt(this,ht).get(g.pageIndex)._startRenderPage(g.transparency,g.cacheKey)}),s.on("commonobj",([g,rt,it])=>{var m;if(!this.destroyed&&!this.commonObjs.has(g))switch(rt){case"Font":const o=this._params;if("error"in it){const ft=it.error;(0,_util.warn)(`Error during font loading: ${ft}`),this.commonObjs.resolve(g,ft);break}let c=null;o.pdfBug&&((m=globalThis.FontInspector)!=null&&m.enabled)&&(c={registerFont(ft,ot){globalThis.FontInspector.fontAdded(ft,ot)}});const tt=new _font_loader.FontFaceObject(it,{isEvalSupported:o.isEvalSupported,disableFontFace:o.disableFontFace,ignoreErrors:o.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:c});this.fontLoader.bind(tt).catch(ft=>s.sendWithPromise("FontFallback",{id:g})).finally(()=>{!o.fontExtraProperties&&tt.data&&(tt.data=null),this.commonObjs.resolve(g,tt)});break;case"FontPath":case"Image":this.commonObjs.resolve(g,it);break;default:throw new Error(`Got unknown common object type ${rt}`)}}),s.on("obj",([g,rt,it,m])=>{var c;if(this.destroyed)return;const o=mt(this,ht).get(rt);if(!o.objs.has(g))switch(it){case"Image":o.objs.resolve(g,m);const tt=8e6;if(m){let ft;if(m.bitmap){const{bitmap:ot,width:et,height:gt}=m;ft=et*gt*4,o._bitmaps.add(ot)}else ft=((c=m.data)==null?void 0:c.length)||0;ft>tt&&(o.cleanupAfterRender=!0)}break;case"Pattern":o.objs.resolve(g,m);break;default:throw new Error(`Got unknown object type ${it}`)}}),s.on("DocProgress",g=>{var rt;this.destroyed||(rt=f.onProgress)==null||rt.call(f,{loaded:g.loaded,total:g.total})}),s.on("DocStats",g=>{this.destroyed||Qt(this,a,Object.freeze({streamTypes:Object.freeze(g.streamTypes),fontTypes:Object.freeze(g.fontTypes)}))}),s.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),s.on("FetchBuiltInCMap",g=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(g):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),s.on("FetchStandardFontData",g=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(g):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:s}){var f,g;this.destroyed||(g=(f=this.loadingTask).onUnsupportedFeature)==null||g.call(f,s)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(s){if(!Number.isInteger(s)||s<=0||s>this._numPages)return Promise.reject(new Error("Invalid page request."));const f=s-1,g=mt(this,dt).get(f);if(g)return g;const rt=this.messageHandler.sendWithPromise("GetPage",{pageIndex:f}).then(it=>{if(this.destroyed)throw new Error("Transport destroyed");const m=new PDFPageProxy(f,it,this,this._params.ownerDocument,this._params.pdfBug);return mt(this,ht).set(f,m),m});return mt(this,dt).set(f,rt),rt}getPageIndex(s){return typeof s!="object"||s===null||!Number.isInteger(s.num)||s.num<0||!Number.isInteger(s.gen)||s.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:s.num,gen:s.gen})}getAnnotations(s,f){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:s,intent:f})}saveDocument(){var s;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((s=this._fullReader)==null?void 0:s.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(s){return typeof s!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:s})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(s){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:s})}getStructTree(s){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:s})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(s=>new _optional_content_config.OptionalContentConfig(s))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return mt(this,st)||Qt(this,st,this.messageHandler.sendWithPromise("GetMetadata",null).then(s=>{var f,g;return{info:s[0],metadata:s[1]?new _metadata.Metadata(s[1]):null,contentDispositionFilename:((f=this._fullReader)==null?void 0:f.filename)??null,contentLength:((g=this._fullReader)==null?void 0:g.contentLength)??null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(s=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const f of mt(this,ht).values())if(!f.cleanup())throw new Error(`startCleanup: Page ${f.pageNumber} is currently rendering.`);this.commonObjs.clear(),s||this.fontLoader.clear(),Qt(this,st,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const s=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:s.disableAutoFetch,enableXfa:s.enableXfa})}}a=new WeakMap,ht=new WeakMap,dt=new WeakMap,st=new WeakMap;class PDFObjects{constructor(){qt(this,j);qt(this,b,Object.create(null))}get(s,f=null){if(f){const rt=zt(this,j,$e).call(this,s);return rt.capability.promise.then(()=>f(rt.data)),null}const g=mt(this,b)[s];if(!(g!=null&&g.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${s}.`);return g.data}has(s){const f=mt(this,b)[s];return(f==null?void 0:f.capability.settled)||!1}resolve(s,f=null){const g=zt(this,j,$e).call(this,s);g.data=f,g.capability.resolve()}clear(){Qt(this,b,Object.create(null))}}b=new WeakMap,j=new WeakSet,$e=function(s){const f=mt(this,b)[s];return f||(mt(this,b)[s]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(s){qt(this,_t,null);Qt(this,_t,s),this.onContinue=null}get promise(){return mt(this,_t).capability.promise}cancel(){mt(this,_t).cancel()}get separateAnnots(){const{separateAnnots:s}=mt(this,_t).operatorList;if(!s)return!1;const{annotationCanvasMap:f}=mt(this,_t);return s.form||s.canvas&&(f==null?void 0:f.size)>0}}_t=new WeakMap,exports.RenderTask=RenderTask;const at=class at{constructor({callback:s,params:f,objs:g,commonObjs:rt,annotationCanvasMap:it,operatorList:m,pageIndex:o,canvasFactory:c,useRequestAnimationFrame:tt=!1,pdfBug:ft=!1,pageColors:ot=null}){this.callback=s,this.params=f,this.objs=g,this.commonObjs=rt,this.annotationCanvasMap=it,this.operatorListIdx=null,this.operatorList=m,this._pageIndex=o,this.canvasFactory=c,this._pdfBug=ft,this.pageColors=ot,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=tt===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=f.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:s=!1,optionalContentConfig:f}){var c;if(this.cancelled)return;if(this._canvas){if(mt(at,ut).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");mt(at,ut).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:g,viewport:rt,transform:it,imageLayer:m,background:o}=this.params;this.gfx=new _canvas.CanvasGraphics(g,this.commonObjs,this.objs,this.canvasFactory,m,f,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:it,viewport:rt,transparency:s,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(s=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&mt(at,ut).delete(this._canvas),this.callback(s||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&mt(at,ut).delete(this._canvas),this.callback())))}};ut=new WeakMap,qt(at,ut,new WeakSet);let InternalRenderTask=at;const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build},(h,i,Y)=>{var b,on,lt;Object.defineProperty(i,"__esModule",{value:!0}),i.PrintAnnotationStorage=i.AnnotationStorage=void 0;var e=Y(1),a=Y(6),ht=Y(10);class dt{constructor(){qt(this,b);this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(ut,at){const _=this._storage.get(ut);return _===void 0?at:Object.assign(at,_)}getRawValue(ut){return this._storage.get(ut)}remove(ut){if(this._storage.delete(ut),this._storage.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const at of this._storage.values())if(at instanceof a.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(ut,at){const _=this._storage.get(ut);let s=!1;if(_!==void 0)for(const[f,g]of Object.entries(at))_[f]!==g&&(s=!0,_[f]=g);else s=!0,this._storage.set(ut,at);s&&zt(this,b,on).call(this),at instanceof a.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(at.constructor._type)}has(ut){return this._storage.has(ut)}getAll(){return this._storage.size>0?(0,e.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new st(this)}get serializable(){if(this._storage.size===0)return null;const ut=new Map;for(const[at,_]of this._storage){const s=_ instanceof a.AnnotationEditor?_.serialize():_;s&&ut.set(at,s)}return ut}static getHash(ut){if(!ut)return"";const at=new ht.MurmurHash3_64;for(const[_,s]of ut)at.update(`${_}:${JSON.stringify(s)}`);return at.hexdigest()}}b=new WeakSet,on=function(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())},i.AnnotationStorage=dt;class st extends dt{constructor(at){super();qt(this,lt,null);Qt(this,lt,structuredClone(at.serializable))}get print(){(0,e.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return mt(this,lt)}}lt=new WeakMap,i.PrintAnnotationStorage=st},(h,i,Y)=>{var dt,st,b,j,lt,_t;Object.defineProperty(i,"__esModule",{value:!0}),i.AnnotationEditor=void 0;var e=Y(7),a=Y(1);const ut=class ut{constructor(_){qt(this,dt,this.focusin.bind(this));qt(this,st,this.focusout.bind(this));qt(this,b,!1);qt(this,j,!1);qt(this,lt,!1);qt(this,_t,ut._zIndex++);this.constructor===ut&&(0,a.unreachable)("Cannot initialize AnnotationEditor."),this.parent=_.parent,this.id=_.id,this.width=this.height=null,this.pageIndex=_.parent.pageIndex,this.name=_.name,this.div=null;const[s,f]=this.parent.viewportBaseDimensions;this.x=_.x/s,this.y=_.y/f,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,a.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=mt(this,_t)}focusin(_){mt(this,b)?Qt(this,b,!1):this.parent.setSelected(this)}focusout(_){if(!this.isAttachedToDOM)return;const s=_.relatedTarget;s!=null&&s.closest(`#${this.id}`)||(_.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(_){const s=this.parent.div.getBoundingClientRect();this.startX=_.clientX-s.x,this.startY=_.clientY-s.y,_.dataTransfer.setData("text/plain",this.id),_.dataTransfer.effectAllowed="move"}setAt(_,s,f,g){const[rt,it]=this.parent.viewportBaseDimensions;[f,g]=this.screenToPageTranslation(f,g),this.x=(_+f)/rt,this.y=(s+g)/it,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(_,s){const[f,g]=this.parent.viewportBaseDimensions;[_,s]=this.screenToPageTranslation(_,s),this.x+=_/f,this.y+=s/g,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(_,s){const{rotation:f}=this.parent.viewport;switch(f){case 90:return[s,-_];case 180:return[-_,-s];case 270:return[-s,_];default:return[_,s]}}setDims(_,s){const[f,g]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*_/f}%`,this.div.style.height=`${100*s/g}%`}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",mt(this,dt)),this.div.addEventListener("focusout",mt(this,st));const[_,s]=this.getInitialTranslation();return this.translate(_,s),(0,e.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(_){const s=e.KeyboardManager.platform.isMac;if(_.button!==0||_.ctrlKey&&s){_.preventDefault();return}_.ctrlKey&&!s||_.shiftKey||_.metaKey&&s?this.parent.toggleSelected(this):this.parent.setSelected(this),Qt(this,b,!0)}getRect(_,s){const[f,g]=this.parent.viewportBaseDimensions,[rt,it]=this.parent.pageDimensions,m=rt*_/f,o=it*s/g,c=this.x*rt,tt=this.y*it,ft=this.width*rt,ot=this.height*it;switch(this.rotation){case 0:return[c+m,it-tt-o-ot,c+m+ft,it-tt-o];case 90:return[c+o,it-tt+m,c+o+ot,it-tt+m+ft];case 180:return[c-m-ft,it-tt+o,c-m,it-tt+o+ot];case 270:return[c-o-ot,it-tt-m-ft,c-o,it-tt-m];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(_,s){const[f,g,rt,it]=_,m=rt-f,o=it-g;switch(this.rotation){case 0:return[f,s-it,m,o];case 90:return[f,s-g,o,m];case 180:return[rt,s-g,m,o];case 270:return[rt,s-it,o,m];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){Qt(this,lt,!0)}disableEditMode(){Qt(this,lt,!1)}isInEditMode(){return mt(this,lt)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var _;(_=this.div)==null||_.addEventListener("focusin",mt(this,dt))}serialize(){(0,a.unreachable)("An editor must be serializable")}static deserialize(_,s){const f=new this.prototype.constructor({parent:s,id:s.getNextId()});f.rotation=_.rotation;const[g,rt]=s.pageDimensions,[it,m,o,c]=f.getRectInCurrentCoords(_.rect,rt);return f.x=it/g,f.y=m/rt,f.width=o/g,f.height=c/rt,f}remove(){this.div.removeEventListener("focusin",mt(this,dt)),this.div.removeEventListener("focusout",mt(this,st)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var _;(_=this.div)==null||_.classList.add("selectedEditor")}unselect(){var _;(_=this.div)==null||_.classList.remove("selectedEditor")}updateParams(_,s){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return mt(this,j)}set isEditing(_){Qt(this,j,_),_?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};dt=new WeakMap,st=new WeakMap,b=new WeakMap,j=new WeakMap,lt=new WeakMap,_t=new WeakMap,fe(ut,"_colorManager",new e.ColorManager),fe(ut,"_zIndex",1);let ht=ut;i.AnnotationEditor=ht},(h,i,Y)=>{var at,_,s,f,g,rt,ln,o,tt,ft,ot,et,gt,Lt,Bt,Dt,Ot,Tt,Rt,Ft,jt,Ht,te,Et,$,k,cn,vt,Ge,St,Se,xt,Me,Z,un,ct,hn,Pt,He,Vt,De,$t,Le;Object.defineProperty(i,"__esModule",{value:!0}),i.KeyboardManager=i.CommandManager=i.ColorManager=i.AnnotationEditorUIManager=void 0,i.bindEvents=ht,i.opacityToHex=dt;var e=Y(1),a=Y(8);function ht(Yt,bt,Xt){for(const ee of Xt)bt.addEventListener(ee,Yt[ee].bind(Yt))}function dt(Yt){return Math.round(Math.min(255,Math.max(1,255*Yt))).toString(16).padStart(2,"0")}class st{constructor(){qt(this,at,0)}getId(){return`${e.AnnotationEditorPrefix}${qe(this,at)._++}`}}at=new WeakMap;class b{constructor(bt=128){qt(this,_,[]);qt(this,s,!1);qt(this,f,void 0);qt(this,g,-1);Qt(this,f,bt)}add({cmd:bt,undo:Xt,mustExec:ee,type:re=NaN,overwriteIfSameType:se=!1,keepUndo:le=!1}){if(ee&&bt(),mt(this,s))return;const pe={cmd:bt,undo:Xt,type:re};if(mt(this,g)===-1){mt(this,_).length>0&&(mt(this,_).length=0),Qt(this,g,0),mt(this,_).push(pe);return}if(se&&mt(this,_)[mt(this,g)].type===re){le&&(pe.undo=mt(this,_)[mt(this,g)].undo),mt(this,_)[mt(this,g)]=pe;return}const de=mt(this,g)+1;de===mt(this,f)?mt(this,_).splice(0,1):(Qt(this,g,de),de<mt(this,_).length&&mt(this,_).splice(de)),mt(this,_).push(pe)}undo(){mt(this,g)!==-1&&(Qt(this,s,!0),mt(this,_)[mt(this,g)].undo(),Qt(this,s,!1),Qt(this,g,mt(this,g)-1))}redo(){mt(this,g)<mt(this,_).length-1&&(Qt(this,g,mt(this,g)+1),Qt(this,s,!0),mt(this,_)[mt(this,g)].cmd(),Qt(this,s,!1))}hasSomethingToUndo(){return mt(this,g)!==-1}hasSomethingToRedo(){return mt(this,g)<mt(this,_).length-1}destroy(){Qt(this,_,null)}}_=new WeakMap,s=new WeakMap,f=new WeakMap,g=new WeakMap,i.CommandManager=b;const m=class m{constructor(bt){qt(this,rt);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const Xt=m.platform.isMac;for(const[ee,re]of bt)for(const se of ee){const le=se.startsWith("mac+");Xt&&le?(this.callbacks.set(se.slice(4),re),this.allKeys.add(se.split("+").at(-1))):!Xt&&!le&&(this.callbacks.set(se,re),this.allKeys.add(se.split("+").at(-1)))}}static get platform(){const bt=typeof navigator<"u"?navigator.platform:"";return(0,e.shadow)(this,"platform",{isWin:bt.includes("Win"),isMac:bt.includes("Mac")})}exec(bt,Xt){if(!this.allKeys.has(Xt.key))return;const ee=this.callbacks.get(zt(this,rt,ln).call(this,Xt));ee&&(ee.bind(bt)(),Xt.stopPropagation(),Xt.preventDefault())}};rt=new WeakSet,ln=function(bt){bt.altKey&&this.buffer.push("alt"),bt.ctrlKey&&this.buffer.push("ctrl"),bt.metaKey&&this.buffer.push("meta"),bt.shiftKey&&this.buffer.push("shift"),this.buffer.push(bt.key);const Xt=this.buffer.join("+");return this.buffer.length=0,Xt};let j=m;i.KeyboardManager=j;class lt{constructor(){qt(this,o,null)}copy(bt){bt&&(Array.isArray(bt)?Qt(this,o,bt.map(Xt=>Xt.serialize())):Qt(this,o,[bt.serialize()]),Qt(this,o,mt(this,o).filter(Xt=>!!Xt)),mt(this,o).length===0&&Qt(this,o,null))}paste(){return mt(this,o)}isEmpty(){return mt(this,o)===null}destroy(){Qt(this,o,null)}}o=new WeakMap;const c=class c{get _colors(){const bt=new Map([["CanvasText",null],["Canvas",null]]);return(0,a.getColorValues)(bt),(0,e.shadow)(this,"_colors",bt)}convert(bt){const Xt=(0,a.getRGB)(bt);if(!window.matchMedia("(forced-colors: active)").matches)return Xt;for(const[ee,re]of this._colors)if(re.every((se,le)=>se===Xt[le]))return c._colorsMapping.get(ee);return Xt}getHexCode(bt){const Xt=this._colors.get(bt);return Xt?e.Util.makeHexColor(...Xt):bt}};fe(c,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let _t=c;i.ColorManager=_t;const Gt=class Gt{constructor(bt,Xt){qt(this,k);qt(this,vt);qt(this,St);qt(this,xt);qt(this,Z);qt(this,ct);qt(this,Pt);qt(this,Vt);qt(this,$t);qt(this,tt,null);qt(this,ft,new Map);qt(this,ot,new Map);qt(this,et,new lt);qt(this,gt,new b);qt(this,Lt,0);qt(this,Bt,null);qt(this,Dt,null);qt(this,Ot,new st);qt(this,Tt,!1);qt(this,Rt,e.AnnotationEditorType.NONE);qt(this,Ft,new Set);qt(this,jt,this.keydown.bind(this));qt(this,Ht,this.onEditingAction.bind(this));qt(this,te,this.onPageChanging.bind(this));qt(this,Et,{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});qt(this,$,null);Qt(this,$,bt),Qt(this,Dt,Xt),mt(this,Dt)._on("editingaction",mt(this,Ht)),mt(this,Dt)._on("pagechanging",mt(this,te))}destroy(){zt(this,vt,Ge).call(this),mt(this,Dt)._off("editingaction",mt(this,Ht)),mt(this,Dt)._off("pagechanging",mt(this,te));for(const bt of mt(this,ot).values())bt.destroy();mt(this,ot).clear(),mt(this,ft).clear(),Qt(this,tt,null),mt(this,Ft).clear(),mt(this,et).destroy(),mt(this,gt).destroy()}onPageChanging({pageNumber:bt}){Qt(this,Lt,bt-1)}focusMainContainer(){mt(this,$).focus()}keydown(bt){var Xt;(Xt=this.getActive())!=null&&Xt.shouldGetKeyboardEvents()||Gt._keyboardManager.exec(this,bt)}onEditingAction(bt){["undo","redo","cut","copy","paste","delete","selectAll"].includes(bt.name)&&this[bt.name]()}setEditingState(bt){bt?(zt(this,k,cn).call(this),zt(this,St,Se).call(this,{isEditing:mt(this,Rt)!==e.AnnotationEditorType.NONE,isEmpty:zt(this,Vt,De).call(this),hasSomethingToUndo:mt(this,gt).hasSomethingToUndo(),hasSomethingToRedo:mt(this,gt).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:mt(this,et).isEmpty()})):(zt(this,vt,Ge).call(this),zt(this,St,Se).call(this,{isEditing:!1}))}registerEditorTypes(bt){Qt(this,Bt,bt);for(const Xt of mt(this,Bt))zt(this,xt,Me).call(this,Xt.defaultPropertiesToUpdate)}getId(){return mt(this,Ot).getId()}addLayer(bt){mt(this,ot).set(bt.pageIndex,bt),mt(this,Tt)?bt.enable():bt.disable()}removeLayer(bt){mt(this,ot).delete(bt.pageIndex)}updateMode(bt){if(Qt(this,Rt,bt),bt===e.AnnotationEditorType.NONE)this.setEditingState(!1),zt(this,ct,hn).call(this);else{this.setEditingState(!0),zt(this,Z,un).call(this);for(const Xt of mt(this,ot).values())Xt.updateMode(bt)}}updateToolbar(bt){bt!==mt(this,Rt)&&mt(this,Dt).dispatch("switchannotationeditormode",{source:this,mode:bt})}updateParams(bt,Xt){for(const ee of mt(this,Ft))ee.updateParams(bt,Xt);for(const ee of mt(this,Bt))ee.updateDefaultParams(bt,Xt)}getEditors(bt){const Xt=[];for(const ee of mt(this,ft).values())ee.pageIndex===bt&&Xt.push(ee);return Xt}getEditor(bt){return mt(this,ft).get(bt)}addEditor(bt){mt(this,ft).set(bt.id,bt)}removeEditor(bt){mt(this,ft).delete(bt.id),this.unselect(bt)}setActiveEditor(bt){mt(this,tt)!==bt&&(Qt(this,tt,bt),bt&&zt(this,xt,Me).call(this,bt.propertiesToUpdate))}toggleSelected(bt){if(mt(this,Ft).has(bt)){mt(this,Ft).delete(bt),bt.unselect(),zt(this,St,Se).call(this,{hasSelectedEditor:this.hasSelection});return}mt(this,Ft).add(bt),bt.select(),zt(this,xt,Me).call(this,bt.propertiesToUpdate),zt(this,St,Se).call(this,{hasSelectedEditor:!0})}setSelected(bt){for(const Xt of mt(this,Ft))Xt!==bt&&Xt.unselect();mt(this,Ft).clear(),mt(this,Ft).add(bt),bt.select(),zt(this,xt,Me).call(this,bt.propertiesToUpdate),zt(this,St,Se).call(this,{hasSelectedEditor:!0})}isSelected(bt){return mt(this,Ft).has(bt)}unselect(bt){bt.unselect(),mt(this,Ft).delete(bt),zt(this,St,Se).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return mt(this,Ft).size!==0}undo(){mt(this,gt).undo(),zt(this,St,Se).call(this,{hasSomethingToUndo:mt(this,gt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:zt(this,Vt,De).call(this)})}redo(){mt(this,gt).redo(),zt(this,St,Se).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:mt(this,gt).hasSomethingToRedo(),isEmpty:zt(this,Vt,De).call(this)})}addCommands(bt){mt(this,gt).add(bt),zt(this,St,Se).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:zt(this,Vt,De).call(this)})}delete(){if(mt(this,tt)&&mt(this,tt).commitOrRemove(),!this.hasSelection)return;const bt=[...mt(this,Ft)],Xt=()=>{for(const re of bt)re.remove()},ee=()=>{for(const re of bt)zt(this,Pt,He).call(this,re)};this.addCommands({cmd:Xt,undo:ee,mustExec:!0})}copy(){if(mt(this,tt)&&mt(this,tt).commitOrRemove(),this.hasSelection){const bt=[];for(const Xt of mt(this,Ft))Xt.isEmpty()||bt.push(Xt);if(bt.length===0)return;mt(this,et).copy(bt),zt(this,St,Se).call(this,{hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(mt(this,et).isEmpty())return;this.unselectAll();const bt=mt(this,ot).get(mt(this,Lt)),Xt=mt(this,et).paste().map(se=>bt.deserialize(se)),ee=()=>{for(const se of Xt)zt(this,Pt,He).call(this,se);zt(this,$t,Le).call(this,Xt)},re=()=>{for(const se of Xt)se.remove()};this.addCommands({cmd:ee,undo:re,mustExec:!0})}selectAll(){for(const bt of mt(this,Ft))bt.commit();zt(this,$t,Le).call(this,mt(this,ft).values())}unselectAll(){if(mt(this,tt)){mt(this,tt).commitOrRemove();return}if(zt(this,$t,Le).size!==0){for(const bt of mt(this,Ft))bt.unselect();mt(this,Ft).clear(),zt(this,St,Se).call(this,{hasSelectedEditor:!1})}}isActive(bt){return mt(this,tt)===bt}getActive(){return mt(this,tt)}getMode(){return mt(this,Rt)}};tt=new WeakMap,ft=new WeakMap,ot=new WeakMap,et=new WeakMap,gt=new WeakMap,Lt=new WeakMap,Bt=new WeakMap,Dt=new WeakMap,Ot=new WeakMap,Tt=new WeakMap,Rt=new WeakMap,Ft=new WeakMap,jt=new WeakMap,Ht=new WeakMap,te=new WeakMap,Et=new WeakMap,$=new WeakMap,k=new WeakSet,cn=function(){mt(this,$).addEventListener("keydown",mt(this,jt))},vt=new WeakSet,Ge=function(){mt(this,$).removeEventListener("keydown",mt(this,jt))},St=new WeakSet,Se=function(bt){Object.entries(bt).some(([ee,re])=>mt(this,Et)[ee]!==re)&&mt(this,Dt).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(mt(this,Et),bt)})},xt=new WeakSet,Me=function(bt){mt(this,Dt).dispatch("annotationeditorparamschanged",{source:this,details:bt})},Z=new WeakSet,un=function(){if(!mt(this,Tt)){Qt(this,Tt,!0);for(const bt of mt(this,ot).values())bt.enable()}},ct=new WeakSet,hn=function(){if(this.unselectAll(),mt(this,Tt)){Qt(this,Tt,!1);for(const bt of mt(this,ot).values())bt.disable()}},Pt=new WeakSet,He=function(bt){const Xt=mt(this,ot).get(bt.pageIndex);Xt?Xt.addOrRebuild(bt):this.addEditor(bt)},Vt=new WeakSet,De=function(){if(mt(this,ft).size===0)return!0;if(mt(this,ft).size===1)for(const bt of mt(this,ft).values())return bt.isEmpty();return!1},$t=new WeakSet,Le=function(bt){mt(this,Ft).clear();for(const Xt of bt)Xt.isEmpty()||(mt(this,Ft).add(Xt),Xt.select());zt(this,St,Se).call(this,{hasSelectedEditor:!0})},fe(Gt,"_keyboardManager",new j([[["ctrl+a","mac+meta+a"],Gt.prototype.selectAll],[["ctrl+c","mac+meta+c"],Gt.prototype.copy],[["ctrl+v","mac+meta+v"],Gt.prototype.paste],[["ctrl+x","mac+meta+x"],Gt.prototype.cut],[["ctrl+z","mac+meta+z"],Gt.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],Gt.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],Gt.prototype.delete],[["Escape","mac+Escape"],Gt.prototype.unselectAll]]));let ut=Gt;i.AnnotationEditorUIManager=ut},(h,i,Y)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.StatTimer=i.RenderingCancelledException=i.PixelsPerInch=i.PageViewport=i.PDFDateString=i.DOMStandardFontDataFactory=i.DOMSVGFactory=i.DOMCanvasFactory=i.DOMCMapReaderFactory=i.AnnotationPrefix=void 0,i.deprecated=c,i.getColorValues=gt,i.getCurrentTransform=Lt,i.getCurrentTransformInverse=Bt,i.getFilenameFromUrl=g,i.getPdfFilenameFromUrl=rt,i.getRGB=et,i.getXfaPageViewport=ot,i.isDataScheme=s,i.isPdfFile=f,i.isValidFetchUrl=m,i.loadScript=o;var e=Y(9),a=Y(1);const ht="http://www.w3.org/2000/svg",dt="pdfjs_internal_id_";i.AnnotationPrefix=dt;const Dt=class Dt{};fe(Dt,"CSS",96),fe(Dt,"PDF",72),fe(Dt,"PDF_TO_CSS_UNITS",Dt.CSS/Dt.PDF);let st=Dt;i.PixelsPerInch=st;class b extends e.BaseCanvasFactory{constructor({ownerDocument:Tt=globalThis.document}={}){super(),this._document=Tt}_createCanvas(Tt,Rt){const Ft=this._document.createElement("canvas");return Ft.width=Tt,Ft.height=Rt,Ft}}i.DOMCanvasFactory=b;async function j(Ot,Tt=!1){if(m(Ot,document.baseURI)){const Rt=await fetch(Ot);if(!Rt.ok)throw new Error(Rt.statusText);return Tt?new Uint8Array(await Rt.arrayBuffer()):(0,a.stringToBytes)(await Rt.text())}return new Promise((Rt,Ft)=>{const jt=new XMLHttpRequest;jt.open("GET",Ot,!0),Tt&&(jt.responseType="arraybuffer"),jt.onreadystatechange=()=>{if(jt.readyState===XMLHttpRequest.DONE){if(jt.status===200||jt.status===0){let Ht;if(Tt&&jt.response?Ht=new Uint8Array(jt.response):!Tt&&jt.responseText&&(Ht=(0,a.stringToBytes)(jt.responseText)),Ht){Rt(Ht);return}}Ft(new Error(jt.statusText))}},jt.send(null)})}class lt extends e.BaseCMapReaderFactory{_fetchData(Tt,Rt){return j(Tt,this.isCompressed).then(Ft=>({cMapData:Ft,compressionType:Rt}))}}i.DOMCMapReaderFactory=lt;class _t extends e.BaseStandardFontDataFactory{_fetchData(Tt){return j(Tt,!0)}}i.DOMStandardFontDataFactory=_t;class ut extends e.BaseSVGFactory{_createSVG(Tt){return document.createElementNS(ht,Tt)}}i.DOMSVGFactory=ut;class at{constructor({viewBox:Tt,scale:Rt,rotation:Ft,offsetX:jt=0,offsetY:Ht=0,dontFlip:te=!1}){this.viewBox=Tt,this.scale=Rt,this.rotation=Ft,this.offsetX=jt,this.offsetY=Ht;const Et=(Tt[2]+Tt[0])/2,$=(Tt[3]+Tt[1])/2;let k,pt,vt,At;switch(Ft%=360,Ft<0&&(Ft+=360),Ft){case 180:k=-1,pt=0,vt=0,At=1;break;case 90:k=0,pt=1,vt=1,At=0;break;case 270:k=0,pt=-1,vt=-1,At=0;break;case 0:k=1,pt=0,vt=0,At=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}te&&(vt=-vt,At=-At);let St,kt,xt,d;k===0?(St=Math.abs($-Tt[1])*Rt+jt,kt=Math.abs(Et-Tt[0])*Rt+Ht,xt=Math.abs(Tt[3]-Tt[1])*Rt,d=Math.abs(Tt[2]-Tt[0])*Rt):(St=Math.abs(Et-Tt[0])*Rt+jt,kt=Math.abs($-Tt[1])*Rt+Ht,xt=Math.abs(Tt[2]-Tt[0])*Rt,d=Math.abs(Tt[3]-Tt[1])*Rt),this.transform=[k*Rt,pt*Rt,vt*Rt,At*Rt,St-k*Rt*Et-vt*Rt*$,kt-pt*Rt*Et-At*Rt*$],this.width=xt,this.height=d}clone({scale:Tt=this.scale,rotation:Rt=this.rotation,offsetX:Ft=this.offsetX,offsetY:jt=this.offsetY,dontFlip:Ht=!1}={}){return new at({viewBox:this.viewBox.slice(),scale:Tt,rotation:Rt,offsetX:Ft,offsetY:jt,dontFlip:Ht})}convertToViewportPoint(Tt,Rt){return a.Util.applyTransform([Tt,Rt],this.transform)}convertToViewportRectangle(Tt){const Rt=a.Util.applyTransform([Tt[0],Tt[1]],this.transform),Ft=a.Util.applyTransform([Tt[2],Tt[3]],this.transform);return[Rt[0],Rt[1],Ft[0],Ft[1]]}convertToPdfPoint(Tt,Rt){return a.Util.applyInverseTransform([Tt,Rt],this.transform)}}i.PageViewport=at;class _ extends a.BaseException{constructor(Tt,Rt){super(Tt,"RenderingCancelledException"),this.type=Rt}}i.RenderingCancelledException=_;function s(Ot){const Tt=Ot.length;let Rt=0;for(;Rt<Tt&&Ot[Rt].trim()==="";)Rt++;return Ot.substring(Rt,Rt+5).toLowerCase()==="data:"}function f(Ot){return typeof Ot=="string"&&/\.pdf$/i.test(Ot)}function g(Ot){const Tt=Ot.indexOf("#"),Rt=Ot.indexOf("?"),Ft=Math.min(Tt>0?Tt:Ot.length,Rt>0?Rt:Ot.length);return Ot.substring(Ot.lastIndexOf("/",Ft)+1,Ft)}function rt(Ot,Tt="document.pdf"){if(typeof Ot!="string")return Tt;if(s(Ot))return(0,a.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Tt;const Rt=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Ft=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,jt=Rt.exec(Ot);let Ht=Ft.exec(jt[1])||Ft.exec(jt[2])||Ft.exec(jt[3]);if(Ht&&(Ht=Ht[0],Ht.includes("%")))try{Ht=Ft.exec(decodeURIComponent(Ht))[0]}catch{}return Ht||Tt}class it{constructor(){this.started=Object.create(null),this.times=[]}time(Tt){Tt in this.started&&(0,a.warn)(`Timer is already running for ${Tt}`),this.started[Tt]=Date.now()}timeEnd(Tt){Tt in this.started||(0,a.warn)(`Timer has not been started for ${Tt}`),this.times.push({name:Tt,start:this.started[Tt],end:Date.now()}),delete this.started[Tt]}toString(){const Tt=[];let Rt=0;for(const Ft of this.times){const jt=Ft.name;jt.length>Rt&&(Rt=jt.length)}for(const Ft of this.times){const jt=Ft.end-Ft.start;Tt.push(`${Ft.name.padEnd(Rt)} ${jt}ms
`)}return Tt.join("")}}i.StatTimer=it;function m(Ot,Tt){try{const{protocol:Rt}=Tt?new URL(Ot,Tt):new URL(Ot);return Rt==="http:"||Rt==="https:"}catch{return!1}}function o(Ot,Tt=!1){return new Promise((Rt,Ft)=>{const jt=document.createElement("script");jt.src=Ot,jt.onload=function(Ht){Tt&&jt.remove(),Rt(Ht)},jt.onerror=function(){Ft(new Error(`Cannot load script at: ${jt.src}`))},(document.head||document.documentElement).append(jt)})}function c(Ot){console.log("Deprecated API usage: "+Ot)}let tt;class ft{static toDateObject(Tt){if(!Tt||typeof Tt!="string")return null;tt||(tt=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const Rt=tt.exec(Tt);if(!Rt)return null;const Ft=parseInt(Rt[1],10);let jt=parseInt(Rt[2],10);jt=jt>=1&&jt<=12?jt-1:0;let Ht=parseInt(Rt[3],10);Ht=Ht>=1&&Ht<=31?Ht:1;let te=parseInt(Rt[4],10);te=te>=0&&te<=23?te:0;let Et=parseInt(Rt[5],10);Et=Et>=0&&Et<=59?Et:0;let $=parseInt(Rt[6],10);$=$>=0&&$<=59?$:0;const k=Rt[7]||"Z";let pt=parseInt(Rt[8],10);pt=pt>=0&&pt<=23?pt:0;let vt=parseInt(Rt[9],10)||0;return vt=vt>=0&&vt<=59?vt:0,k==="-"?(te+=pt,Et+=vt):k==="+"&&(te-=pt,Et-=vt),new Date(Date.UTC(Ft,jt,Ht,te,Et,$))}}i.PDFDateString=ft;function ot(Ot,{scale:Tt=1,rotation:Rt=0}){const{width:Ft,height:jt}=Ot.attributes.style,Ht=[0,0,parseInt(Ft),parseInt(jt)];return new at({viewBox:Ht,scale:Tt,rotation:Rt})}function et(Ot){if(Ot.startsWith("#")){const Tt=parseInt(Ot.slice(1),16);return[(Tt&16711680)>>16,(Tt&65280)>>8,Tt&255]}return Ot.startsWith("rgb(")?Ot.slice(4,-1).split(",").map(Tt=>parseInt(Tt)):Ot.startsWith("rgba(")?Ot.slice(5,-1).split(",").map(Tt=>parseInt(Tt)).slice(0,3):((0,a.warn)(`Not a valid color format: "${Ot}"`),[0,0,0])}function gt(Ot){const Tt=document.createElement("span");Tt.style.visibility="hidden",document.body.append(Tt);for(const Rt of Ot.keys()){Tt.style.color=Rt;const Ft=window.getComputedStyle(Tt).color;Ot.set(Rt,et(Ft))}Tt.remove()}function Lt(Ot){const{a:Tt,b:Rt,c:Ft,d:jt,e:Ht,f:te}=Ot.getTransform();return[Tt,Rt,Ft,jt,Ht,te]}function Bt(Ot){const{a:Tt,b:Rt,c:Ft,d:jt,e:Ht,f:te}=Ot.getTransform().invertSelf();return[Tt,Rt,Ft,jt,Ht,te]}},(h,i,Y)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BaseStandardFontDataFactory=i.BaseSVGFactory=i.BaseCanvasFactory=i.BaseCMapReaderFactory=void 0;var e=Y(1);class a{constructor(){this.constructor===a&&(0,e.unreachable)("Cannot initialize BaseCanvasFactory.")}create(j,lt){if(j<=0||lt<=0)throw new Error("Invalid canvas size");const _t=this._createCanvas(j,lt);return{canvas:_t,context:_t.getContext("2d")}}reset(j,lt,_t){if(!j.canvas)throw new Error("Canvas is not specified");if(lt<=0||_t<=0)throw new Error("Invalid canvas size");j.canvas.width=lt,j.canvas.height=_t}destroy(j){if(!j.canvas)throw new Error("Canvas is not specified");j.canvas.width=0,j.canvas.height=0,j.canvas=null,j.context=null}_createCanvas(j,lt){(0,e.unreachable)("Abstract method `_createCanvas` called.")}}i.BaseCanvasFactory=a;class ht{constructor({baseUrl:j=null,isCompressed:lt=!1}){this.constructor===ht&&(0,e.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=j,this.isCompressed=lt}async fetch({name:j}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!j)throw new Error("CMap name must be specified.");const lt=this.baseUrl+j+(this.isCompressed?".bcmap":""),_t=this.isCompressed?e.CMapCompressionType.BINARY:e.CMapCompressionType.NONE;return this._fetchData(lt,_t).catch(ut=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${lt}`)})}_fetchData(j,lt){(0,e.unreachable)("Abstract method `_fetchData` called.")}}i.BaseCMapReaderFactory=ht;class dt{constructor({baseUrl:j=null}){this.constructor===dt&&(0,e.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=j}async fetch({filename:j}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!j)throw new Error("Font filename must be specified.");const lt=`${this.baseUrl}${j}`;return this._fetchData(lt).catch(_t=>{throw new Error(`Unable to load font data at: ${lt}`)})}_fetchData(j){(0,e.unreachable)("Abstract method `_fetchData` called.")}}i.BaseStandardFontDataFactory=dt;class st{constructor(){this.constructor===st&&(0,e.unreachable)("Cannot initialize BaseSVGFactory.")}create(j,lt,_t=!1){if(j<=0||lt<=0)throw new Error("Invalid SVG dimensions");const ut=this._createSVG("svg:svg");return ut.setAttribute("version","1.1"),_t||(ut.setAttribute("width",`${j}px`),ut.setAttribute("height",`${lt}px`)),ut.setAttribute("preserveAspectRatio","none"),ut.setAttribute("viewBox",`0 0 ${j} ${lt}`),ut}createElement(j){if(typeof j!="string")throw new Error("Invalid SVG element type");return this._createSVG(j)}_createSVG(j){(0,e.unreachable)("Abstract method `_createSVG` called.")}}i.BaseSVGFactory=st},(h,i,Y)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.MurmurHash3_64=void 0;var e=Y(1);const a=3285377520,ht=4294901760,dt=65535;class st{constructor(j){this.h1=j?j&4294967295:a,this.h2=j?j&4294967295:a}update(j){let lt,_t;if(typeof j=="string"){lt=new Uint8Array(j.length*2),_t=0;for(let tt=0,ft=j.length;tt<ft;tt++){const ot=j.charCodeAt(tt);ot<=255?lt[_t++]=ot:(lt[_t++]=ot>>>8,lt[_t++]=ot&255)}}else if((0,e.isArrayBuffer)(j))lt=j.slice(),_t=lt.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const ut=_t>>2,at=_t-ut*4,_=new Uint32Array(lt.buffer,0,ut);let s=0,f=0,g=this.h1,rt=this.h2;const it=3432918353,m=461845907,o=it&dt,c=m&dt;for(let tt=0;tt<ut;tt++)tt&1?(s=_[tt],s=s*it&ht|s*o&dt,s=s<<15|s>>>17,s=s*m&ht|s*c&dt,g^=s,g=g<<13|g>>>19,g=g*5+3864292196):(f=_[tt],f=f*it&ht|f*o&dt,f=f<<15|f>>>17,f=f*m&ht|f*c&dt,rt^=f,rt=rt<<13|rt>>>19,rt=rt*5+3864292196);switch(s=0,at){case 3:s^=lt[ut*4+2]<<16;case 2:s^=lt[ut*4+1]<<8;case 1:s^=lt[ut*4],s=s*it&ht|s*o&dt,s=s<<15|s>>>17,s=s*m&ht|s*c&dt,ut&1?g^=s:rt^=s}this.h1=g,this.h2=rt}hexdigest(){let j=this.h1,lt=this.h2;j^=lt>>>1,j=j*3981806797&ht|j*36045&dt,lt=lt*4283543511&ht|((lt<<16|j>>>16)*2950163797&ht)>>>16,j^=lt>>>1,j=j*444984403&ht|j*60499&dt,lt=lt*3301882366&ht|((lt<<16|j>>>16)*3120437893&ht)>>>16,j^=lt>>>1;const _t=(j>>>0).toString(16),ut=(lt>>>0).toString(16);return _t.padStart(8,"0")+ut.padStart(8,"0")}}i.MurmurHash3_64=st},(h,i,Y)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FontLoader=i.FontFaceObject=void 0;var e=Y(1);class a{constructor({docId:b,onUnsupportedFeature:j,ownerDocument:lt=globalThis.document,styleElement:_t=null}){this.constructor===a&&(0,e.unreachable)("Cannot initialize BaseFontLoader."),this.docId=b,this._onUnsupportedFeature=j,this._document=lt,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(b){this.nativeFontFaces.push(b),this._document.fonts.add(b)}insertRule(b){let j=this.styleElement;j||(j=this.styleElement=this._document.createElement("style"),j.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(j));const lt=j.sheet;lt.insertRule(b,lt.cssRules.length)}clear(){for(const b of this.nativeFontFaces)this._document.fonts.delete(b);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(b){if(b.attached||b.missingFile)return;if(b.attached=!0,this.isFontLoadingAPISupported){const lt=b.createNativeFontFace();if(lt){this.addNativeFontFace(lt);try{await lt.loaded}catch(_t){throw this._onUnsupportedFeature({featureId:e.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,e.warn)(`Failed to load font '${lt.family}': '${_t}'.`),b.disableFontFace=!0,_t}}return}const j=b.createFontFaceRule();if(j){if(this.insertRule(j),this.isSyncFontLoadingSupported)return;await new Promise(lt=>{const _t=this._queueLoadingCallback(lt);this._prepareFontLoadEvent([j],[b],_t)})}}_queueLoadingCallback(b){(0,e.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var j;const b=!!((j=this._document)!=null&&j.fonts);return(0,e.shadow)(this,"isFontLoadingAPISupported",b)}get isSyncFontLoadingSupported(){(0,e.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,e.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(b,j,lt){(0,e.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let ht;i.FontLoader=ht,i.FontLoader=ht=class extends a{constructor(b){super(b),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let b=!1;if(typeof navigator>"u")b=!0;else{const j=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(j==null?void 0:j[1])>=14&&(b=!0)}return(0,e.shadow)(this,"isSyncFontLoadingSupported",b)}_queueLoadingCallback(b){function j(){for((0,e.assert)(!_t.done,"completeRequest() cannot be called twice."),_t.done=!0;lt.requests.length>0&&lt.requests[0].done;){const ut=lt.requests.shift();setTimeout(ut.callback,0)}}const lt=this.loadingContext,_t={id:`pdfjs-font-loading-${lt.nextRequestId++}`,done:!1,complete:j,callback:b};return lt.requests.push(_t),_t}get _loadTestFont(){const b=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,e.shadow)(this,"_loadTestFont",b())}_prepareFontLoadEvent(b,j,lt){function _t(Bt,Dt){return Bt.charCodeAt(Dt)<<24|Bt.charCodeAt(Dt+1)<<16|Bt.charCodeAt(Dt+2)<<8|Bt.charCodeAt(Dt+3)&255}function ut(Bt,Dt,Ot,Tt){const Rt=Bt.substring(0,Dt),Ft=Bt.substring(Dt+Ot);return Rt+Tt+Ft}let at,_;const s=this._document.createElement("canvas");s.width=1,s.height=1;const f=s.getContext("2d");let g=0;function rt(Bt,Dt){if(g++,g>30){(0,e.warn)("Load test font never loaded."),Dt();return}if(f.font="30px "+Bt,f.fillText(".",0,20),f.getImageData(0,0,1,1).data[3]>0){Dt();return}setTimeout(rt.bind(null,Bt,Dt))}const it=`lt${Date.now()}${this.loadTestFontId++}`;let m=this._loadTestFont;m=ut(m,976,it.length,it);const c=16,tt=1482184792;let ft=_t(m,c);for(at=0,_=it.length-3;at<_;at+=4)ft=ft-tt+_t(it,at)|0;at<it.length&&(ft=ft-tt+_t(it+"XXX",at)|0),m=ut(m,c,4,(0,e.string32)(ft));const ot=`url(data:font/opentype;base64,${btoa(m)});`,et=`@font-face {font-family:"${it}";src:${ot}}`;this.insertRule(et);const gt=[];for(const Bt of j)gt.push(Bt.loadedName);gt.push(it);const Lt=this._document.createElement("div");Lt.style.visibility="hidden",Lt.style.width=Lt.style.height="10px",Lt.style.position="absolute",Lt.style.top=Lt.style.left="0px";for(const Bt of gt){const Dt=this._document.createElement("span");Dt.textContent="Hi",Dt.style.fontFamily=Bt,Lt.append(Dt)}this._document.body.append(Lt),rt(it,()=>{Lt.remove(),lt.complete()})}};class dt{constructor(b,{isEvalSupported:j=!0,disableFontFace:lt=!1,ignoreErrors:_t=!1,onUnsupportedFeature:ut,fontRegistry:at=null}){this.compiledGlyphs=Object.create(null);for(const _ in b)this[_]=b[_];this.isEvalSupported=j!==!1,this.disableFontFace=lt===!0,this.ignoreErrors=_t===!0,this._onUnsupportedFeature=ut,this.fontRegistry=at}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let b;if(!this.cssFontInfo)b=new FontFace(this.loadedName,this.data,{});else{const j={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(j.style=`oblique ${this.cssFontInfo.italicAngle}deg`),b=new FontFace(this.cssFontInfo.fontFamily,this.data,j)}return this.fontRegistry&&this.fontRegistry.registerFont(this),b}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const b=(0,e.bytesToString)(this.data),j=`url(data:${this.mimetype};base64,${btoa(b)});`;let lt;if(!this.cssFontInfo)lt=`@font-face {font-family:"${this.loadedName}";src:${j}}`;else{let _t=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(_t+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),lt=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${_t}src:${j}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,j),lt}getPathGenerator(b,j){if(this.compiledGlyphs[j]!==void 0)return this.compiledGlyphs[j];let lt;try{lt=b.get(this.loadedName+"_path_"+j)}catch(_t){if(!this.ignoreErrors)throw _t;return this._onUnsupportedFeature({featureId:e.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,e.warn)(`getPathGenerator - ignoring character: "${_t}".`),this.compiledGlyphs[j]=function(ut,at){}}if(this.isEvalSupported&&e.FeatureTest.isEvalSupported){const _t=[];for(const ut of lt){const at=ut.args!==void 0?ut.args.join(","):"";_t.push("c.",ut.cmd,"(",at,`);
`)}return this.compiledGlyphs[j]=new Function("c","size",_t.join(""))}return this.compiledGlyphs[j]=function(_t,ut){for(const at of lt)at.cmd==="scale"&&(at.args=[ut,-ut]),_t[at.cmd].apply(_t,at.args)}}}i.FontFaceObject=dt},(h,i,Y)=>{var jt,ze;Object.defineProperty(i,"__esModule",{value:!0}),i.CanvasGraphics=void 0;var e=Y(8),a=Y(1),ht=Y(13),dt=Y(14),st=Y(3);const b=16,j=100,lt=4096,_t=15,ut=10,at=st.isNodeJS&&typeof Path2D>"u"?-1:1e3,_=16;function s(Et,$){if(Et._removeMirroring)throw new Error("Context is already forwarding operations.");Et.__originalSave=Et.save,Et.__originalRestore=Et.restore,Et.__originalRotate=Et.rotate,Et.__originalScale=Et.scale,Et.__originalTranslate=Et.translate,Et.__originalTransform=Et.transform,Et.__originalSetTransform=Et.setTransform,Et.__originalResetTransform=Et.resetTransform,Et.__originalClip=Et.clip,Et.__originalMoveTo=Et.moveTo,Et.__originalLineTo=Et.lineTo,Et.__originalBezierCurveTo=Et.bezierCurveTo,Et.__originalRect=Et.rect,Et.__originalClosePath=Et.closePath,Et.__originalBeginPath=Et.beginPath,Et._removeMirroring=()=>{Et.save=Et.__originalSave,Et.restore=Et.__originalRestore,Et.rotate=Et.__originalRotate,Et.scale=Et.__originalScale,Et.translate=Et.__originalTranslate,Et.transform=Et.__originalTransform,Et.setTransform=Et.__originalSetTransform,Et.resetTransform=Et.__originalResetTransform,Et.clip=Et.__originalClip,Et.moveTo=Et.__originalMoveTo,Et.lineTo=Et.__originalLineTo,Et.bezierCurveTo=Et.__originalBezierCurveTo,Et.rect=Et.__originalRect,Et.closePath=Et.__originalClosePath,Et.beginPath=Et.__originalBeginPath,delete Et._removeMirroring},Et.save=function(){$.save(),this.__originalSave()},Et.restore=function(){$.restore(),this.__originalRestore()},Et.translate=function(pt,vt){$.translate(pt,vt),this.__originalTranslate(pt,vt)},Et.scale=function(pt,vt){$.scale(pt,vt),this.__originalScale(pt,vt)},Et.transform=function(pt,vt,At,St,kt,xt){$.transform(pt,vt,At,St,kt,xt),this.__originalTransform(pt,vt,At,St,kt,xt)},Et.setTransform=function(pt,vt,At,St,kt,xt){$.setTransform(pt,vt,At,St,kt,xt),this.__originalSetTransform(pt,vt,At,St,kt,xt)},Et.resetTransform=function(){$.resetTransform(),this.__originalResetTransform()},Et.rotate=function(pt){$.rotate(pt),this.__originalRotate(pt)},Et.clip=function(pt){$.clip(pt),this.__originalClip(pt)},Et.moveTo=function(k,pt){$.moveTo(k,pt),this.__originalMoveTo(k,pt)},Et.lineTo=function(k,pt){$.lineTo(k,pt),this.__originalLineTo(k,pt)},Et.bezierCurveTo=function(k,pt,vt,At,St,kt){$.bezierCurveTo(k,pt,vt,At,St,kt),this.__originalBezierCurveTo(k,pt,vt,At,St,kt)},Et.rect=function(k,pt,vt,At){$.rect(k,pt,vt,At),this.__originalRect(k,pt,vt,At)},Et.closePath=function(){$.closePath(),this.__originalClosePath()},Et.beginPath=function(){$.beginPath(),this.__originalBeginPath()}}class f{constructor($){this.canvasFactory=$,this.cache=Object.create(null)}getCanvas($,k,pt){let vt;return this.cache[$]!==void 0?(vt=this.cache[$],this.canvasFactory.reset(vt,k,pt)):(vt=this.canvasFactory.create(k,pt),this.cache[$]=vt),vt}delete($){delete this.cache[$]}clear(){for(const $ in this.cache){const k=this.cache[$];this.canvasFactory.destroy(k),delete this.cache[$]}}}function g(Et,$,k,pt,vt,At,St,kt,xt,d){const[Z,nt,ct,yt,Pt,Ut]=(0,e.getCurrentTransform)(Et);if(nt===0&&ct===0){const $t=St*Z+Pt,Nt=Math.round($t),Gt=kt*yt+Ut,Yt=Math.round(Gt),bt=(St+xt)*Z+Pt,Xt=Math.abs(Math.round(bt)-Nt)||1,ee=(kt+d)*yt+Ut,re=Math.abs(Math.round(ee)-Yt)||1;return Et.setTransform(Math.sign(Z),0,0,Math.sign(yt),Nt,Yt),Et.drawImage($,k,pt,vt,At,0,0,Xt,re),Et.setTransform(Z,nt,ct,yt,Pt,Ut),[Xt,re]}if(Z===0&&yt===0){const $t=kt*ct+Pt,Nt=Math.round($t),Gt=St*nt+Ut,Yt=Math.round(Gt),bt=(kt+d)*ct+Pt,Xt=Math.abs(Math.round(bt)-Nt)||1,ee=(St+xt)*nt+Ut,re=Math.abs(Math.round(ee)-Yt)||1;return Et.setTransform(0,Math.sign(nt),Math.sign(ct),0,Nt,Yt),Et.drawImage($,k,pt,vt,At,0,0,re,Xt),Et.setTransform(Z,nt,ct,yt,Pt,Ut),[re,Xt]}Et.drawImage($,k,pt,vt,At,St,kt,xt,d);const Vt=Math.hypot(Z,nt),It=Math.hypot(ct,yt);return[Vt*xt,It*d]}function rt(Et){const{width:$,height:k}=Et;if($>at||k>at)return null;const pt=1e3,vt=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),At=$+1;let St=new Uint8Array(At*(k+1)),kt,xt,d;const Z=$+7&-8;let nt=new Uint8Array(Z*k),ct=0;for(const It of Et.data){let $t=128;for(;$t>0;)nt[ct++]=It&$t?0:255,$t>>=1}let yt=0;for(ct=0,nt[ct]!==0&&(St[0]=1,++yt),xt=1;xt<$;xt++)nt[ct]!==nt[ct+1]&&(St[xt]=nt[ct]?2:1,++yt),ct++;for(nt[ct]!==0&&(St[xt]=2,++yt),kt=1;kt<k;kt++){ct=kt*Z,d=kt*At,nt[ct-Z]!==nt[ct]&&(St[d]=nt[ct]?1:8,++yt);let It=(nt[ct]?4:0)+(nt[ct-Z]?8:0);for(xt=1;xt<$;xt++)It=(It>>2)+(nt[ct+1]?4:0)+(nt[ct-Z+1]?8:0),vt[It]&&(St[d+xt]=vt[It],++yt),ct++;if(nt[ct-Z]!==nt[ct]&&(St[d+xt]=nt[ct]?2:4,++yt),yt>pt)return null}for(ct=Z*(k-1),d=kt*At,nt[ct]!==0&&(St[d]=8,++yt),xt=1;xt<$;xt++)nt[ct]!==nt[ct+1]&&(St[d+xt]=nt[ct]?4:8,++yt),ct++;if(nt[ct]!==0&&(St[d+xt]=4,++yt),yt>pt)return null;const Pt=new Int32Array([0,At,-1,0,-At,0,0,0,1]),Ut=new Path2D;for(kt=0;yt&&kt<=k;kt++){let It=kt*At;const $t=It+$;for(;It<$t&&!St[It];)It++;if(It===$t)continue;Ut.moveTo(It%At,kt);const Nt=It;let Gt=St[It];do{const Yt=Pt[Gt];do It+=Yt;while(!St[It]);const bt=St[It];bt!==5&&bt!==10?(Gt=bt,St[It]=0):(Gt=bt&51*Gt>>4,St[It]&=Gt>>2|Gt<<2),Ut.lineTo(It%At,It/At|0),St[It]||--yt}while(Nt!==It);--kt}return nt=null,St=null,function(It){It.save(),It.scale(1/$,-1/k),It.translate(0,-k),It.fill(Ut),It.beginPath(),It.restore()}}class it{constructor($,k){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=a.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=a.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,$,k])}clone(){const $=Object.create(this);return $.clipBox=this.clipBox.slice(),$}setCurrentPoint($,k){this.x=$,this.y=k}updatePathMinMax($,k,pt){[k,pt]=a.Util.applyTransform([k,pt],$),this.minX=Math.min(this.minX,k),this.minY=Math.min(this.minY,pt),this.maxX=Math.max(this.maxX,k),this.maxY=Math.max(this.maxY,pt)}updateRectMinMax($,k){const pt=a.Util.applyTransform(k,$),vt=a.Util.applyTransform(k.slice(2),$);this.minX=Math.min(this.minX,pt[0],vt[0]),this.minY=Math.min(this.minY,pt[1],vt[1]),this.maxX=Math.max(this.maxX,pt[0],vt[0]),this.maxY=Math.max(this.maxY,pt[1],vt[1])}updateScalingPathMinMax($,k){a.Util.scaleMinMax($,k),this.minX=Math.min(this.minX,k[0]),this.maxX=Math.max(this.maxX,k[1]),this.minY=Math.min(this.minY,k[2]),this.maxY=Math.max(this.maxY,k[3])}updateCurvePathMinMax($,k,pt,vt,At,St,kt,xt,d,Z){const nt=a.Util.bezierBoundingBox(k,pt,vt,At,St,kt,xt,d);if(Z){Z[0]=Math.min(Z[0],nt[0],nt[2]),Z[1]=Math.max(Z[1],nt[0],nt[2]),Z[2]=Math.min(Z[2],nt[1],nt[3]),Z[3]=Math.max(Z[3],nt[1],nt[3]);return}this.updateRectMinMax($,nt)}getPathBoundingBox($=ht.PathType.FILL,k=null){const pt=[this.minX,this.minY,this.maxX,this.maxY];if($===ht.PathType.STROKE){k||(0,a.unreachable)("Stroke bounding box must include transform.");const vt=a.Util.singularValueDecompose2dScale(k),At=vt[0]*this.lineWidth/2,St=vt[1]*this.lineWidth/2;pt[0]-=At,pt[1]-=St,pt[2]+=At,pt[3]+=St}return pt}updateClipFromPath(){const $=a.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox($||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox($){this.clipBox=$,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox($=ht.PathType.FILL,k=null){return a.Util.intersect(this.clipBox,this.getPathBoundingBox($,k))}}function m(Et,$,k=null){if(typeof ImageData<"u"&&$ instanceof ImageData){Et.putImageData($,0,0);return}const pt=$.height,vt=$.width,At=pt%_,St=(pt-At)/_,kt=At===0?St:St+1,xt=Et.createImageData(vt,_);let d=0,Z;const nt=$.data,ct=xt.data;let yt,Pt,Ut,Vt,It,$t,Nt,Gt;if(k)switch(k.length){case 1:It=k[0],$t=k[0],Nt=k[0],Gt=k[0];break;case 4:It=k[0],$t=k[1],Nt=k[2],Gt=k[3];break}if($.kind===a.ImageKind.GRAYSCALE_1BPP){const Yt=nt.byteLength,bt=new Uint32Array(ct.buffer,0,ct.byteLength>>2),Xt=bt.length,ee=vt+7>>3;let re=4294967295,se=a.FeatureTest.isLittleEndian?4278190080:255;for(Gt&&Gt[0]===255&&Gt[255]===0&&([re,se]=[se,re]),yt=0;yt<kt;yt++){for(Ut=yt<St?_:At,Z=0,Pt=0;Pt<Ut;Pt++){const le=Yt-d;let pe=0;const de=le>ee?vt:le*8-7,we=de&-8;let ae=0,ge=0;for(;pe<we;pe+=8)ge=nt[d++],bt[Z++]=ge&128?re:se,bt[Z++]=ge&64?re:se,bt[Z++]=ge&32?re:se,bt[Z++]=ge&16?re:se,bt[Z++]=ge&8?re:se,bt[Z++]=ge&4?re:se,bt[Z++]=ge&2?re:se,bt[Z++]=ge&1?re:se;for(;pe<de;pe++)ae===0&&(ge=nt[d++],ae=128),bt[Z++]=ge&ae?re:se,ae>>=1}for(;Z<Xt;)bt[Z++]=0;Et.putImageData(xt,0,yt*_)}}else if($.kind===a.ImageKind.RGBA_32BPP){const Yt=!!(It||$t||Nt);for(Pt=0,Vt=vt*_*4,yt=0;yt<St;yt++){if(ct.set(nt.subarray(d,d+Vt)),d+=Vt,Yt)for(let bt=0;bt<Vt;bt+=4)It&&(ct[bt+0]=It[ct[bt+0]]),$t&&(ct[bt+1]=$t[ct[bt+1]]),Nt&&(ct[bt+2]=Nt[ct[bt+2]]);Et.putImageData(xt,0,Pt),Pt+=_}if(yt<kt){if(Vt=vt*At*4,ct.set(nt.subarray(d,d+Vt)),Yt)for(let bt=0;bt<Vt;bt+=4)It&&(ct[bt+0]=It[ct[bt+0]]),$t&&(ct[bt+1]=$t[ct[bt+1]]),Nt&&(ct[bt+2]=Nt[ct[bt+2]]);Et.putImageData(xt,0,Pt)}}else if($.kind===a.ImageKind.RGB_24BPP){const Yt=!!(It||$t||Nt);for(Ut=_,Vt=vt*Ut,yt=0;yt<kt;yt++){for(yt>=St&&(Ut=At,Vt=vt*Ut),Z=0,Pt=Vt;Pt--;)ct[Z++]=nt[d++],ct[Z++]=nt[d++],ct[Z++]=nt[d++],ct[Z++]=255;if(Yt)for(let bt=0;bt<Z;bt+=4)It&&(ct[bt+0]=It[ct[bt+0]]),$t&&(ct[bt+1]=$t[ct[bt+1]]),Nt&&(ct[bt+2]=Nt[ct[bt+2]]);Et.putImageData(xt,0,yt*_)}}else throw new Error(`bad image kind: ${$.kind}`)}function o(Et,$){if($.bitmap){Et.drawImage($.bitmap,0,0);return}const k=$.height,pt=$.width,vt=k%_,At=(k-vt)/_,St=vt===0?At:At+1,kt=Et.createImageData(pt,_);let xt=0;const d=$.data,Z=kt.data;for(let nt=0;nt<St;nt++){const ct=nt<At?_:vt;({srcPos:xt}=(0,dt.applyMaskImageData)({src:d,srcPos:xt,dest:Z,width:pt,height:ct})),Et.putImageData(kt,0,nt*_)}}function c(Et,$){const k=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let pt=0,vt=k.length;pt<vt;pt++){const At=k[pt];Et[At]!==void 0&&($[At]=Et[At])}Et.setLineDash!==void 0&&($.setLineDash(Et.getLineDash()),$.lineDashOffset=Et.lineDashOffset)}function tt(Et,$){Et.strokeStyle=Et.fillStyle=$||"#000000",Et.fillRule="nonzero",Et.globalAlpha=1,Et.lineWidth=1,Et.lineCap="butt",Et.lineJoin="miter",Et.miterLimit=10,Et.globalCompositeOperation="source-over",Et.font="10px sans-serif",Et.setLineDash!==void 0&&(Et.setLineDash([]),Et.lineDashOffset=0)}function ft(Et,$,k,pt){const vt=Et.length;for(let At=3;At<vt;At+=4){const St=Et[At];if(St===0)Et[At-3]=$,Et[At-2]=k,Et[At-1]=pt;else if(St<255){const kt=255-St;Et[At-3]=Et[At-3]*St+$*kt>>8,Et[At-2]=Et[At-2]*St+k*kt>>8,Et[At-1]=Et[At-1]*St+pt*kt>>8}}}function ot(Et,$,k){const pt=Et.length,vt=1/255;for(let At=3;At<pt;At+=4){const St=k?k[Et[At]]:Et[At];$[At]=$[At]*St*vt|0}}function et(Et,$,k){const pt=Et.length;for(let vt=3;vt<pt;vt+=4){const At=Et[vt-3]*77+Et[vt-2]*152+Et[vt-1]*28;$[vt]=k?$[vt]*k[At>>8]>>8:$[vt]*At>>16}}function gt(Et,$,k,pt,vt,At,St,kt,xt,d,Z){const nt=!!At,ct=nt?At[0]:0,yt=nt?At[1]:0,Pt=nt?At[2]:0;let Ut;vt==="Luminosity"?Ut=et:Ut=ot;const It=Math.min(pt,Math.ceil(1048576/k));for(let $t=0;$t<pt;$t+=It){const Nt=Math.min(It,pt-$t),Gt=Et.getImageData(kt-d,$t+(xt-Z),k,Nt),Yt=$.getImageData(kt,$t+xt,k,Nt);nt&&ft(Gt.data,ct,yt,Pt),Ut(Gt.data,Yt.data,St),$.putImageData(Yt,kt,$t+xt)}}function Lt(Et,$,k,pt){const vt=pt[0],At=pt[1],St=pt[2]-vt,kt=pt[3]-At;St===0||kt===0||(gt($.context,k,St,kt,$.subtype,$.backdrop,$.transferMap,vt,At,$.offsetX,$.offsetY),Et.save(),Et.globalAlpha=1,Et.globalCompositeOperation="source-over",Et.setTransform(1,0,0,1,0,0),Et.drawImage(k.canvas,0,0),Et.restore())}function Bt(Et,$){const k=a.Util.singularValueDecompose2dScale(Et);k[0]=Math.fround(k[0]),k[1]=Math.fround(k[1]);const pt=Math.fround((globalThis.devicePixelRatio||1)*e.PixelsPerInch.PDF_TO_CSS_UNITS);return $!==void 0?$:k[0]<=pt||k[1]<=pt}const Dt=["butt","round","square"],Ot=["miter","round","bevel"],Tt={},Rt={},te=class te{constructor($,k,pt,vt,At,St,kt,xt){qt(this,jt);this.ctx=$,this.current=new it(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=k,this.objs=pt,this.canvasFactory=vt,this.imageLayer=At,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=St,this.cachedCanvases=new f(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=kt,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(xt==null?void 0:xt.background)||null,this.foregroundColor=(xt==null?void 0:xt.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject($,k=null){return typeof $=="string"?$.startsWith("g_")?this.commonObjs.get($):this.objs.get($):k}beginDrawing({transform:$,viewport:k,transparency:pt=!1,background:vt=null}){const At=this.ctx.canvas.width,St=this.ctx.canvas.height,kt=vt||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const xt=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const d=this.backgroundColor=this.ctx.fillStyle;let Z=!0,nt=kt;if(this.ctx.fillStyle=kt,nt=this.ctx.fillStyle,Z=typeof nt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(nt),xt==="#000000"&&d==="#ffffff"||xt===d||!Z)this.foregroundColor=this.backgroundColor=null;else{const[ct,yt,Pt]=(0,e.getRGB)(nt),Ut=It=>(It/=255,It<=.03928?It/12.92:((It+.055)/1.055)**2.4),Vt=Math.round(.2126*Ut(ct)+.7152*Ut(yt)+.0722*Ut(Pt));this.selectColor=(It,$t,Nt)=>{const Gt=.2126*Ut(It)+.7152*Ut($t)+.0722*Ut(Nt);return Math.round(Gt)===Vt?d:xt}}}if(this.ctx.fillStyle=this.backgroundColor||kt,this.ctx.fillRect(0,0,At,St),this.ctx.restore(),pt){const xt=this.cachedCanvases.getCanvas("transparent",At,St);this.compositeCtx=this.ctx,this.transparentCanvas=xt.canvas,this.ctx=xt.context,this.ctx.save(),this.ctx.transform(...(0,e.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),tt(this.ctx,this.foregroundColor),$&&(this.ctx.transform(...$),this.outputScaleX=$[0],this.outputScaleY=$[0]),this.ctx.transform(...k.transform),this.viewportScale=k.scale,this.baseTransform=(0,e.getCurrentTransform)(this.ctx),this.imageLayer&&((0,e.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList($,k,pt,vt){const At=$.argsArray,St=$.fnArray;let kt=k||0;const xt=At.length;if(xt===kt)return kt;const d=xt-kt>ut&&typeof pt=="function",Z=d?Date.now()+_t:0;let nt=0;const ct=this.commonObjs,yt=this.objs;let Pt;for(;;){if(vt!==void 0&&kt===vt.nextBreakPoint)return vt.breakIt(kt,pt),kt;if(Pt=St[kt],Pt!==a.OPS.dependency)this[Pt].apply(this,At[kt]);else for(const Ut of At[kt]){const Vt=Ut.startsWith("g_")?ct:yt;if(!Vt.has(Ut))return Vt.get(Ut,pt),kt}if(kt++,kt===xt)return kt;if(d&&++nt>ut){if(Date.now()>Z)return pt(),kt;nt=0}}}endDrawing(){zt(this,jt,ze).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const $ of this._cachedBitmapsMap.values()){for(const k of $.values())typeof HTMLCanvasElement<"u"&&k instanceof HTMLCanvasElement&&(k.width=k.height=0);$.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage($,k){const pt=$.width,vt=$.height;let At=Math.max(Math.hypot(k[0],k[1]),1),St=Math.max(Math.hypot(k[2],k[3]),1),kt=pt,xt=vt,d="prescale1",Z,nt;for(;At>2&&kt>1||St>2&&xt>1;){let ct=kt,yt=xt;At>2&&kt>1&&(ct=Math.ceil(kt/2),At/=kt/ct),St>2&&xt>1&&(yt=Math.ceil(xt/2),St/=xt/yt),Z=this.cachedCanvases.getCanvas(d,ct,yt),nt=Z.context,nt.clearRect(0,0,ct,yt),nt.drawImage($,0,0,kt,xt,0,0,ct,yt),$=Z.canvas,kt=ct,xt=yt,d=d==="prescale1"?"prescale2":"prescale1"}return{img:$,paintWidth:kt,paintHeight:xt}}_createMaskCanvas($){const k=this.ctx,{width:pt,height:vt}=$,At=this.current.fillColor,St=this.current.patternFill,kt=(0,e.getCurrentTransform)(k);let xt,d,Z,nt;if(($.bitmap||$.data)&&$.count>1){const Xt=$.bitmap||$.data.buffer,ee=kt.slice(0,4);d=JSON.stringify(St?ee:[ee,At]),xt=this._cachedBitmapsMap.get(Xt),xt||(xt=new Map,this._cachedBitmapsMap.set(Xt,xt));const re=xt.get(d);if(re&&!St){const se=Math.round(Math.min(kt[0],kt[2])+kt[4]),le=Math.round(Math.min(kt[1],kt[3])+kt[5]);return{canvas:re,offsetX:se,offsetY:le}}Z=re}Z||(nt=this.cachedCanvases.getCanvas("maskCanvas",pt,vt),o(nt.context,$));let ct=a.Util.transform(kt,[1/pt,0,0,-1/vt,0,0]);ct=a.Util.transform(ct,[1,0,0,1,0,-vt]);const yt=a.Util.applyTransform([0,0],ct),Pt=a.Util.applyTransform([pt,vt],ct),Ut=a.Util.normalizeRect([yt[0],yt[1],Pt[0],Pt[1]]),Vt=Math.round(Ut[2]-Ut[0])||1,It=Math.round(Ut[3]-Ut[1])||1,$t=this.cachedCanvases.getCanvas("fillCanvas",Vt,It),Nt=$t.context,Gt=Math.min(yt[0],Pt[0]),Yt=Math.min(yt[1],Pt[1]);Nt.translate(-Gt,-Yt),Nt.transform(...ct),Z||(Z=this._scaleImage(nt.canvas,(0,e.getCurrentTransformInverse)(Nt)),Z=Z.img,xt&&St&&xt.set(d,Z)),Nt.imageSmoothingEnabled=Bt((0,e.getCurrentTransform)(Nt),$.interpolate),g(Nt,Z,0,0,Z.width,Z.height,0,0,pt,vt),Nt.globalCompositeOperation="source-in";const bt=a.Util.transform((0,e.getCurrentTransformInverse)(Nt),[1,0,0,1,-Gt,-Yt]);return Nt.fillStyle=St?At.getPattern(k,this,bt,ht.PathType.FILL):At,Nt.fillRect(0,0,pt,vt),xt&&!St&&(this.cachedCanvases.delete("fillCanvas"),xt.set(d,$t.canvas)),{canvas:$t.canvas,offsetX:Math.round(Gt),offsetY:Math.round(Yt)}}setLineWidth($){$!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=$,this.ctx.lineWidth=$}setLineCap($){this.ctx.lineCap=Dt[$]}setLineJoin($){this.ctx.lineJoin=Ot[$]}setMiterLimit($){this.ctx.miterLimit=$}setDash($,k){const pt=this.ctx;pt.setLineDash!==void 0&&(pt.setLineDash($),pt.lineDashOffset=k)}setRenderingIntent($){}setFlatness($){}setGState($){for(let k=0,pt=$.length;k<pt;k++){const vt=$[k],At=vt[0],St=vt[1];switch(At){case"LW":this.setLineWidth(St);break;case"LC":this.setLineCap(St);break;case"LJ":this.setLineJoin(St);break;case"ML":this.setMiterLimit(St);break;case"D":this.setDash(St[0],St[1]);break;case"RI":this.setRenderingIntent(St);break;case"FL":this.setFlatness(St);break;case"Font":this.setFont(St[0],St[1]);break;case"CA":this.current.strokeAlpha=vt[1];break;case"ca":this.current.fillAlpha=vt[1],this.ctx.globalAlpha=vt[1];break;case"BM":this.ctx.globalCompositeOperation=St;break;case"SMask":this.current.activeSMask=St?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=St}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const $=this.inSMaskMode;this.current.activeSMask&&!$?this.beginSMaskMode():!this.current.activeSMask&&$&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const $=this.ctx.canvas.width,k=this.ctx.canvas.height,pt="smaskGroupAt"+this.groupLevel,vt=this.cachedCanvases.getCanvas(pt,$,k);this.suspendedCtx=this.ctx,this.ctx=vt.context;const At=this.ctx;At.setTransform(...(0,e.getCurrentTransform)(this.suspendedCtx)),c(this.suspendedCtx,At),s(At,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),c(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose($){if(!this.current.activeSMask)return;$?($[0]=Math.floor($[0]),$[1]=Math.floor($[1]),$[2]=Math.ceil($[2]),$[3]=Math.ceil($[3])):$=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const k=this.current.activeSMask,pt=this.suspendedCtx;Lt(pt,k,this.ctx,$),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(c(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const $=this.current;this.stateStack.push($),this.current=$.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),c(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform($,k,pt,vt,At,St){this.ctx.transform($,k,pt,vt,At,St),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath($,k,pt){const vt=this.ctx,At=this.current;let St=At.x,kt=At.y,xt,d;const Z=(0,e.getCurrentTransform)(vt),nt=Z[0]===0&&Z[3]===0||Z[1]===0&&Z[2]===0,ct=nt?pt.slice(0):null;for(let yt=0,Pt=0,Ut=$.length;yt<Ut;yt++)switch($[yt]|0){case a.OPS.rectangle:St=k[Pt++],kt=k[Pt++];const Vt=k[Pt++],It=k[Pt++],$t=St+Vt,Nt=kt+It;vt.moveTo(St,kt),Vt===0||It===0?vt.lineTo($t,Nt):(vt.lineTo($t,kt),vt.lineTo($t,Nt),vt.lineTo(St,Nt)),nt||At.updateRectMinMax(Z,[St,kt,$t,Nt]),vt.closePath();break;case a.OPS.moveTo:St=k[Pt++],kt=k[Pt++],vt.moveTo(St,kt),nt||At.updatePathMinMax(Z,St,kt);break;case a.OPS.lineTo:St=k[Pt++],kt=k[Pt++],vt.lineTo(St,kt),nt||At.updatePathMinMax(Z,St,kt);break;case a.OPS.curveTo:xt=St,d=kt,St=k[Pt+4],kt=k[Pt+5],vt.bezierCurveTo(k[Pt],k[Pt+1],k[Pt+2],k[Pt+3],St,kt),At.updateCurvePathMinMax(Z,xt,d,k[Pt],k[Pt+1],k[Pt+2],k[Pt+3],St,kt,ct),Pt+=6;break;case a.OPS.curveTo2:xt=St,d=kt,vt.bezierCurveTo(St,kt,k[Pt],k[Pt+1],k[Pt+2],k[Pt+3]),At.updateCurvePathMinMax(Z,xt,d,St,kt,k[Pt],k[Pt+1],k[Pt+2],k[Pt+3],ct),St=k[Pt+2],kt=k[Pt+3],Pt+=4;break;case a.OPS.curveTo3:xt=St,d=kt,St=k[Pt+2],kt=k[Pt+3],vt.bezierCurveTo(k[Pt],k[Pt+1],St,kt,St,kt),At.updateCurvePathMinMax(Z,xt,d,k[Pt],k[Pt+1],St,kt,St,kt,ct),Pt+=4;break;case a.OPS.closePath:vt.closePath();break}nt&&At.updateScalingPathMinMax(Z,ct),At.setCurrentPoint(St,kt)}closePath(){this.ctx.closePath()}stroke($){$=typeof $<"u"?$:!0;const k=this.ctx,pt=this.current.strokeColor;k.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof pt=="object"&&(pt!=null&&pt.getPattern)?(k.save(),k.strokeStyle=pt.getPattern(k,this,(0,e.getCurrentTransformInverse)(k),ht.PathType.STROKE),this.rescaleAndStroke(!1),k.restore()):this.rescaleAndStroke(!0)),$&&this.consumePath(this.current.getClippedPathBoundingBox()),k.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill($){$=typeof $<"u"?$:!0;const k=this.ctx,pt=this.current.fillColor,vt=this.current.patternFill;let At=!1;vt&&(k.save(),k.fillStyle=pt.getPattern(k,this,(0,e.getCurrentTransformInverse)(k),ht.PathType.FILL),At=!0);const St=this.current.getClippedPathBoundingBox();this.contentVisible&&St!==null&&(this.pendingEOFill?(k.fill("evenodd"),this.pendingEOFill=!1):k.fill()),At&&k.restore(),$&&this.consumePath(St)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Tt}eoClip(){this.pendingClip=Rt}beginText(){this.current.textMatrix=a.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const $=this.pendingTextPaths,k=this.ctx;if($===void 0){k.beginPath();return}k.save(),k.beginPath();for(const pt of $)k.setTransform(...pt.transform),k.translate(pt.x,pt.y),pt.addToPath(k,pt.fontSize);k.restore(),k.clip(),k.beginPath(),delete this.pendingTextPaths}setCharSpacing($){this.current.charSpacing=$}setWordSpacing($){this.current.wordSpacing=$}setHScale($){this.current.textHScale=$/100}setLeading($){this.current.leading=-$}setFont($,k){const pt=this.commonObjs.get($),vt=this.current;if(!pt)throw new Error(`Can't find font for ${$}`);if(vt.fontMatrix=pt.fontMatrix||a.FONT_IDENTITY_MATRIX,(vt.fontMatrix[0]===0||vt.fontMatrix[3]===0)&&(0,a.warn)("Invalid font matrix for font "+$),k<0?(k=-k,vt.fontDirection=-1):vt.fontDirection=1,this.current.font=pt,this.current.fontSize=k,pt.isType3Font)return;const At=pt.loadedName||"sans-serif";let St="normal";pt.black?St="900":pt.bold&&(St="bold");const kt=pt.italic?"italic":"normal",xt=`"${At}", ${pt.fallbackName}`;let d=k;k<b?d=b:k>j&&(d=j),this.current.fontSizeScale=k/d,this.ctx.font=`${kt} ${St} ${d}px ${xt}`}setTextRenderingMode($){this.current.textRenderingMode=$}setTextRise($){this.current.textRise=$}moveText($,k){this.current.x=this.current.lineX+=$,this.current.y=this.current.lineY+=k}setLeadingMoveText($,k){this.setLeading(-k),this.moveText($,k)}setTextMatrix($,k,pt,vt,At,St){this.current.textMatrix=[$,k,pt,vt,At,St],this.current.textMatrixScale=Math.hypot($,k),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar($,k,pt,vt){const At=this.ctx,St=this.current,kt=St.font,xt=St.textRenderingMode,d=St.fontSize/St.fontSizeScale,Z=xt&a.TextRenderingMode.FILL_STROKE_MASK,nt=!!(xt&a.TextRenderingMode.ADD_TO_PATH_FLAG),ct=St.patternFill&&!kt.missingFile;let yt;(kt.disableFontFace||nt||ct)&&(yt=kt.getPathGenerator(this.commonObjs,$)),kt.disableFontFace||ct?(At.save(),At.translate(k,pt),At.beginPath(),yt(At,d),vt&&At.setTransform(...vt),(Z===a.TextRenderingMode.FILL||Z===a.TextRenderingMode.FILL_STROKE)&&At.fill(),(Z===a.TextRenderingMode.STROKE||Z===a.TextRenderingMode.FILL_STROKE)&&At.stroke(),At.restore()):((Z===a.TextRenderingMode.FILL||Z===a.TextRenderingMode.FILL_STROKE)&&At.fillText($,k,pt),(Z===a.TextRenderingMode.STROKE||Z===a.TextRenderingMode.FILL_STROKE)&&At.strokeText($,k,pt)),nt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,e.getCurrentTransform)(At),x:k,y:pt,fontSize:d,addToPath:yt})}get isFontSubpixelAAEnabled(){const{context:$}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);$.scale(1.5,1),$.fillText("I",0,10);const k=$.getImageData(0,0,10,10).data;let pt=!1;for(let vt=3;vt<k.length;vt+=4)if(k[vt]>0&&k[vt]<255){pt=!0;break}return(0,a.shadow)(this,"isFontSubpixelAAEnabled",pt)}showText($){const k=this.current,pt=k.font;if(pt.isType3Font)return this.showType3Text($);const vt=k.fontSize;if(vt===0)return;const At=this.ctx,St=k.fontSizeScale,kt=k.charSpacing,xt=k.wordSpacing,d=k.fontDirection,Z=k.textHScale*d,nt=$.length,ct=pt.vertical,yt=ct?1:-1,Pt=pt.defaultVMetrics,Ut=vt*k.fontMatrix[0],Vt=k.textRenderingMode===a.TextRenderingMode.FILL&&!pt.disableFontFace&&!k.patternFill;At.save(),At.transform(...k.textMatrix),At.translate(k.x,k.y+k.textRise),d>0?At.scale(Z,-1):At.scale(Z,1);let It;if(k.patternFill){At.save();const bt=k.fillColor.getPattern(At,this,(0,e.getCurrentTransformInverse)(At),ht.PathType.FILL);It=(0,e.getCurrentTransform)(At),At.restore(),At.fillStyle=bt}let $t=k.lineWidth;const Nt=k.textMatrixScale;if(Nt===0||$t===0){const bt=k.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;(bt===a.TextRenderingMode.STROKE||bt===a.TextRenderingMode.FILL_STROKE)&&($t=this.getSinglePixelWidth())}else $t/=Nt;St!==1&&(At.scale(St,St),$t/=St),At.lineWidth=$t;let Gt=0,Yt;for(Yt=0;Yt<nt;++Yt){const bt=$[Yt];if(typeof bt=="number"){Gt+=yt*bt*vt/1e3;continue}let Xt=!1;const ee=(bt.isSpace?xt:0)+kt,re=bt.fontChar,se=bt.accent;let le,pe,de=bt.width;if(ct){const ae=bt.vmetric||Pt,ge=-(bt.vmetric?ae[1]:de*.5)*Ut,Ie=ae[2]*Ut;de=ae?-ae[0]:de,le=ge/St,pe=(Gt+Ie)/St}else le=Gt/St,pe=0;if(pt.remeasure&&de>0){const ae=At.measureText(re).width*1e3/vt*St;if(de<ae&&this.isFontSubpixelAAEnabled){const ge=de/ae;Xt=!0,At.save(),At.scale(ge,1),le/=ge}else de!==ae&&(le+=(de-ae)/2e3*vt/St)}if(this.contentVisible&&(bt.isInFont||pt.missingFile)){if(Vt&&!se)At.fillText(re,le,pe);else if(this.paintChar(re,le,pe,It),se){const ae=le+vt*se.offset.x/St,ge=pe-vt*se.offset.y/St;this.paintChar(se.fontChar,ae,ge,It)}}let we;ct?we=de*Ut-ee*d:we=de*Ut+ee*d,Gt+=we,Xt&&At.restore()}ct?k.y-=Gt:k.x+=Gt*Z,At.restore(),this.compose()}showType3Text($){const k=this.ctx,pt=this.current,vt=pt.font,At=pt.fontSize,St=pt.fontDirection,kt=vt.vertical?1:-1,xt=pt.charSpacing,d=pt.wordSpacing,Z=pt.textHScale*St,nt=pt.fontMatrix||a.FONT_IDENTITY_MATRIX,ct=$.length,yt=pt.textRenderingMode===a.TextRenderingMode.INVISIBLE;let Pt,Ut,Vt,It;if(!(yt||At===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,k.save(),k.transform(...pt.textMatrix),k.translate(pt.x,pt.y),k.scale(Z,St),Pt=0;Pt<ct;++Pt){if(Ut=$[Pt],typeof Ut=="number"){It=kt*Ut*At/1e3,this.ctx.translate(It,0),pt.x+=It*Z;continue}const $t=(Ut.isSpace?d:0)+xt,Nt=vt.charProcOperatorList[Ut.operatorListId];if(!Nt){(0,a.warn)(`Type3 character "${Ut.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Ut,this.save(),k.scale(At,At),k.transform(...nt),this.executeOperatorList(Nt),this.restore()),Vt=a.Util.applyTransform([Ut.width,0],nt)[0]*At+$t,k.translate(Vt,0),pt.x+=Vt*Z}k.restore(),this.processingType3=null}}setCharWidth($,k){}setCharWidthAndBounds($,k,pt,vt,At,St){this.ctx.rect(pt,vt,At-pt,St-vt),this.ctx.clip(),this.endPath()}getColorN_Pattern($){let k;if($[0]==="TilingPattern"){const pt=$[1],vt=this.baseTransform||(0,e.getCurrentTransform)(this.ctx),At={createCanvasGraphics:St=>new te(St,this.commonObjs,this.objs,this.canvasFactory)};k=new ht.TilingPattern($,pt,this.ctx,At,vt)}else k=this._getPattern($[1],$[2]);return k}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor($,k,pt){var At;const vt=((At=this.selectColor)==null?void 0:At.call(this,$,k,pt))||a.Util.makeHexColor($,k,pt);this.ctx.strokeStyle=vt,this.current.strokeColor=vt}setFillRGBColor($,k,pt){var At;const vt=((At=this.selectColor)==null?void 0:At.call(this,$,k,pt))||a.Util.makeHexColor($,k,pt);this.ctx.fillStyle=vt,this.current.fillColor=vt,this.current.patternFill=!1}_getPattern($,k=null){let pt;return this.cachedPatterns.has($)?pt=this.cachedPatterns.get($):(pt=(0,ht.getShadingPattern)(this.objs.get($)),this.cachedPatterns.set($,pt)),k&&(pt.matrix=k),pt}shadingFill($){if(!this.contentVisible)return;const k=this.ctx;this.save();const pt=this._getPattern($);k.fillStyle=pt.getPattern(k,this,(0,e.getCurrentTransformInverse)(k),ht.PathType.SHADING);const vt=(0,e.getCurrentTransformInverse)(k);if(vt){const At=k.canvas,St=At.width,kt=At.height,xt=a.Util.applyTransform([0,0],vt),d=a.Util.applyTransform([0,kt],vt),Z=a.Util.applyTransform([St,0],vt),nt=a.Util.applyTransform([St,kt],vt),ct=Math.min(xt[0],d[0],Z[0],nt[0]),yt=Math.min(xt[1],d[1],Z[1],nt[1]),Pt=Math.max(xt[0],d[0],Z[0],nt[0]),Ut=Math.max(xt[1],d[1],Z[1],nt[1]);this.ctx.fillRect(ct,yt,Pt-ct,Ut-yt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,a.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,a.unreachable)("Should not call beginImageData")}paintFormXObjectBegin($,k){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray($)&&$.length===6&&this.transform(...$),this.baseTransform=(0,e.getCurrentTransform)(this.ctx),k)){const pt=k[2]-k[0],vt=k[3]-k[1];this.ctx.rect(k[0],k[1],pt,vt),this.current.updateRectMinMax((0,e.getCurrentTransform)(this.ctx),k),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup($){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const k=this.ctx;$.isolated||(0,a.info)("TODO: Support non-isolated groups."),$.knockout&&(0,a.warn)("Knockout groups not supported.");const pt=(0,e.getCurrentTransform)(k);if($.matrix&&k.transform(...$.matrix),!$.bbox)throw new Error("Bounding box is required.");let vt=a.Util.getAxialAlignedBoundingBox($.bbox,(0,e.getCurrentTransform)(k));const At=[0,0,k.canvas.width,k.canvas.height];vt=a.Util.intersect(vt,At)||[0,0,0,0];const St=Math.floor(vt[0]),kt=Math.floor(vt[1]);let xt=Math.max(Math.ceil(vt[2])-St,1),d=Math.max(Math.ceil(vt[3])-kt,1),Z=1,nt=1;xt>lt&&(Z=xt/lt,xt=lt),d>lt&&(nt=d/lt,d=lt),this.current.startNewPathAndClipBox([0,0,xt,d]);let ct="groupAt"+this.groupLevel;$.smask&&(ct+="_smask_"+this.smaskCounter++%2);const yt=this.cachedCanvases.getCanvas(ct,xt,d),Pt=yt.context;Pt.scale(1/Z,1/nt),Pt.translate(-St,-kt),Pt.transform(...pt),$.smask?this.smaskStack.push({canvas:yt.canvas,context:Pt,offsetX:St,offsetY:kt,scaleX:Z,scaleY:nt,subtype:$.smask.subtype,backdrop:$.smask.backdrop,transferMap:$.smask.transferMap||null,startTransformInverse:null}):(k.setTransform(1,0,0,1,0,0),k.translate(St,kt),k.scale(Z,nt),k.save()),c(k,Pt),this.ctx=Pt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(k),this.groupLevel++}endGroup($){if(!this.contentVisible)return;this.groupLevel--;const k=this.ctx,pt=this.groupStack.pop();if(this.ctx=pt,this.ctx.imageSmoothingEnabled=!1,$.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const vt=(0,e.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...vt);const At=a.Util.getAxialAlignedBoundingBox([0,0,k.canvas.width,k.canvas.height],vt);this.ctx.drawImage(k.canvas,0,0),this.ctx.restore(),this.compose(At)}}beginAnnotation($,k,pt,vt,At){if(zt(this,jt,ze).call(this),tt(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(k)&&k.length===4){const St=k[2]-k[0],kt=k[3]-k[1];if(At&&this.annotationCanvasMap){pt=pt.slice(),pt[4]-=k[0],pt[5]-=k[1],k=k.slice(),k[0]=k[1]=0,k[2]=St,k[3]=kt;const[xt,d]=a.Util.singularValueDecompose2dScale((0,e.getCurrentTransform)(this.ctx)),{viewportScale:Z}=this,nt=Math.ceil(St*this.outputScaleX*Z),ct=Math.ceil(kt*this.outputScaleY*Z);this.annotationCanvas=this.canvasFactory.create(nt,ct);const{canvas:yt,context:Pt}=this.annotationCanvas;this.annotationCanvasMap.set($,yt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Pt,this.ctx.setTransform(xt,0,0,-d,0,kt*d),tt(this.ctx,this.foregroundColor)}else tt(this.ctx,this.foregroundColor),this.ctx.rect(k[0],k[1],St,kt),this.ctx.clip(),this.endPath()}this.current=new it(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...pt),this.transform(...vt)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject($){if(!this.contentVisible)return;const k=$.count;$=this.getObject($.data,$),$.count=k;const pt=this.ctx,vt=this.processingType3;if(vt&&(vt.compiled===void 0&&(vt.compiled=rt($)),vt.compiled)){vt.compiled(pt);return}const At=this._createMaskCanvas($),St=At.canvas;pt.save(),pt.setTransform(1,0,0,1,0,0),pt.drawImage(St,At.offsetX,At.offsetY),pt.restore(),this.compose()}paintImageMaskXObjectRepeat($,k,pt=0,vt=0,At,St){if(!this.contentVisible)return;$=this.getObject($.data,$);const kt=this.ctx;kt.save();const xt=(0,e.getCurrentTransform)(kt);kt.transform(k,pt,vt,At,0,0);const d=this._createMaskCanvas($);kt.setTransform(1,0,0,1,0,0);for(let Z=0,nt=St.length;Z<nt;Z+=2){const ct=a.Util.transform(xt,[k,pt,vt,At,St[Z],St[Z+1]]),[yt,Pt]=a.Util.applyTransform([0,0],ct);kt.drawImage(d.canvas,yt,Pt)}kt.restore(),this.compose()}paintImageMaskXObjectGroup($){if(!this.contentVisible)return;const k=this.ctx,pt=this.current.fillColor,vt=this.current.patternFill;for(const At of $){const{data:St,width:kt,height:xt,transform:d}=At,Z=this.cachedCanvases.getCanvas("maskCanvas",kt,xt),nt=Z.context;nt.save();const ct=this.getObject(St,At);o(nt,ct),nt.globalCompositeOperation="source-in",nt.fillStyle=vt?pt.getPattern(nt,this,(0,e.getCurrentTransformInverse)(k),ht.PathType.FILL):pt,nt.fillRect(0,0,kt,xt),nt.restore(),k.save(),k.transform(...d),k.scale(1,-1),g(k,Z.canvas,0,0,kt,xt,0,-1,1,1),k.restore()}this.compose()}paintImageXObject($){if(!this.contentVisible)return;const k=this.getObject($);if(!k){(0,a.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(k)}paintImageXObjectRepeat($,k,pt,vt){if(!this.contentVisible)return;const At=this.getObject($);if(!At){(0,a.warn)("Dependent image isn't ready yet");return}const St=At.width,kt=At.height,xt=[];for(let d=0,Z=vt.length;d<Z;d+=2)xt.push({transform:[k,0,0,pt,vt[d],vt[d+1]],x:0,y:0,w:St,h:kt});this.paintInlineImageXObjectGroup(At,xt)}paintInlineImageXObject($){if(!this.contentVisible)return;const k=$.width,pt=$.height,vt=this.ctx;this.save(),vt.scale(1/k,-1/pt);let At;if(typeof HTMLElement=="function"&&$ instanceof HTMLElement||!$.data)At=$;else{const d=this.cachedCanvases.getCanvas("inlineImage",k,pt),Z=d.context;m(Z,$,this.current.transferMaps),At=d.canvas}const St=this._scaleImage(At,(0,e.getCurrentTransformInverse)(vt));vt.imageSmoothingEnabled=Bt((0,e.getCurrentTransform)(vt),$.interpolate);const[kt,xt]=g(vt,St.img,0,0,St.paintWidth,St.paintHeight,0,-pt,k,pt);if(this.imageLayer){const[d,Z]=a.Util.applyTransform([0,-pt],(0,e.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:$,left:d,top:Z,width:kt,height:xt})}this.compose(),this.restore()}paintInlineImageXObjectGroup($,k){if(!this.contentVisible)return;const pt=this.ctx,vt=$.width,At=$.height,St=this.cachedCanvases.getCanvas("inlineImage",vt,At),kt=St.context;m(kt,$,this.current.transferMaps);for(const xt of k){if(pt.save(),pt.transform(...xt.transform),pt.scale(1,-1),g(pt,St.canvas,xt.x,xt.y,xt.w,xt.h,0,-1,1,1),this.imageLayer){const[d,Z]=a.Util.applyTransform([xt.x,xt.y],(0,e.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:$,left:d,top:Z,width:vt,height:At})}pt.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint($){}markPointProps($,k){}beginMarkedContent($){this.markedContentStack.push({visible:!0})}beginMarkedContentProps($,k){$==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(k)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath($){const k=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose($);const pt=this.ctx;this.pendingClip&&(k||(this.pendingClip===Rt?pt.clip("evenodd"):pt.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),pt.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const $=(0,e.getCurrentTransform)(this.ctx);if($[1]===0&&$[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs($[0]),Math.abs($[3]));else{const k=Math.abs($[0]*$[3]-$[2]*$[1]),pt=Math.hypot($[0],$[2]),vt=Math.hypot($[1],$[3]);this._cachedGetSinglePixelWidth=Math.max(pt,vt)/k}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:$}=this.current,k=(0,e.getCurrentTransform)(this.ctx);let pt,vt;if(k[1]===0&&k[2]===0){const At=Math.abs(k[0]),St=Math.abs(k[3]);if($===0)pt=1/At,vt=1/St;else{const kt=At*$,xt=St*$;pt=kt<1?1/kt:1,vt=xt<1?1/xt:1}}else{const At=Math.abs(k[0]*k[3]-k[2]*k[1]),St=Math.hypot(k[0],k[1]),kt=Math.hypot(k[2],k[3]);if($===0)pt=kt/At,vt=St/At;else{const xt=$*At;pt=kt>xt?kt/xt:1,vt=St>xt?St/xt:1}}this._cachedScaleForStroking=[pt,vt]}return this._cachedScaleForStroking}rescaleAndStroke($){const{ctx:k}=this,{lineWidth:pt}=this.current,[vt,At]=this.getScaleForStroking();if(k.lineWidth=pt||1,vt===1&&At===1){k.stroke();return}let St,kt,xt;$&&(St=(0,e.getCurrentTransform)(k),kt=k.getLineDash().slice(),xt=k.lineDashOffset),k.scale(vt,At);const d=Math.max(vt,At);k.setLineDash(k.getLineDash().map(Z=>Z/d)),k.lineDashOffset/=d,k.stroke(),$&&(k.setTransform(...St),k.setLineDash(kt),k.lineDashOffset=xt)}isContentVisible(){for(let $=this.markedContentStack.length-1;$>=0;$--)if(!this.markedContentStack[$].visible)return!1;return!0}};jt=new WeakSet,ze=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)};let Ft=te;i.CanvasGraphics=Ft;for(const Et in a.OPS)Ft.prototype[Et]!==void 0&&(Ft.prototype[a.OPS[Et]]=Ft.prototype[Et])},(h,i,Y)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TilingPattern=i.PathType=void 0,i.getShadingPattern=_;var e=Y(1),a=Y(8),ht=Y(3);const dt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};i.PathType=dt;function st(g,rt){if(!rt||ht.isNodeJS)return;const it=rt[2]-rt[0],m=rt[3]-rt[1],o=new Path2D;o.rect(rt[0],rt[1],it,m),g.clip(o)}class b{constructor(){this.constructor===b&&(0,e.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,e.unreachable)("Abstract method `getPattern` called.")}}class j extends b{constructor(rt){super(),this._type=rt[1],this._bbox=rt[2],this._colorStops=rt[3],this._p0=rt[4],this._p1=rt[5],this._r0=rt[6],this._r1=rt[7],this.matrix=null}_createGradient(rt){let it;this._type==="axial"?it=rt.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(it=rt.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const m of this._colorStops)it.addColorStop(m[0],m[1]);return it}getPattern(rt,it,m,o){let c;if(o===dt.STROKE||o===dt.FILL){const tt=it.current.getClippedPathBoundingBox(o,(0,a.getCurrentTransform)(rt))||[0,0,0,0],ft=Math.ceil(tt[2]-tt[0])||1,ot=Math.ceil(tt[3]-tt[1])||1,et=it.cachedCanvases.getCanvas("pattern",ft,ot,!0),gt=et.context;gt.clearRect(0,0,gt.canvas.width,gt.canvas.height),gt.beginPath(),gt.rect(0,0,gt.canvas.width,gt.canvas.height),gt.translate(-tt[0],-tt[1]),m=e.Util.transform(m,[1,0,0,1,tt[0],tt[1]]),gt.transform(...it.baseTransform),this.matrix&&gt.transform(...this.matrix),st(gt,this._bbox),gt.fillStyle=this._createGradient(gt),gt.fill(),c=rt.createPattern(et.canvas,"no-repeat");const Lt=new DOMMatrix(m);try{c.setTransform(Lt)}catch(Bt){(0,e.warn)(`RadialAxialShadingPattern.getPattern: "${Bt==null?void 0:Bt.message}".`)}}else st(rt,this._bbox),c=this._createGradient(rt);return c}}function lt(g,rt,it,m,o,c,tt,ft){const ot=rt.coords,et=rt.colors,gt=g.data,Lt=g.width*4;let Bt;ot[it+1]>ot[m+1]&&(Bt=it,it=m,m=Bt,Bt=c,c=tt,tt=Bt),ot[m+1]>ot[o+1]&&(Bt=m,m=o,o=Bt,Bt=tt,tt=ft,ft=Bt),ot[it+1]>ot[m+1]&&(Bt=it,it=m,m=Bt,Bt=c,c=tt,tt=Bt);const Dt=(ot[it]+rt.offsetX)*rt.scaleX,Ot=(ot[it+1]+rt.offsetY)*rt.scaleY,Tt=(ot[m]+rt.offsetX)*rt.scaleX,Rt=(ot[m+1]+rt.offsetY)*rt.scaleY,Ft=(ot[o]+rt.offsetX)*rt.scaleX,jt=(ot[o+1]+rt.offsetY)*rt.scaleY;if(Ot>=jt)return;const Ht=et[c],te=et[c+1],Et=et[c+2],$=et[tt],k=et[tt+1],pt=et[tt+2],vt=et[ft],At=et[ft+1],St=et[ft+2],kt=Math.round(Ot),xt=Math.round(jt);let d,Z,nt,ct,yt,Pt,Ut,Vt;for(let It=kt;It<=xt;It++){if(It<Rt){let bt;It<Ot?bt=0:bt=(Ot-It)/(Ot-Rt),d=Dt-(Dt-Tt)*bt,Z=Ht-(Ht-$)*bt,nt=te-(te-k)*bt,ct=Et-(Et-pt)*bt}else{let bt;It>jt?bt=1:Rt===jt?bt=0:bt=(Rt-It)/(Rt-jt),d=Tt-(Tt-Ft)*bt,Z=$-($-vt)*bt,nt=k-(k-At)*bt,ct=pt-(pt-St)*bt}let $t;It<Ot?$t=0:It>jt?$t=1:$t=(Ot-It)/(Ot-jt),yt=Dt-(Dt-Ft)*$t,Pt=Ht-(Ht-vt)*$t,Ut=te-(te-At)*$t,Vt=Et-(Et-St)*$t;const Nt=Math.round(Math.min(d,yt)),Gt=Math.round(Math.max(d,yt));let Yt=Lt*It+Nt*4;for(let bt=Nt;bt<=Gt;bt++)$t=(d-bt)/(d-yt),$t<0?$t=0:$t>1&&($t=1),gt[Yt++]=Z-(Z-Pt)*$t|0,gt[Yt++]=nt-(nt-Ut)*$t|0,gt[Yt++]=ct-(ct-Vt)*$t|0,gt[Yt++]=255}}function _t(g,rt,it){const m=rt.coords,o=rt.colors;let c,tt;switch(rt.type){case"lattice":const ft=rt.verticesPerRow,ot=Math.floor(m.length/ft)-1,et=ft-1;for(c=0;c<ot;c++){let gt=c*ft;for(let Lt=0;Lt<et;Lt++,gt++)lt(g,it,m[gt],m[gt+1],m[gt+ft],o[gt],o[gt+1],o[gt+ft]),lt(g,it,m[gt+ft+1],m[gt+1],m[gt+ft],o[gt+ft+1],o[gt+1],o[gt+ft])}break;case"triangles":for(c=0,tt=m.length;c<tt;c+=3)lt(g,it,m[c],m[c+1],m[c+2],o[c],o[c+1],o[c+2]);break;default:throw new Error("illegal figure")}}class ut extends b{constructor(rt){super(),this._coords=rt[2],this._colors=rt[3],this._figures=rt[4],this._bounds=rt[5],this._bbox=rt[7],this._background=rt[8],this.matrix=null}_createMeshCanvas(rt,it,m){const ft=Math.floor(this._bounds[0]),ot=Math.floor(this._bounds[1]),et=Math.ceil(this._bounds[2])-ft,gt=Math.ceil(this._bounds[3])-ot,Lt=Math.min(Math.ceil(Math.abs(et*rt[0]*1.1)),3e3),Bt=Math.min(Math.ceil(Math.abs(gt*rt[1]*1.1)),3e3),Dt=et/Lt,Ot=gt/Bt,Tt={coords:this._coords,colors:this._colors,offsetX:-ft,offsetY:-ot,scaleX:1/Dt,scaleY:1/Ot},Rt=Lt+2*2,Ft=Bt+2*2,jt=m.getCanvas("mesh",Rt,Ft,!1),Ht=jt.context,te=Ht.createImageData(Lt,Bt);if(it){const $=te.data;for(let k=0,pt=$.length;k<pt;k+=4)$[k]=it[0],$[k+1]=it[1],$[k+2]=it[2],$[k+3]=255}for(const $ of this._figures)_t(te,$,Tt);return Ht.putImageData(te,2,2),{canvas:jt.canvas,offsetX:ft-2*Dt,offsetY:ot-2*Ot,scaleX:Dt,scaleY:Ot}}getPattern(rt,it,m,o){st(rt,this._bbox);let c;if(o===dt.SHADING)c=e.Util.singularValueDecompose2dScale((0,a.getCurrentTransform)(rt));else if(c=e.Util.singularValueDecompose2dScale(it.baseTransform),this.matrix){const ft=e.Util.singularValueDecompose2dScale(this.matrix);c=[c[0]*ft[0],c[1]*ft[1]]}const tt=this._createMeshCanvas(c,o===dt.SHADING?null:this._background,it.cachedCanvases);return o!==dt.SHADING&&(rt.setTransform(...it.baseTransform),this.matrix&&rt.transform(...this.matrix)),rt.translate(tt.offsetX,tt.offsetY),rt.scale(tt.scaleX,tt.scaleY),rt.createPattern(tt.canvas,"no-repeat")}}class at extends b{getPattern(){return"hotpink"}}function _(g){switch(g[0]){case"RadialAxial":return new j(g);case"Mesh":return new ut(g);case"Dummy":return new at}throw new Error(`Unknown IR type: ${g[0]}`)}const s={COLORED:1,UNCOLORED:2};class f{static get MAX_PATTERN_SIZE(){return(0,e.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(rt,it,m,o,c){this.operatorList=rt[2],this.matrix=rt[3]||[1,0,0,1,0,0],this.bbox=rt[4],this.xstep=rt[5],this.ystep=rt[6],this.paintType=rt[7],this.tilingType=rt[8],this.color=it,this.ctx=m,this.canvasGraphicsFactory=o,this.baseTransform=c}createPatternCanvas(rt){const it=this.operatorList,m=this.bbox,o=this.xstep,c=this.ystep,tt=this.paintType,ft=this.tilingType,ot=this.color,et=this.canvasGraphicsFactory;(0,e.info)("TilingType: "+ft);const gt=m[0],Lt=m[1],Bt=m[2],Dt=m[3],Ot=e.Util.singularValueDecompose2dScale(this.matrix),Tt=e.Util.singularValueDecompose2dScale(this.baseTransform),Rt=[Ot[0]*Tt[0],Ot[1]*Tt[1]],Ft=this.getSizeAndScale(o,this.ctx.canvas.width,Rt[0]),jt=this.getSizeAndScale(c,this.ctx.canvas.height,Rt[1]),Ht=rt.cachedCanvases.getCanvas("pattern",Ft.size,jt.size,!0),te=Ht.context,Et=et.createCanvasGraphics(te);Et.groupLevel=rt.groupLevel,this.setFillAndStrokeStyleToContext(Et,tt,ot);let $=gt,k=Lt,pt=Bt,vt=Dt;return gt<0&&($=0,pt+=Math.abs(gt)),Lt<0&&(k=0,vt+=Math.abs(Lt)),te.translate(-(Ft.scale*$),-(jt.scale*k)),Et.transform(Ft.scale,0,0,jt.scale,0,0),te.save(),this.clipBbox(Et,$,k,pt,vt),Et.baseTransform=(0,a.getCurrentTransform)(Et.ctx),Et.executeOperatorList(it),Et.endDrawing(),{canvas:Ht.canvas,scaleX:Ft.scale,scaleY:jt.scale,offsetX:$,offsetY:k}}getSizeAndScale(rt,it,m){rt=Math.abs(rt);const o=Math.max(f.MAX_PATTERN_SIZE,it);let c=Math.ceil(rt*m);return c>=o?c=o:m=c/rt,{scale:m,size:c}}clipBbox(rt,it,m,o,c){const tt=o-it,ft=c-m;rt.ctx.rect(it,m,tt,ft),rt.current.updateRectMinMax((0,a.getCurrentTransform)(rt.ctx),[it,m,o,c]),rt.clip(),rt.endPath()}setFillAndStrokeStyleToContext(rt,it,m){const o=rt.ctx,c=rt.current;switch(it){case s.COLORED:const tt=this.ctx;o.fillStyle=tt.fillStyle,o.strokeStyle=tt.strokeStyle,c.fillColor=tt.fillStyle,c.strokeColor=tt.strokeStyle;break;case s.UNCOLORED:const ft=e.Util.makeHexColor(m[0],m[1],m[2]);o.fillStyle=ft,o.strokeStyle=ft,c.fillColor=ft,c.strokeColor=ft;break;default:throw new e.FormatError(`Unsupported paint type: ${it}`)}}getPattern(rt,it,m,o){let c=m;o!==dt.SHADING&&(c=e.Util.transform(c,it.baseTransform),this.matrix&&(c=e.Util.transform(c,this.matrix)));const tt=this.createPatternCanvas(it);let ft=new DOMMatrix(c);ft=ft.translate(tt.offsetX,tt.offsetY),ft=ft.scale(1/tt.scaleX,1/tt.scaleY);const ot=rt.createPattern(tt.canvas,"repeat");try{ot.setTransform(ft)}catch(et){(0,e.warn)(`TilingPattern.getPattern: "${et==null?void 0:et.message}".`)}return ot}}i.TilingPattern=f},(h,i,Y)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.applyMaskImageData=a;var e=Y(1);function a({src:ht,srcPos:dt=0,dest:st,destPos:b=0,width:j,height:lt,inverseDecode:_t=!1}){const ut=e.FeatureTest.isLittleEndian?4278190080:255,[at,_]=_t?[0,ut]:[ut,0],s=j>>3,f=j&7,g=ht.length;st=new Uint32Array(st.buffer);for(let rt=0;rt<lt;rt++){for(const m=dt+s;dt<m;dt++){const o=dt<g?ht[dt]:255;st[b++]=o&128?_:at,st[b++]=o&64?_:at,st[b++]=o&32?_:at,st[b++]=o&16?_:at,st[b++]=o&8?_:at,st[b++]=o&4?_:at,st[b++]=o&2?_:at,st[b++]=o&1?_:at}if(f===0)continue;const it=dt<g?ht[dt++]:255;for(let m=0;m<f;m++)st[b++]=it&1<<7-m?_:at}return{srcPos:dt,destPos:b}}},(h,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GlobalWorkerOptions=void 0;const Y=Object.create(null);i.GlobalWorkerOptions=Y,Y.workerPort=Y.workerPort===void 0?null:Y.workerPort,Y.workerSrc=Y.workerSrc===void 0?"":Y.workerSrc},(h,i,Y)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.MessageHandler=void 0;var e=Y(1);const a={UNKNOWN:0,DATA:1,ERROR:2},ht={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function dt(b){switch(b instanceof Error||typeof b=="object"&&b!==null||(0,e.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),b.name){case"AbortException":return new e.AbortException(b.message);case"MissingPDFException":return new e.MissingPDFException(b.message);case"PasswordException":return new e.PasswordException(b.message,b.code);case"UnexpectedResponseException":return new e.UnexpectedResponseException(b.message,b.status);case"UnknownErrorException":return new e.UnknownErrorException(b.message,b.details);default:return new e.UnknownErrorException(b.message,b.toString())}}class st{constructor(j,lt,_t){this.sourceName=j,this.targetName=lt,this.comObj=_t,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=ut=>{const at=ut.data;if(at.targetName!==this.sourceName)return;if(at.stream){this._processStreamMessage(at);return}if(at.callback){const s=at.callbackId,f=this.callbackCapabilities[s];if(!f)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],at.callback===a.DATA)f.resolve(at.data);else if(at.callback===a.ERROR)f.reject(dt(at.reason));else throw new Error("Unexpected callback case");return}const _=this.actionHandler[at.action];if(!_)throw new Error(`Unknown action from worker: ${at.action}`);if(at.callbackId){const s=this.sourceName,f=at.sourceName;new Promise(function(g){g(_(at.data))}).then(function(g){_t.postMessage({sourceName:s,targetName:f,callback:a.DATA,callbackId:at.callbackId,data:g})},function(g){_t.postMessage({sourceName:s,targetName:f,callback:a.ERROR,callbackId:at.callbackId,reason:dt(g)})});return}if(at.streamId){this._createStreamSink(at);return}_(at.data)},_t.addEventListener("message",this._onComObjOnMessage)}on(j,lt){const _t=this.actionHandler;if(_t[j])throw new Error(`There is already an actionName called "${j}"`);_t[j]=lt}send(j,lt,_t){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:j,data:lt},_t)}sendWithPromise(j,lt,_t){const ut=this.callbackId++,at=(0,e.createPromiseCapability)();this.callbackCapabilities[ut]=at;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:j,callbackId:ut,data:lt},_t)}catch(_){at.reject(_)}return at.promise}sendWithStream(j,lt,_t,ut){const at=this.streamId++,_=this.sourceName,s=this.targetName,f=this.comObj;return new ReadableStream({start:g=>{const rt=(0,e.createPromiseCapability)();return this.streamControllers[at]={controller:g,startCall:rt,pullCall:null,cancelCall:null,isClosed:!1},f.postMessage({sourceName:_,targetName:s,action:j,streamId:at,data:lt,desiredSize:g.desiredSize},ut),rt.promise},pull:g=>{const rt=(0,e.createPromiseCapability)();return this.streamControllers[at].pullCall=rt,f.postMessage({sourceName:_,targetName:s,stream:ht.PULL,streamId:at,desiredSize:g.desiredSize}),rt.promise},cancel:g=>{(0,e.assert)(g instanceof Error,"cancel must have a valid reason");const rt=(0,e.createPromiseCapability)();return this.streamControllers[at].cancelCall=rt,this.streamControllers[at].isClosed=!0,f.postMessage({sourceName:_,targetName:s,stream:ht.CANCEL,streamId:at,reason:dt(g)}),rt.promise}},_t)}_createStreamSink(j){const lt=j.streamId,_t=this.sourceName,ut=j.sourceName,at=this.comObj,_=this,s=this.actionHandler[j.action],f={enqueue(g,rt=1,it){if(this.isCancelled)return;const m=this.desiredSize;this.desiredSize-=rt,m>0&&this.desiredSize<=0&&(this.sinkCapability=(0,e.createPromiseCapability)(),this.ready=this.sinkCapability.promise),at.postMessage({sourceName:_t,targetName:ut,stream:ht.ENQUEUE,streamId:lt,chunk:g},it)},close(){this.isCancelled||(this.isCancelled=!0,at.postMessage({sourceName:_t,targetName:ut,stream:ht.CLOSE,streamId:lt}),delete _.streamSinks[lt])},error(g){(0,e.assert)(g instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,at.postMessage({sourceName:_t,targetName:ut,stream:ht.ERROR,streamId:lt,reason:dt(g)}))},sinkCapability:(0,e.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:j.desiredSize,ready:null};f.sinkCapability.resolve(),f.ready=f.sinkCapability.promise,this.streamSinks[lt]=f,new Promise(function(g){g(s(j.data,f))}).then(function(){at.postMessage({sourceName:_t,targetName:ut,stream:ht.START_COMPLETE,streamId:lt,success:!0})},function(g){at.postMessage({sourceName:_t,targetName:ut,stream:ht.START_COMPLETE,streamId:lt,reason:dt(g)})})}_processStreamMessage(j){const lt=j.streamId,_t=this.sourceName,ut=j.sourceName,at=this.comObj,_=this.streamControllers[lt],s=this.streamSinks[lt];switch(j.stream){case ht.START_COMPLETE:j.success?_.startCall.resolve():_.startCall.reject(dt(j.reason));break;case ht.PULL_COMPLETE:j.success?_.pullCall.resolve():_.pullCall.reject(dt(j.reason));break;case ht.PULL:if(!s){at.postMessage({sourceName:_t,targetName:ut,stream:ht.PULL_COMPLETE,streamId:lt,success:!0});break}s.desiredSize<=0&&j.desiredSize>0&&s.sinkCapability.resolve(),s.desiredSize=j.desiredSize,new Promise(function(f){f(s.onPull&&s.onPull())}).then(function(){at.postMessage({sourceName:_t,targetName:ut,stream:ht.PULL_COMPLETE,streamId:lt,success:!0})},function(f){at.postMessage({sourceName:_t,targetName:ut,stream:ht.PULL_COMPLETE,streamId:lt,reason:dt(f)})});break;case ht.ENQUEUE:if((0,e.assert)(_,"enqueue should have stream controller"),_.isClosed)break;_.controller.enqueue(j.chunk);break;case ht.CLOSE:if((0,e.assert)(_,"close should have stream controller"),_.isClosed)break;_.isClosed=!0,_.controller.close(),this._deleteStreamController(_,lt);break;case ht.ERROR:(0,e.assert)(_,"error should have stream controller"),_.controller.error(dt(j.reason)),this._deleteStreamController(_,lt);break;case ht.CANCEL_COMPLETE:j.success?_.cancelCall.resolve():_.cancelCall.reject(dt(j.reason)),this._deleteStreamController(_,lt);break;case ht.CANCEL:if(!s)break;new Promise(function(f){f(s.onCancel&&s.onCancel(dt(j.reason)))}).then(function(){at.postMessage({sourceName:_t,targetName:ut,stream:ht.CANCEL_COMPLETE,streamId:lt,success:!0})},function(f){at.postMessage({sourceName:_t,targetName:ut,stream:ht.CANCEL_COMPLETE,streamId:lt,reason:dt(f)})}),s.sinkCapability.reject(dt(j.reason)),s.isCancelled=!0,delete this.streamSinks[lt];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(j,lt){await Promise.allSettled([j.startCall&&j.startCall.promise,j.pullCall&&j.pullCall.promise,j.cancelCall&&j.cancelCall.promise]),delete this.streamControllers[lt]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}i.MessageHandler=st},(h,i,Y)=>{var ht,dt;Object.defineProperty(i,"__esModule",{value:!0}),i.Metadata=void 0;var e=Y(1);class a{constructor({parsedData:b,rawData:j}){qt(this,ht,void 0);qt(this,dt,void 0);Qt(this,ht,b),Qt(this,dt,j)}getRaw(){return mt(this,dt)}get(b){return mt(this,ht).get(b)??null}getAll(){return(0,e.objectFromMap)(mt(this,ht))}has(b){return mt(this,ht).has(b)}}ht=new WeakMap,dt=new WeakMap,i.Metadata=a},(h,i,Y)=>{var st,b,j,lt,_t,ut,Ve;Object.defineProperty(i,"__esModule",{value:!0}),i.OptionalContentConfig=void 0;var e=Y(1);const a=Symbol("INTERNAL");class ht{constructor(s,f){qt(this,st,!0);this.name=s,this.intent=f}get visible(){return mt(this,st)}_setVisible(s,f){s!==a&&(0,e.unreachable)("Internal method `_setVisible` called."),Qt(this,st,f)}}st=new WeakMap;class dt{constructor(s){qt(this,ut);qt(this,b,!0);qt(this,j,new Map);qt(this,lt,null);qt(this,_t,null);if(this.name=null,this.creator=null,s!==null){this.name=s.name,this.creator=s.creator,Qt(this,_t,s.order);for(const f of s.groups)mt(this,j).set(f.id,new ht(f.name,f.intent));if(s.baseState==="OFF")for(const f of mt(this,j).values())f._setVisible(a,!1);for(const f of s.on)mt(this,j).get(f)._setVisible(a,!0);for(const f of s.off)mt(this,j).get(f)._setVisible(a,!1);Qt(this,lt,new Map);for(const[f,g]of mt(this,j))mt(this,lt).set(f,g.visible)}}isVisible(s){if(mt(this,j).size===0)return!0;if(!s)return(0,e.warn)("Optional content group not defined."),!0;if(s.type==="OCG")return mt(this,j).has(s.id)?mt(this,j).get(s.id).visible:((0,e.warn)(`Optional content group not found: ${s.id}`),!0);if(s.type==="OCMD"){if(s.expression)return zt(this,ut,Ve).call(this,s.expression);if(!s.policy||s.policy==="AnyOn"){for(const f of s.ids){if(!mt(this,j).has(f))return(0,e.warn)(`Optional content group not found: ${f}`),!0;if(mt(this,j).get(f).visible)return!0}return!1}else if(s.policy==="AllOn"){for(const f of s.ids){if(!mt(this,j).has(f))return(0,e.warn)(`Optional content group not found: ${f}`),!0;if(!mt(this,j).get(f).visible)return!1}return!0}else if(s.policy==="AnyOff"){for(const f of s.ids){if(!mt(this,j).has(f))return(0,e.warn)(`Optional content group not found: ${f}`),!0;if(!mt(this,j).get(f).visible)return!0}return!1}else if(s.policy==="AllOff"){for(const f of s.ids){if(!mt(this,j).has(f))return(0,e.warn)(`Optional content group not found: ${f}`),!0;if(mt(this,j).get(f).visible)return!1}return!0}return(0,e.warn)(`Unknown optional content policy ${s.policy}.`),!0}return(0,e.warn)(`Unknown group type ${s.type}.`),!0}setVisibility(s,f=!0){if(!mt(this,j).has(s)){(0,e.warn)(`Optional content group not found: ${s}`);return}mt(this,j).get(s)._setVisible(a,!!f),Qt(this,b,null)}get hasInitialVisibility(){if(mt(this,b)!==null)return mt(this,b);for(const[s,f]of mt(this,j)){const g=mt(this,lt).get(s);if(f.visible!==g)return Qt(this,b,!1)}return Qt(this,b,!0)}getOrder(){return mt(this,j).size?mt(this,_t)?mt(this,_t).slice():[...mt(this,j).keys()]:null}getGroups(){return mt(this,j).size>0?(0,e.objectFromMap)(mt(this,j)):null}getGroup(s){return mt(this,j).get(s)||null}}b=new WeakMap,j=new WeakMap,lt=new WeakMap,_t=new WeakMap,ut=new WeakSet,Ve=function(s){const f=s.length;if(f<2)return!0;const g=s[0];for(let rt=1;rt<f;rt++){const it=s[rt];let m;if(Array.isArray(it))m=zt(this,ut,Ve).call(this,it);else if(mt(this,j).has(it))m=mt(this,j).get(it).visible;else return(0,e.warn)(`Optional content group not found: ${it}`),!0;switch(g){case"And":if(!m)return!1;break;case"Or":if(m)return!0;break;case"Not":return!m;default:return!0}}return g==="And"},i.OptionalContentConfig=dt},(h,i,Y)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFDataTransportStream=void 0;var e=Y(1),a=Y(8);class ht{constructor(j,lt){(0,e.assert)(lt,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=j.progressiveDone||!1,this._contentDispositionFilename=j.contentDispositionFilename||null;const _t=j.initialData;if((_t==null?void 0:_t.length)>0){const ut=new Uint8Array(_t).buffer;this._queuedChunks.push(ut)}this._pdfDataRangeTransport=lt,this._isStreamingSupported=!j.disableStream,this._isRangeSupported=!j.disableRange,this._contentLength=j.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((ut,at)=>{this._onReceiveData({begin:ut,chunk:at})}),this._pdfDataRangeTransport.addProgressListener((ut,at)=>{this._onProgress({loaded:ut,total:at})}),this._pdfDataRangeTransport.addProgressiveReadListener(ut=>{this._onReceiveData({chunk:ut})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(j){const lt=new Uint8Array(j.chunk).buffer;if(j.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(lt):this._queuedChunks.push(lt);else{const _t=this._rangeReaders.some(function(ut){return ut._begin!==j.begin?!1:(ut._enqueue(lt),!0)});(0,e.assert)(_t,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var j;return((j=this._fullRequestReader)==null?void 0:j._loaded)??0}_onProgress(j){if(j.total===void 0){const lt=this._rangeReaders[0];lt!=null&&lt.onProgress&&lt.onProgress({loaded:j.loaded})}else{const lt=this._fullRequestReader;lt!=null&&lt.onProgress&&lt.onProgress({loaded:j.loaded,total:j.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(j){const lt=this._rangeReaders.indexOf(j);lt>=0&&this._rangeReaders.splice(lt,1)}getFullReader(){(0,e.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const j=this._queuedChunks;return this._queuedChunks=null,new dt(this,j,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(j,lt){if(lt<=this._progressiveDataLength)return null;const _t=new st(this,j,lt);return this._pdfDataRangeTransport.requestDataRange(j,lt),this._rangeReaders.push(_t),_t}cancelAllRequests(j){this._fullRequestReader&&this._fullRequestReader.cancel(j);for(const lt of this._rangeReaders.slice(0))lt.cancel(j);this._pdfDataRangeTransport.abort()}}i.PDFDataTransportStream=ht;class dt{constructor(j,lt,_t=!1,ut=null){this._stream=j,this._done=_t||!1,this._filename=(0,a.isPdfFile)(ut)?ut:null,this._queuedChunks=lt||[],this._loaded=0;for(const at of this._queuedChunks)this._loaded+=at.byteLength;this._requests=[],this._headersReady=Promise.resolve(),j._fullRequestReader=this,this.onProgress=null}_enqueue(j){this._done||(this._requests.length>0?this._requests.shift().resolve({value:j,done:!1}):this._queuedChunks.push(j),this._loaded+=j.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const j=(0,e.createPromiseCapability)();return this._requests.push(j),j.promise}cancel(j){this._done=!0;for(const lt of this._requests)lt.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class st{constructor(j,lt,_t){this._stream=j,this._begin=lt,this._end=_t,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(j){if(!this._done){if(this._requests.length===0)this._queuedChunk=j;else{this._requests.shift().resolve({value:j,done:!1});for(const _t of this._requests)_t.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const lt=this._queuedChunk;return this._queuedChunk=null,{value:lt,done:!1}}if(this._done)return{value:void 0,done:!0};const j=(0,e.createPromiseCapability)();return this._requests.push(j),j.promise}cancel(j){this._done=!0;for(const lt of this._requests)lt.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(h,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.XfaText=void 0;class Y{static textContent(a){const ht=[],dt={items:ht,styles:Object.create(null)};function st(b){var _t;if(!b)return;let j=null;const lt=b.name;if(lt==="#text")j=b.value;else if(Y.shouldBuildText(lt))(_t=b==null?void 0:b.attributes)!=null&&_t.textContent?j=b.attributes.textContent:b.value&&(j=b.value);else return;if(j!==null&&ht.push({str:j}),!!b.children)for(const ut of b.children)st(ut)}return st(a),dt}static shouldBuildText(a){return!(a==="textarea"||a==="input"||a==="option"||a==="select")}}i.XfaText=Y},(h,i,Y)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.NodeStandardFontDataFactory=i.NodeCanvasFactory=i.NodeCMapReaderFactory=void 0;var e=Y(9);const a=function(b){return new Promise((j,lt)=>{require$$5.readFile(b,(ut,at)=>{if(ut||!at){lt(new Error(ut));return}j(new Uint8Array(at))})})};class ht extends e.BaseCanvasFactory{_createCanvas(j,lt){return require$$5.createCanvas(j,lt)}}i.NodeCanvasFactory=ht;class dt extends e.BaseCMapReaderFactory{_fetchData(j,lt){return a(j).then(_t=>({cMapData:_t,compressionType:lt}))}}i.NodeCMapReaderFactory=dt;class st extends e.BaseStandardFontDataFactory{_fetchData(j){return a(j)}}i.NodeStandardFontDataFactory=st},(h,i,Y)=>{var b,j,lt,_t,ut,at,_,s,f,Xe,rt,dn,m,Ye,c,pn;Object.defineProperty(i,"__esModule",{value:!0}),i.AnnotationEditorLayer=void 0;var e=Y(7),a=Y(1),ht=Y(23),dt=Y(24);const ft=class ft{constructor(et){qt(this,f);qt(this,rt);qt(this,m);qt(this,c);qt(this,b,void 0);qt(this,j,!1);qt(this,lt,this.pointerup.bind(this));qt(this,_t,this.pointerdown.bind(this));qt(this,ut,new Map);qt(this,at,!1);qt(this,_,!1);qt(this,s,void 0);ft._initialized||(ft._initialized=!0,ht.FreeTextEditor.initialize(et.l10n),dt.InkEditor.initialize(et.l10n),et.uiManager.registerEditorTypes([ht.FreeTextEditor,dt.InkEditor])),Qt(this,s,et.uiManager),this.annotationStorage=et.annotationStorage,this.pageIndex=et.pageIndex,this.div=et.div,Qt(this,b,et.accessibilityManager),mt(this,s).addLayer(this)}updateToolbar(et){mt(this,s).updateToolbar(et)}updateMode(et=mt(this,s).getMode()){zt(this,c,pn).call(this),et===a.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),mt(this,s).unselectAll()}addInkEditorIfNeeded(et){if(!et&&mt(this,s).getMode()!==a.AnnotationEditorType.INK)return;if(!et){for(const Lt of mt(this,ut).values())if(Lt.isEmpty()){Lt.setInBackground();return}}zt(this,m,Ye).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(et){mt(this,s).setEditingState(et)}addCommands(et){mt(this,s).addCommands(et)}enable(){this.div.style.pointerEvents="auto";for(const et of mt(this,ut).values())et.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const et of mt(this,ut).values())et.disableEditing()}setActiveEditor(et){mt(this,s).getActive()!==et&&mt(this,s).setActiveEditor(et)}enableClick(){this.div.addEventListener("pointerdown",mt(this,_t)),this.div.addEventListener("pointerup",mt(this,lt))}disableClick(){this.div.removeEventListener("pointerdown",mt(this,_t)),this.div.removeEventListener("pointerup",mt(this,lt))}attach(et){mt(this,ut).set(et.id,et)}detach(et){var gt;mt(this,ut).delete(et.id),(gt=mt(this,b))==null||gt.removePointerInTextLayer(et.contentDiv)}remove(et){mt(this,s).removeEditor(et),this.detach(et),this.annotationStorage.remove(et.id),et.div.style.display="none",setTimeout(()=>{et.div.style.display="",et.div.remove(),et.isAttachedToDOM=!1,document.activeElement===document.body&&mt(this,s).focusMainContainer()},0),mt(this,_)||this.addInkEditorIfNeeded(!1)}add(et){if(zt(this,f,Xe).call(this,et),mt(this,s).addEditor(et),this.attach(et),!et.isAttachedToDOM){const gt=et.render();this.div.append(gt),et.isAttachedToDOM=!0}this.moveEditorInDOM(et),et.onceAdded(),this.addToAnnotationStorage(et)}moveEditorInDOM(et){var gt;(gt=mt(this,b))==null||gt.moveElementInDOM(this.div,et.div,et.contentDiv,!0)}addToAnnotationStorage(et){!et.isEmpty()&&!this.annotationStorage.has(et.id)&&this.annotationStorage.setValue(et.id,et)}addOrRebuild(et){et.needsToBeRebuilt()?et.rebuild():this.add(et)}addANewEditor(et){const gt=()=>{this.addOrRebuild(et)},Lt=()=>{et.remove()};this.addCommands({cmd:gt,undo:Lt,mustExec:!0})}addUndoableEditor(et){const gt=()=>{this.addOrRebuild(et)},Lt=()=>{et.remove()};this.addCommands({cmd:gt,undo:Lt,mustExec:!1})}getNextId(){return mt(this,s).getId()}deserialize(et){switch(et.annotationType){case a.AnnotationEditorType.FREETEXT:return ht.FreeTextEditor.deserialize(et,this);case a.AnnotationEditorType.INK:return dt.InkEditor.deserialize(et,this)}return null}setSelected(et){mt(this,s).setSelected(et)}toggleSelected(et){mt(this,s).toggleSelected(et)}isSelected(et){return mt(this,s).isSelected(et)}unselect(et){mt(this,s).unselect(et)}pointerup(et){const gt=e.KeyboardManager.platform.isMac;if(!(et.button!==0||et.ctrlKey&&gt)&&et.target===this.div&&mt(this,at)){if(Qt(this,at,!1),!mt(this,j)){Qt(this,j,!0);return}zt(this,m,Ye).call(this,et)}}pointerdown(et){const gt=e.KeyboardManager.platform.isMac;if(et.button!==0||et.ctrlKey&&gt||et.target!==this.div)return;Qt(this,at,!0);const Lt=mt(this,s).getActive();Qt(this,j,!Lt||Lt.isEmpty())}drop(et){const gt=et.dataTransfer.getData("text/plain"),Lt=mt(this,s).getEditor(gt);if(!Lt)return;et.preventDefault(),et.dataTransfer.dropEffect="move",zt(this,f,Xe).call(this,Lt);const Bt=this.div.getBoundingClientRect(),Dt=et.clientX-Bt.x,Ot=et.clientY-Bt.y;Lt.translate(Dt-Lt.startX,Ot-Lt.startY),this.moveEditorInDOM(Lt),Lt.div.focus()}dragover(et){et.preventDefault()}destroy(){var et,gt;((et=mt(this,s).getActive())==null?void 0:et.parent)===this&&mt(this,s).setActiveEditor(null);for(const Lt of mt(this,ut).values())(gt=mt(this,b))==null||gt.removePointerInTextLayer(Lt.contentDiv),Lt.isAttachedToDOM=!1,Lt.div.remove(),Lt.parent=null;this.div=null,mt(this,ut).clear(),mt(this,s).removeLayer(this)}render(et){this.viewport=et.viewport,(0,e.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const gt of mt(this,s).getEditors(this.pageIndex))this.add(gt);this.updateMode()}update(et){this.viewport=et.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[et,gt,Lt,Bt]=this.viewport.viewBox,Dt=Lt-et,Ot=Bt-gt;return[Dt,Ot]}get viewportBaseDimensions(){const{width:et,height:gt,rotation:Lt}=this.viewport;return Lt%180===0?[et,gt]:[gt,et]}setDimensions(){const{width:et,height:gt,rotation:Lt}=this.viewport,Bt=Lt%180!==0,Dt=Math.floor(et)+"px",Ot=Math.floor(gt)+"px";this.div.style.width=Bt?Ot:Dt,this.div.style.height=Bt?Dt:Ot,this.div.setAttribute("data-main-rotation",Lt)}};b=new WeakMap,j=new WeakMap,lt=new WeakMap,_t=new WeakMap,ut=new WeakMap,at=new WeakMap,_=new WeakMap,s=new WeakMap,f=new WeakSet,Xe=function(et){var gt;et.parent!==this&&(this.attach(et),et.pageIndex=this.pageIndex,(gt=et.parent)==null||gt.detach(et),et.parent=this,et.div&&et.isAttachedToDOM&&(et.div.remove(),this.div.append(et.div)))},rt=new WeakSet,dn=function(et){switch(mt(this,s).getMode()){case a.AnnotationEditorType.FREETEXT:return new ht.FreeTextEditor(et);case a.AnnotationEditorType.INK:return new dt.InkEditor(et)}return null},m=new WeakSet,Ye=function(et){const gt=this.getNextId(),Lt=zt(this,rt,dn).call(this,{parent:this,id:gt,x:et.offsetX,y:et.offsetY});return Lt&&this.add(Lt),Lt},c=new WeakSet,pn=function(){Qt(this,_,!0);for(const et of mt(this,ut).values())et.isEmpty()&&et.remove();Qt(this,_,!1)},fe(ft,"_initialized",!1);let st=ft;i.AnnotationEditorLayer=st},(h,i,Y)=>{var st,b,j,lt,_t,ut,at,_,fn,f,gn,rt,mn,m,Ke;Object.defineProperty(i,"__esModule",{value:!0}),i.FreeTextEditor=void 0;var e=Y(1),a=Y(7),ht=Y(6);const c=class c extends ht.AnnotationEditor{constructor(ot){super({...ot,name:"freeTextEditor"});qt(this,_);qt(this,f);qt(this,rt);qt(this,m);qt(this,st,this.editorDivBlur.bind(this));qt(this,b,this.editorDivFocus.bind(this));qt(this,j,this.editorDivKeydown.bind(this));qt(this,lt,void 0);qt(this,_t,"");qt(this,ut,!1);qt(this,at,void 0);Qt(this,lt,ot.color||c._defaultColor||ht.AnnotationEditor._defaultLineColor),Qt(this,at,ot.fontSize||c._defaultFontSize)}static initialize(ot){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(gt=>[gt,ot.get(gt)]));const et=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(et.getPropertyValue("--freetext-padding"))}static updateDefaultParams(ot,et){switch(ot){case e.AnnotationEditorParamsType.FREETEXT_SIZE:c._defaultFontSize=et;break;case e.AnnotationEditorParamsType.FREETEXT_COLOR:c._defaultColor=et;break}}updateParams(ot,et){switch(ot){case e.AnnotationEditorParamsType.FREETEXT_SIZE:zt(this,_,fn).call(this,et);break;case e.AnnotationEditorParamsType.FREETEXT_COLOR:zt(this,f,gn).call(this,et);break}}static get defaultPropertiesToUpdate(){return[[e.AnnotationEditorParamsType.FREETEXT_SIZE,c._defaultFontSize],[e.AnnotationEditorParamsType.FREETEXT_COLOR,c._defaultColor||ht.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[e.AnnotationEditorParamsType.FREETEXT_SIZE,mt(this,at)],[e.AnnotationEditorParamsType.FREETEXT_COLOR,mt(this,lt)]]}getInitialTranslation(){return[-c._internalPadding*this.parent.scaleFactor,-(c._internalPadding+mt(this,at))*this.parent.scaleFactor]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(e.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",mt(this,j)),this.editorDiv.addEventListener("focus",mt(this,b)),this.editorDiv.addEventListener("blur",mt(this,st)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",mt(this,j)),this.editorDiv.removeEventListener("focus",mt(this,b)),this.editorDiv.removeEventListener("blur",mt(this,st)),this.div.focus(),this.isEditing=!1)}focusin(ot){super.focusin(ot),ot.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}commit(){super.commit(),mt(this,ut)||(Qt(this,ut,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),Qt(this,_t,zt(this,rt,mn).call(this).trimEnd()),zt(this,m,Ke).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(ot){this.enableEditMode(),this.editorDiv.focus()}keydown(ot){ot.target===this.div&&ot.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(ot){c._keyboardManager.exec(this,ot)}editorDivFocus(ot){this.isEditing=!0}editorDivBlur(ot){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let ot,et;this.width&&(ot=this.x,et=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),c._l10nPromise.get("editor_free_text_aria_label").then(Lt=>{var Bt;return(Bt=this.editorDiv)==null?void 0:Bt.setAttribute("aria-label",Lt)}),c._l10nPromise.get("free_text_default_content").then(Lt=>{var Bt;return(Bt=this.editorDiv)==null?void 0:Bt.setAttribute("default-content",Lt)}),this.editorDiv.contentEditable=!0;const{style:gt}=this.editorDiv;if(gt.fontSize=`calc(${mt(this,at)}px * var(--scale-factor))`,gt.color=mt(this,lt),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,a.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Lt,Bt]=this.parent.viewportBaseDimensions;this.setAt(ot*Lt,et*Bt,this.width*Lt,this.height*Bt);for(const Dt of mt(this,_t).split(`
`)){const Ot=document.createElement("div");Ot.append(Dt?document.createTextNode(Dt):document.createElement("br")),this.editorDiv.append(Ot)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(ot,et){const gt=super.deserialize(ot,et);return Qt(gt,at,ot.fontSize),Qt(gt,lt,e.Util.makeHexColor(...ot.color)),Qt(gt,_t,ot.value),gt}serialize(){if(this.isEmpty())return null;const ot=c._internalPadding*this.parent.scaleFactor,et=this.getRect(ot,ot),gt=ht.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:e.AnnotationEditorType.FREETEXT,color:gt,fontSize:mt(this,at),value:mt(this,_t),pageIndex:this.parent.pageIndex,rect:et,rotation:this.rotation}}};st=new WeakMap,b=new WeakMap,j=new WeakMap,lt=new WeakMap,_t=new WeakMap,ut=new WeakMap,at=new WeakMap,_=new WeakSet,fn=function(ot){const et=Lt=>{this.editorDiv.style.fontSize=`calc(${Lt}px * var(--scale-factor))`,this.translate(0,-(Lt-mt(this,at))*this.parent.scaleFactor),Qt(this,at,Lt),zt(this,m,Ke).call(this)},gt=mt(this,at);this.parent.addCommands({cmd:()=>{et(ot)},undo:()=>{et(gt)},mustExec:!0,type:e.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},f=new WeakSet,gn=function(ot){const et=mt(this,lt);this.parent.addCommands({cmd:()=>{Qt(this,lt,ot),this.editorDiv.style.color=ot},undo:()=>{Qt(this,lt,et),this.editorDiv.style.color=et},mustExec:!0,type:e.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},rt=new WeakSet,mn=function(){const ot=this.editorDiv.getElementsByTagName("div");if(ot.length===0)return this.editorDiv.innerText;const et=[];for(let gt=0,Lt=ot.length;gt<Lt;gt++){const Dt=ot[gt].firstChild;(Dt==null?void 0:Dt.nodeName)==="#text"?et.push(Dt.data):et.push("")}return et.join(`
`)},m=new WeakSet,Ke=function(){const[ot,et]=this.parent.viewportBaseDimensions,gt=this.div.getBoundingClientRect();this.width=gt.width/ot,this.height=gt.height/et},fe(c,"_freeTextDefaultContent",""),fe(c,"_l10nPromise"),fe(c,"_internalPadding",0),fe(c,"_defaultColor",null),fe(c,"_defaultFontSize",10),fe(c,"_keyboardManager",new a.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],c.prototype.commitOrRemove]])),fe(c,"_type","freetext");let dt=c;i.FreeTextEditor=dt},(h,i,Y)=>{var j,lt,_t,ut,at,_,s,f,g,rt,it,m,o,c,tt,yn,ot,_n,gt,bn,Bt,vn,Ot,Je,Rt,An,jt,Sn,te,En,$,Ce,pt,Qe,At,Ne,kt,je,d,Fe,nt,Ze,yt,Ue,Ut,tn,It,Pn,Nt,Tn,Yt,Cn,Xt,en,re,Be,le,Oe,de,nn;Object.defineProperty(i,"__esModule",{value:!0}),i.InkEditor=void 0,Object.defineProperty(i,"fitCurve",{enumerable:!0,get:function(){return ht.fitCurve}});var e=Y(1),a=Y(6),ht=Y(25),dt=Y(7);const st=16,ae=class ae extends a.AnnotationEditor{constructor(Wt){super({...Wt,name:"inkEditor"});qt(this,tt);qt(this,ot);qt(this,gt);qt(this,Bt);qt(this,Ot);qt(this,Rt);qt(this,jt);qt(this,te);qt(this,$);qt(this,pt);qt(this,At);qt(this,kt);qt(this,d);qt(this,nt);qt(this,yt);qt(this,It);qt(this,Nt);qt(this,Yt);qt(this,Xt);qt(this,re);qt(this,le);qt(this,de);qt(this,j,0);qt(this,lt,0);qt(this,_t,0);qt(this,ut,this.canvasPointermove.bind(this));qt(this,at,this.canvasPointerleave.bind(this));qt(this,_,this.canvasPointerup.bind(this));qt(this,s,this.canvasPointerdown.bind(this));qt(this,f,!1);qt(this,g,!1);qt(this,rt,null);qt(this,it,null);qt(this,m,0);qt(this,o,0);qt(this,c,null);this.color=Wt.color||null,this.thickness=Wt.thickness||null,this.opacity=Wt.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(Wt){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(Kt=>[Kt,Wt.get(Kt)]))}static updateDefaultParams(Wt,Kt){switch(Wt){case e.AnnotationEditorParamsType.INK_THICKNESS:ae._defaultThickness=Kt;break;case e.AnnotationEditorParamsType.INK_COLOR:ae._defaultColor=Kt;break;case e.AnnotationEditorParamsType.INK_OPACITY:ae._defaultOpacity=Kt/100;break}}updateParams(Wt,Kt){switch(Wt){case e.AnnotationEditorParamsType.INK_THICKNESS:zt(this,tt,yn).call(this,Kt);break;case e.AnnotationEditorParamsType.INK_COLOR:zt(this,ot,_n).call(this,Kt);break;case e.AnnotationEditorParamsType.INK_OPACITY:zt(this,gt,bn).call(this,Kt);break}}static get defaultPropertiesToUpdate(){return[[e.AnnotationEditorParamsType.INK_THICKNESS,ae._defaultThickness],[e.AnnotationEditorParamsType.INK_COLOR,ae._defaultColor||a.AnnotationEditor._defaultLineColor],[e.AnnotationEditorParamsType.INK_OPACITY,Math.round(ae._defaultOpacity*100)]]}get propertiesToUpdate(){return[[e.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||ae._defaultThickness],[e.AnnotationEditorParamsType.INK_COLOR,this.color||ae._defaultColor||a.AnnotationEditor._defaultLineColor],[e.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??ae._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(zt(this,At,Ne).call(this),zt(this,kt,je).call(this)),this.isAttachedToDOM||(this.parent.add(this),zt(this,d,Fe).call(this)),zt(this,le,Oe).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,mt(this,it).disconnect(),Qt(this,it,null),super.remove())}enableEditMode(){mt(this,f)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",mt(this,s)),this.canvas.addEventListener("pointerup",mt(this,_)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",mt(this,s)),this.canvas.removeEventListener("pointerup",mt(this,_)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){mt(this,f)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),Qt(this,f,!0),this.div.classList.add("disabled"),zt(this,le,Oe).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(Wt){super.focusin(Wt),this.enableEditMode()}canvasPointerdown(Wt){Wt.button!==0||!this.isInEditMode()||mt(this,f)||(this.setInForeground(),Wt.type!=="mouse"&&this.div.focus(),Wt.stopPropagation(),this.canvas.addEventListener("pointerleave",mt(this,at)),this.canvas.addEventListener("pointermove",mt(this,ut)),zt(this,Rt,An).call(this,Wt.offsetX,Wt.offsetY))}canvasPointermove(Wt){Wt.stopPropagation(),zt(this,jt,Sn).call(this,Wt.offsetX,Wt.offsetY)}canvasPointerup(Wt){Wt.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(Wt.stopPropagation(),zt(this,pt,Qe).call(this,Wt),this.setInBackground())}canvasPointerleave(Wt){zt(this,pt,Qe).call(this,Wt),this.setInBackground()}render(){if(this.div)return this.div;let Wt,Kt;this.width&&(Wt=this.x,Kt=this.y),super.render(),ae._l10nPromise.get("editor_ink_aria_label").then(Zt=>{var ne;return(ne=this.div)==null?void 0:ne.setAttribute("aria-label",Zt)});const[Mt,Ct,wt,Jt]=zt(this,Bt,vn).call(this);if(this.setAt(Mt,Ct,0,0),this.setDims(wt,Jt),zt(this,At,Ne).call(this),this.width){const[Zt,ne]=this.parent.viewportBaseDimensions;this.setAt(Wt*Zt,Kt*ne,this.width*Zt,this.height*ne),Qt(this,g,!0),zt(this,d,Fe).call(this),this.setDims(this.width*Zt,this.height*ne),zt(this,$,Ce).call(this),zt(this,de,nn).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return zt(this,kt,je).call(this),this.div}setDimensions(Wt,Kt){const Mt=Math.round(Wt),Ct=Math.round(Kt);if(mt(this,m)===Mt&&mt(this,o)===Ct)return;Qt(this,m,Mt),Qt(this,o,Ct),this.canvas.style.visibility="hidden",mt(this,j)&&Math.abs(mt(this,j)-Wt/Kt)>.01&&(Kt=Math.ceil(Wt/mt(this,j)),this.setDims(Wt,Kt));const[wt,Jt]=this.parent.viewportBaseDimensions;this.width=Wt/wt,this.height=Kt/Jt,mt(this,f)&&zt(this,nt,Ze).call(this,Wt,Kt),zt(this,d,Fe).call(this),zt(this,$,Ce).call(this),this.canvas.style.visibility="visible"}static deserialize(Wt,Kt){var me,he;const Mt=super.deserialize(Wt,Kt);Mt.thickness=Wt.thickness,Mt.color=e.Util.makeHexColor(...Wt.color),Mt.opacity=Wt.opacity;const[Ct,wt]=Kt.pageDimensions,Jt=Mt.width*Ct,Zt=Mt.height*wt,ne=Kt.scaleFactor,ie=Wt.thickness/2;Qt(Mt,j,Jt/Zt),Qt(Mt,f,!0),Qt(Mt,m,Math.round(Jt)),Qt(Mt,o,Math.round(Zt));for(const{bezier:oe}of Wt.paths){const _e=[];Mt.paths.push(_e);let ye=ne*(oe[0]-ie),Ae=ne*(Zt-oe[1]-ie);for(let be=2,Ee=oe.length;be<Ee;be+=6){const Re=ne*(oe[be]-ie),ke=ne*(Zt-oe[be+1]-ie),Te=ne*(oe[be+2]-ie),ve=ne*(Zt-oe[be+3]-ie),Pe=ne*(oe[be+4]-ie),xe=ne*(Zt-oe[be+5]-ie);_e.push([[ye,Ae],[Re,ke],[Te,ve],[Pe,xe]]),ye=Pe,Ae=xe}const ue=zt(this,Ut,tn).call(this,_e);Mt.bezierPath2D.push(ue)}const ce=zt(me=Mt,Xt,en).call(me);return Qt(Mt,_t,Math.max(st,ce[2]-ce[0])),Qt(Mt,lt,Math.max(st,ce[3]-ce[1])),zt(he=Mt,nt,Ze).call(he,Jt,Zt),Mt}serialize(){if(this.isEmpty())return null;const Wt=this.getRect(0,0),Kt=this.rotation%180===0?Wt[3]-Wt[1]:Wt[2]-Wt[0],Mt=a.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:e.AnnotationEditorType.INK,color:Mt,thickness:this.thickness,opacity:this.opacity,paths:zt(this,It,Pn).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,Kt),pageIndex:this.parent.pageIndex,rect:Wt,rotation:this.rotation}}};j=new WeakMap,lt=new WeakMap,_t=new WeakMap,ut=new WeakMap,at=new WeakMap,_=new WeakMap,s=new WeakMap,f=new WeakMap,g=new WeakMap,rt=new WeakMap,it=new WeakMap,m=new WeakMap,o=new WeakMap,c=new WeakMap,tt=new WeakSet,yn=function(Wt){const Kt=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=Wt,zt(this,le,Oe).call(this)},undo:()=>{this.thickness=Kt,zt(this,le,Oe).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},ot=new WeakSet,_n=function(Wt){const Kt=this.color;this.parent.addCommands({cmd:()=>{this.color=Wt,zt(this,$,Ce).call(this)},undo:()=>{this.color=Kt,zt(this,$,Ce).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},gt=new WeakSet,bn=function(Wt){Wt/=100;const Kt=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=Wt,zt(this,$,Ce).call(this)},undo:()=>{this.opacity=Kt,zt(this,$,Ce).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Bt=new WeakSet,vn=function(){const{width:Wt,height:Kt,rotation:Mt}=this.parent.viewport;switch(Mt){case 90:return[0,Wt,Wt,Kt];case 180:return[Wt,Kt,Wt,Kt];case 270:return[Kt,0,Wt,Kt];default:return[0,0,Wt,Kt]}},Ot=new WeakSet,Je=function(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,dt.opacityToHex)(this.opacity)}`},Rt=new WeakSet,An=function(Wt,Kt){this.isEditing=!0,mt(this,g)||(Qt(this,g,!0),zt(this,d,Fe).call(this),this.thickness||(this.thickness=ae._defaultThickness),this.color||(this.color=ae._defaultColor||a.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=ae._defaultOpacity)),this.currentPath.push([Wt,Kt]),Qt(this,rt,null),zt(this,Ot,Je).call(this),this.ctx.beginPath(),this.ctx.moveTo(Wt,Kt),Qt(this,c,()=>{mt(this,c)&&(mt(this,rt)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):zt(this,$,Ce).call(this),this.ctx.lineTo(...mt(this,rt)),Qt(this,rt,null),this.ctx.stroke()),window.requestAnimationFrame(mt(this,c)))}),window.requestAnimationFrame(mt(this,c))},jt=new WeakSet,Sn=function(Wt,Kt){const[Mt,Ct]=this.currentPath.at(-1);Wt===Mt&&Kt===Ct||(this.currentPath.push([Wt,Kt]),Qt(this,rt,[Wt,Kt]))},te=new WeakSet,En=function(Wt,Kt){var ie;this.ctx.closePath(),Qt(this,c,null),Wt=Math.min(Math.max(Wt,0),this.canvas.width),Kt=Math.min(Math.max(Kt,0),this.canvas.height);const[Mt,Ct]=this.currentPath.at(-1);(Wt!==Mt||Kt!==Ct)&&this.currentPath.push([Wt,Kt]);let wt;if(this.currentPath.length!==1)wt=(0,ht.fitCurve)(this.currentPath,30,null);else{const ce=[Wt,Kt];wt=[[ce,ce.slice(),ce.slice(),ce]]}const Jt=zt(ie=ae,Ut,tn).call(ie,wt);this.currentPath.length=0;const Zt=()=>{this.paths.push(wt),this.bezierPath2D.push(Jt),this.rebuild()},ne=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(zt(this,At,Ne).call(this),zt(this,kt,je).call(this)),zt(this,le,Oe).call(this))};this.parent.addCommands({cmd:Zt,undo:ne,mustExec:!0})},$=new WeakSet,Ce=function(){if(this.isEmpty()){zt(this,yt,Ue).call(this);return}zt(this,Ot,Je).call(this);const{canvas:Wt,ctx:Kt}=this;Kt.setTransform(1,0,0,1,0,0),Kt.clearRect(0,0,Wt.width,Wt.height),zt(this,yt,Ue).call(this);for(const Mt of this.bezierPath2D)Kt.stroke(Mt)},pt=new WeakSet,Qe=function(Wt){zt(this,te,En).call(this,Wt.offsetX,Wt.offsetY),this.canvas.removeEventListener("pointerleave",mt(this,at)),this.canvas.removeEventListener("pointermove",mt(this,ut)),this.parent.addToAnnotationStorage(this)},At=new WeakSet,Ne=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",ae._l10nPromise.get("editor_ink_canvas_aria_label").then(Wt=>{var Kt;return(Kt=this.canvas)==null?void 0:Kt.setAttribute("aria-label",Wt)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},kt=new WeakSet,je=function(){Qt(this,it,new ResizeObserver(Wt=>{const Kt=Wt[0].contentRect;Kt.width&&Kt.height&&this.setDimensions(Kt.width,Kt.height)})),mt(this,it).observe(this.div)},d=new WeakSet,Fe=function(){if(!mt(this,g))return;const[Wt,Kt]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*Wt),this.canvas.height=Math.ceil(this.height*Kt),zt(this,yt,Ue).call(this)},nt=new WeakSet,Ze=function(Wt,Kt){const Mt=zt(this,re,Be).call(this),Ct=(Wt-Mt)/mt(this,_t),wt=(Kt-Mt)/mt(this,lt);this.scaleFactor=Math.min(Ct,wt)},yt=new WeakSet,Ue=function(){const Wt=zt(this,re,Be).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+Wt,this.translationY*this.scaleFactor+Wt)},Ut=new WeakSet,tn=function(Wt){const Kt=new Path2D;for(let Mt=0,Ct=Wt.length;Mt<Ct;Mt++){const[wt,Jt,Zt,ne]=Wt[Mt];Mt===0&&Kt.moveTo(...wt),Kt.bezierCurveTo(Jt[0],Jt[1],Zt[0],Zt[1],ne[0],ne[1])}return Kt},It=new WeakSet,Pn=function(Wt,Kt,Mt,Ct){const Jt=[],Zt=this.thickness/2;let ne,ie;for(const ce of this.paths){ne=[],ie=[];for(let me=0,he=ce.length;me<he;me++){const[oe,_e,ye,Ae]=ce[me],ue=Wt*(oe[0]+Kt)+Zt,be=Ct-Wt*(oe[1]+Mt)-Zt,Ee=Wt*(_e[0]+Kt)+Zt,Re=Ct-Wt*(_e[1]+Mt)-Zt,ke=Wt*(ye[0]+Kt)+Zt,Te=Ct-Wt*(ye[1]+Mt)-Zt,ve=Wt*(Ae[0]+Kt)+Zt,Pe=Ct-Wt*(Ae[1]+Mt)-Zt;me===0&&(ne.push(ue,be),ie.push(ue,be)),ne.push(Ee,Re,ke,Te,ve,Pe),zt(this,Nt,Tn).call(this,ue,be,Ee,Re,ke,Te,ve,Pe,4,ie)}Jt.push({bezier:ne,points:ie})}return Jt},Nt=new WeakSet,Tn=function(Wt,Kt,Mt,Ct,wt,Jt,Zt,ne,ie,ce){if(zt(this,Yt,Cn).call(this,Wt,Kt,Mt,Ct,wt,Jt,Zt,ne)){ce.push(Zt,ne);return}for(let me=1;me<ie-1;me++){const he=me/ie,oe=1-he;let _e=he*Wt+oe*Mt,ye=he*Kt+oe*Ct,Ae=he*Mt+oe*wt,ue=he*Ct+oe*Jt;const be=he*wt+oe*Zt,Ee=he*Jt+oe*ne;_e=he*_e+oe*Ae,ye=he*ye+oe*ue,Ae=he*Ae+oe*be,ue=he*ue+oe*Ee,_e=he*_e+oe*Ae,ye=he*ye+oe*ue,ce.push(_e,ye)}ce.push(Zt,ne)},Yt=new WeakSet,Cn=function(Wt,Kt,Mt,Ct,wt,Jt,Zt,ne){const ce=(3*Mt-2*Wt-Zt)**2,me=(3*Ct-2*Kt-ne)**2,he=(3*wt-Wt-2*Zt)**2,oe=(3*Jt-Kt-2*ne)**2;return Math.max(ce,he)+Math.max(me,oe)<=10},Xt=new WeakSet,en=function(){let Wt=1/0,Kt=-1/0,Mt=1/0,Ct=-1/0;for(const wt of this.paths)for(const[Jt,Zt,ne,ie]of wt){const ce=e.Util.bezierBoundingBox(...Jt,...Zt,...ne,...ie);Wt=Math.min(Wt,ce[0]),Mt=Math.min(Mt,ce[1]),Kt=Math.max(Kt,ce[2]),Ct=Math.max(Ct,ce[3])}return[Wt,Mt,Kt,Ct]},re=new WeakSet,Be=function(){return mt(this,f)?Math.ceil(this.thickness*this.parent.scaleFactor):0},le=new WeakSet,Oe=function(Wt=!1){if(this.isEmpty())return;if(!mt(this,f)){zt(this,$,Ce).call(this);return}const Kt=zt(this,Xt,en).call(this),Mt=zt(this,re,Be).call(this);Qt(this,_t,Math.max(st,Kt[2]-Kt[0])),Qt(this,lt,Math.max(st,Kt[3]-Kt[1]));const Ct=Math.ceil(Mt+mt(this,_t)*this.scaleFactor),wt=Math.ceil(Mt+mt(this,lt)*this.scaleFactor),[Jt,Zt]=this.parent.viewportBaseDimensions;this.width=Ct/Jt,this.height=wt/Zt,Qt(this,j,Ct/wt),zt(this,de,nn).call(this);const ne=this.translationX,ie=this.translationY;this.translationX=-Kt[0],this.translationY=-Kt[1],zt(this,d,Fe).call(this),zt(this,$,Ce).call(this),Qt(this,m,Ct),Qt(this,o,wt),this.setDims(Ct,wt);const ce=Wt?Mt/this.scaleFactor/2:0;this.translate(ne-this.translationX-ce,ie-this.translationY-ce)},de=new WeakSet,nn=function(){const{style:Wt}=this.div;mt(this,j)>=1?(Wt.minHeight=`${st}px`,Wt.minWidth=`${Math.round(mt(this,j)*st)}px`):(Wt.minWidth=`${st}px`,Wt.minHeight=`${Math.round(st/mt(this,j))}px`)},qt(ae,Ut),fe(ae,"_defaultColor",null),fe(ae,"_defaultOpacity",1),fe(ae,"_defaultThickness",1),fe(ae,"_l10nPromise"),fe(ae,"_type","ink");let b=ae;i.InkEditor=b},(h,i,Y)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.fitCurve=void 0;const e=Y(26);i.fitCurve=e},h=>{function i(_,s,f){if(!Array.isArray(_))throw new TypeError("First argument should be an array");if(_.forEach(m=>{if(!Array.isArray(m)||m.some(o=>typeof o!="number")||m.length!==_[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),_=_.filter((m,o)=>o===0||!m.every((c,tt)=>c===_[o-1][tt])),_.length<2)return[];const g=_.length,rt=_t(_[1],_[0]),it=_t(_[g-2],_[g-1]);return Y(_,rt,it,s,f)}function Y(_,s,f,g,rt){var m,o,c,tt,ft,ot,et,gt,Lt,Bt,Dt,Ot,Tt;if(_.length===2)return Ot=ut.vectorLen(ut.subtract(_[0],_[1]))/3,m=[_[0],ut.addArrays(_[0],ut.mulItems(s,Ot)),ut.addArrays(_[1],ut.mulItems(f,Ot)),_[1]],[m];if(o=st(_),[m,tt,ot]=e(_,o,o,s,f,rt),tt===0||tt<g)return[m];if(tt<g*g)for(c=o,ft=tt,et=ot,Tt=0;Tt<20;Tt++){if(c=ht(m,_,c),[m,tt,ot]=e(_,o,c,s,f,rt),tt<g)return[m];if(ot===et){let Rt=tt/ft;if(Rt>.9999&&Rt<1.0001)break}ft=tt,et=ot}return Dt=[],gt=ut.subtract(_[ot-1],_[ot+1]),gt.every(Rt=>Rt===0)&&(gt=ut.subtract(_[ot-1],_[ot]),[gt[0],gt[1]]=[-gt[1],gt[0]]),Lt=ut.normalize(gt),Bt=ut.mulItems(Lt,-1),Dt=Dt.concat(Y(_.slice(0,ot+1),s,Lt,g,rt)),Dt=Dt.concat(Y(_.slice(ot),Bt,f,g,rt)),Dt}function e(_,s,f,g,rt,it){var m,o,c;return m=a(_,f,g,rt),[o,c]=b(_,m,s),it&&it({bez:m,points:_,params:s,maxErr:o,maxPoint:c}),[m,o,c]}function a(_,s,f,g){var rt,it,m,o,c,tt,ft,ot,et,gt,Lt,Bt,Dt,Ot,Tt,Rt,Ft,jt=_[0],Ht=_[_.length-1];for(rt=[jt,null,null,Ht],it=ut.zeros_Xx2x2(s.length),Dt=0,Ot=s.length;Dt<Ot;Dt++)Rt=s[Dt],Ft=1-Rt,m=it[Dt],m[0]=ut.mulItems(f,3*Rt*(Ft*Ft)),m[1]=ut.mulItems(g,3*Ft*(Rt*Rt));for(o=[[0,0],[0,0]],c=[0,0],Dt=0,Ot=_.length;Dt<Ot;Dt++)Rt=s[Dt],m=it[Dt],o[0][0]+=ut.dot(m[0],m[0]),o[0][1]+=ut.dot(m[0],m[1]),o[1][0]+=ut.dot(m[0],m[1]),o[1][1]+=ut.dot(m[1],m[1]),Tt=ut.subtract(_[Dt],at.q([jt,jt,Ht,Ht],Rt)),c[0]+=ut.dot(m[0],Tt),c[1]+=ut.dot(m[1],Tt);return tt=o[0][0]*o[1][1]-o[1][0]*o[0][1],ft=o[0][0]*c[1]-o[1][0]*c[0],ot=c[0]*o[1][1]-c[1]*o[0][1],et=tt===0?0:ot/tt,gt=tt===0?0:ft/tt,Bt=ut.vectorLen(ut.subtract(jt,Ht)),Lt=1e-6*Bt,et<Lt||gt<Lt?(rt[1]=ut.addArrays(jt,ut.mulItems(f,Bt/3)),rt[2]=ut.addArrays(Ht,ut.mulItems(g,Bt/3))):(rt[1]=ut.addArrays(jt,ut.mulItems(f,et)),rt[2]=ut.addArrays(Ht,ut.mulItems(g,gt))),rt}function ht(_,s,f){return f.map((g,rt)=>dt(_,s[rt],g))}function dt(_,s,f){var g=ut.subtract(at.q(_,f),s),rt=at.qprime(_,f),it=ut.mulMatrix(g,rt),m=ut.sum(ut.squareItems(rt))+2*ut.mulMatrix(g,at.qprimeprime(_,f));return m===0?f:f-it/m}function st(_){var s=[],f,g,rt;return _.forEach((it,m)=>{f=m?g+ut.vectorLen(ut.subtract(it,rt)):0,s.push(f),g=f,rt=it}),s=s.map(it=>it/g),s}function b(_,s,f){var g,rt,it,m,o,c,tt,ft;rt=0,it=Math.floor(_.length/2);const ot=j(s,10);for(o=0,c=_.length;o<c;o++)tt=_[o],ft=lt(s,f[o],ot,10),m=ut.subtract(at.q(s,ft),tt),g=m[0]*m[0]+m[1]*m[1],g>rt&&(rt=g,it=o);return[rt,it]}var j=function(_,s){for(var f,g=[0],rt=_[0],it=0,m=1;m<=s;m++)f=at.q(_,m/s),it+=ut.vectorLen(ut.subtract(f,rt)),g.push(it),rt=f;return g=g.map(o=>o/it),g};function lt(_,s,f,g){if(s<0)return 0;if(s>1)return 1;for(var rt,it,m,o,c,tt=1;tt<=g;tt++)if(s<=f[tt]){o=(tt-1)/g,m=tt/g,it=f[tt-1],rt=f[tt],c=(s-it)/(rt-it)*(m-o)+o;break}return c}function _t(_,s){return ut.normalize(ut.subtract(_,s))}class ut{static zeros_Xx2x2(s){for(var f=[];s--;)f.push([0,0]);return f}static mulItems(s,f){return s.map(g=>g*f)}static mulMatrix(s,f){return s.reduce((g,rt,it)=>g+rt*f[it],0)}static subtract(s,f){return s.map((g,rt)=>g-f[rt])}static addArrays(s,f){return s.map((g,rt)=>g+f[rt])}static addItems(s,f){return s.map(g=>g+f)}static sum(s){return s.reduce((f,g)=>f+g)}static dot(s,f){return ut.mulMatrix(s,f)}static vectorLen(s){return Math.hypot(...s)}static divItems(s,f){return s.map(g=>g/f)}static squareItems(s){return s.map(f=>f*f)}static normalize(s){return this.divItems(s,this.vectorLen(s))}}class at{static q(s,f){var g=1-f,rt=ut.mulItems(s[0],g*g*g),it=ut.mulItems(s[1],3*g*g*f),m=ut.mulItems(s[2],3*g*f*f),o=ut.mulItems(s[3],f*f*f);return ut.addArrays(ut.addArrays(rt,it),ut.addArrays(m,o))}static qprime(s,f){var g=1-f,rt=ut.mulItems(ut.subtract(s[1],s[0]),3*g*g),it=ut.mulItems(ut.subtract(s[2],s[1]),6*g*f),m=ut.mulItems(ut.subtract(s[3],s[2]),3*f*f);return ut.addArrays(ut.addArrays(rt,it),m)}static qprimeprime(s,f){return ut.addArrays(ut.mulItems(ut.addArrays(ut.subtract(s[2],ut.mulItems(s[1],2)),s[0]),6*(1-f)),ut.mulItems(ut.addArrays(ut.subtract(s[3],ut.mulItems(s[2],2)),s[1]),6*f))}}h.exports=i,h.exports.fitCubic=Y,h.exports.createTangent=_t},(h,i,Y)=>{var $,rn,pt,sn,At,an;Object.defineProperty(i,"__esModule",{value:!0}),i.AnnotationLayer=void 0;var e=Y(1),a=Y(8),ht=Y(5),dt=Y(28),st=Y(29);const b=1e3,j=9,lt=new WeakSet;function _t(xt){return{width:xt[2]-xt[0],height:xt[3]-xt[1]}}class ut{static create(d){switch(d.data.annotationType){case e.AnnotationType.LINK:return new _(d);case e.AnnotationType.TEXT:return new s(d);case e.AnnotationType.WIDGET:switch(d.data.fieldType){case"Tx":return new g(d);case"Btn":return d.data.radioButton?new it(d):d.data.checkBox?new rt(d):new m(d);case"Ch":return new o(d)}return new f(d);case e.AnnotationType.POPUP:return new c(d);case e.AnnotationType.FREETEXT:return new ft(d);case e.AnnotationType.LINE:return new ot(d);case e.AnnotationType.SQUARE:return new et(d);case e.AnnotationType.CIRCLE:return new gt(d);case e.AnnotationType.POLYLINE:return new Lt(d);case e.AnnotationType.CARET:return new Dt(d);case e.AnnotationType.INK:return new Ot(d);case e.AnnotationType.POLYGON:return new Bt(d);case e.AnnotationType.HIGHLIGHT:return new Tt(d);case e.AnnotationType.UNDERLINE:return new Rt(d);case e.AnnotationType.SQUIGGLY:return new Ft(d);case e.AnnotationType.STRIKEOUT:return new jt(d);case e.AnnotationType.STAMP:return new Ht(d);case e.AnnotationType.FILEATTACHMENT:return new te(d);default:return new at(d)}}}class at{constructor(d,{isRenderable:Z=!1,ignoreBorder:nt=!1,createQuadrilaterals:ct=!1}={}){this.isRenderable=Z,this.data=d.data,this.layer=d.layer,this.page=d.page,this.viewport=d.viewport,this.linkService=d.linkService,this.downloadManager=d.downloadManager,this.imageResourcesPath=d.imageResourcesPath,this.renderForms=d.renderForms,this.svgFactory=d.svgFactory,this.annotationStorage=d.annotationStorage,this.enableScripting=d.enableScripting,this.hasJSActions=d.hasJSActions,this._fieldObjects=d.fieldObjects,this._mouseState=d.mouseState,Z&&(this.container=this._createContainer(nt)),ct&&(this.quadrilaterals=this._createQuadrilaterals(nt))}_createContainer(d=!1){const Z=this.data,nt=this.page,ct=this.viewport,yt=document.createElement("section"),{width:Pt,height:Ut}=_t(Z.rect),[Vt,It,$t,Nt]=ct.viewBox,Gt=$t-Vt,Yt=Nt-It;yt.setAttribute("data-annotation-id",Z.id);const bt=e.Util.normalizeRect([Z.rect[0],nt.view[3]-Z.rect[1]+nt.view[1],Z.rect[2],nt.view[3]-Z.rect[3]+nt.view[1]]);if(!d&&Z.borderStyle.width>0){yt.style.borderWidth=`${Z.borderStyle.width}px`;const ee=Z.borderStyle.horizontalCornerRadius,re=Z.borderStyle.verticalCornerRadius;if(ee>0||re>0){const le=`calc(${ee}px * var(--scale-factor)) / calc(${re}px * var(--scale-factor))`;yt.style.borderRadius=le}else if(this instanceof it){const le=`calc(${Pt}px * var(--scale-factor)) / calc(${Ut}px * var(--scale-factor))`;yt.style.borderRadius=le}switch(Z.borderStyle.style){case e.AnnotationBorderStyleType.SOLID:yt.style.borderStyle="solid";break;case e.AnnotationBorderStyleType.DASHED:yt.style.borderStyle="dashed";break;case e.AnnotationBorderStyleType.BEVELED:(0,e.warn)("Unimplemented border style: beveled");break;case e.AnnotationBorderStyleType.INSET:(0,e.warn)("Unimplemented border style: inset");break;case e.AnnotationBorderStyleType.UNDERLINE:yt.style.borderBottomStyle="solid";break}const se=Z.borderColor||null;se?yt.style.borderColor=e.Util.makeHexColor(se[0]|0,se[1]|0,se[2]|0):yt.style.borderWidth=0}yt.style.left=`${100*(bt[0]-Vt)/Gt}%`,yt.style.top=`${100*(bt[1]-It)/Yt}%`;const{rotation:Xt}=Z;return Z.hasOwnCanvas||Xt===0?(yt.style.width=`${100*Pt/Gt}%`,yt.style.height=`${100*Ut/Yt}%`):this.setRotation(Xt,yt),yt}setRotation(d,Z=this.container){const[nt,ct,yt,Pt]=this.viewport.viewBox,Ut=yt-nt,Vt=Pt-ct,{width:It,height:$t}=_t(this.data.rect);let Nt,Gt;d%180===0?(Nt=100*It/Ut,Gt=100*$t/Vt):(Nt=100*$t/Ut,Gt=100*It/Vt),Z.style.width=`${Nt}%`,Z.style.height=`${Gt}%`,Z.setAttribute("data-main-rotation",(360-d)%360)}get _commonActions(){const d=(Z,nt,ct)=>{const yt=ct.detail[Z];ct.target.style[nt]=dt.ColorConverters[`${yt[0]}_HTML`](yt.slice(1))};return(0,e.shadow)(this,"_commonActions",{display:Z=>{const nt=Z.detail.display%2===1;this.container.style.visibility=nt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:nt,print:Z.detail.display===0||Z.detail.display===3})},print:Z=>{this.annotationStorage.setValue(this.data.id,{print:Z.detail.print})},hidden:Z=>{this.container.style.visibility=Z.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:Z.detail.hidden})},focus:Z=>{setTimeout(()=>Z.target.focus({preventScroll:!1}),0)},userName:Z=>{Z.target.title=Z.detail.userName},readonly:Z=>{Z.detail.readonly?Z.target.setAttribute("readonly",""):Z.target.removeAttribute("readonly")},required:Z=>{this._setRequired(Z.target,Z.detail.required)},bgColor:Z=>{d("bgColor","backgroundColor",Z)},fillColor:Z=>{d("fillColor","backgroundColor",Z)},fgColor:Z=>{d("fgColor","color",Z)},textColor:Z=>{d("textColor","color",Z)},borderColor:Z=>{d("borderColor","borderColor",Z)},strokeColor:Z=>{d("strokeColor","borderColor",Z)},rotation:Z=>{const nt=Z.detail.rotation;this.setRotation(nt),this.annotationStorage.setValue(this.data.id,{rotation:nt})}})}_dispatchEventFromSandbox(d,Z){const nt=this._commonActions;for(const ct of Object.keys(Z.detail)){const yt=d[ct]||nt[ct];yt&&yt(Z)}}_setDefaultPropertiesFromJS(d){if(!this.enableScripting)return;const Z=this.annotationStorage.getRawValue(this.data.id);if(!Z)return;const nt=this._commonActions;for(const[ct,yt]of Object.entries(Z)){const Pt=nt[ct];if(Pt){const Ut={detail:{[ct]:yt},target:d};Pt(Ut),delete Z[ct]}}}_createQuadrilaterals(d=!1){if(!this.data.quadPoints)return null;const Z=[],nt=this.data.rect;for(const ct of this.data.quadPoints)this.data.rect=[ct[2].x,ct[2].y,ct[1].x,ct[1].y],Z.push(this._createContainer(d));return this.data.rect=nt,Z}_createPopup(d,Z){let nt=this.container;this.quadrilaterals&&(d=d||this.quadrilaterals,nt=this.quadrilaterals[0]),d||(d=document.createElement("div"),d.className="popupTriggerArea",nt.append(d));const yt=new tt({container:nt,trigger:d,color:Z.color,titleObj:Z.titleObj,modificationDate:Z.modificationDate,contentsObj:Z.contentsObj,richText:Z.richText,hideWrapper:!0}).render();yt.style.left="100%",nt.append(yt)}_renderQuadrilaterals(d){for(const Z of this.quadrilaterals)Z.className=d;return this.quadrilaterals}render(){(0,e.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(d,Z=null){const nt=[];if(this._fieldObjects){const ct=this._fieldObjects[d];if(ct)for(const{page:yt,id:Pt,exportValues:Ut}of ct){if(yt===-1||Pt===Z)continue;const Vt=typeof Ut=="string"?Ut:null,It=document.querySelector(`[data-element-id="${Pt}"]`);if(It&&!lt.has(It)){(0,e.warn)(`_getElementsByName - element not allowed: ${Pt}`);continue}nt.push({id:Pt,exportValue:Vt,domElement:It})}return nt}for(const ct of document.getElementsByName(d)){const{id:yt,exportValue:Pt}=ct;yt!==Z&&lt.has(ct)&&nt.push({id:yt,exportValue:Pt,domElement:ct})}return nt}static get platform(){const d=typeof navigator<"u"?navigator.platform:"";return(0,e.shadow)(this,"platform",{isWin:d.includes("Win"),isMac:d.includes("Mac")})}}class _ extends at{constructor(d,Z=null){super(d,{isRenderable:!0,ignoreBorder:!!(Z!=null&&Z.ignoreBorder),createQuadrilaterals:!0}),this.isTooltipOnly=d.data.isTooltipOnly}render(){const{data:d,linkService:Z}=this,nt=document.createElement("a");nt.setAttribute("data-element-id",d.id);let ct=!1;return d.url?(Z.addLinkAttributes(nt,d.url,d.newWindow),ct=!0):d.action?(this._bindNamedAction(nt,d.action),ct=!0):d.dest?(this._bindLink(nt,d.dest),ct=!0):(d.actions&&(d.actions.Action||d.actions["Mouse Up"]||d.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(nt,d),ct=!0),d.resetForm?(this._bindResetFormAction(nt,d.resetForm),ct=!0):this.isTooltipOnly&&!ct&&(this._bindLink(nt,""),ct=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((yt,Pt)=>{const Ut=Pt===0?nt:nt.cloneNode();return yt.append(Ut),yt}):(this.container.className="linkAnnotation",ct&&this.container.append(nt),this.container)}_bindLink(d,Z){d.href=this.linkService.getDestinationHash(Z),d.onclick=()=>(Z&&this.linkService.goToDestination(Z),!1),(Z||Z==="")&&(d.className="internalLink")}_bindNamedAction(d,Z){d.href=this.linkService.getAnchorUrl(""),d.onclick=()=>(this.linkService.executeNamedAction(Z),!1),d.className="internalLink"}_bindJSAction(d,Z){d.href=this.linkService.getAnchorUrl("");const nt=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const ct of Object.keys(Z.actions)){const yt=nt.get(ct);yt&&(d[yt]=()=>{var Pt;return(Pt=this.linkService.eventBus)==null||Pt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Z.id,name:ct}}),!1})}d.onclick||(d.onclick=()=>!1),d.className="internalLink"}_bindResetFormAction(d,Z){const nt=d.onclick;if(nt||(d.href=this.linkService.getAnchorUrl("")),d.className="internalLink",!this._fieldObjects){(0,e.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),nt||(d.onclick=()=>!1);return}d.onclick=()=>{var $t;nt&&nt();const{fields:ct,refs:yt,include:Pt}=Z,Ut=[];if(ct.length!==0||yt.length!==0){const Nt=new Set(yt);for(const Gt of ct){const Yt=this._fieldObjects[Gt]||[];for(const{id:bt}of Yt)Nt.add(bt)}for(const Gt of Object.values(this._fieldObjects))for(const Yt of Gt)Nt.has(Yt.id)===Pt&&Ut.push(Yt)}else for(const Nt of Object.values(this._fieldObjects))Ut.push(...Nt);const Vt=this.annotationStorage,It=[];for(const Nt of Ut){const{id:Gt}=Nt;switch(It.push(Gt),Nt.type){case"text":{const bt=Nt.defaultValue||"";Vt.setValue(Gt,{value:bt});break}case"checkbox":case"radiobutton":{const bt=Nt.defaultValue===Nt.exportValues;Vt.setValue(Gt,{value:bt});break}case"combobox":case"listbox":{const bt=Nt.defaultValue||"";Vt.setValue(Gt,{value:bt});break}default:continue}const Yt=document.querySelector(`[data-element-id="${Gt}"]`);if(Yt){if(!lt.has(Yt)){(0,e.warn)(`_bindResetFormAction - element not allowed: ${Gt}`);continue}}else continue;Yt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&(($t=this.linkService.eventBus)==null||$t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:It,name:"ResetForm"}})),!1}}}class s extends at{constructor(d){var nt,ct,yt;const Z=!!(d.data.hasPopup||(nt=d.data.titleObj)!=null&&nt.str||(ct=d.data.contentsObj)!=null&&ct.str||(yt=d.data.richText)!=null&&yt.str);super(d,{isRenderable:Z})}render(){this.container.className="textAnnotation";const d=document.createElement("img");return d.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",d.alt="[{{type}} Annotation]",d.dataset.l10nId="text_annotation_type",d.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(d,this.data),this.container.append(d),this.container}}class f extends at{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(d){const{isWin:Z,isMac:nt}=at.platform;return Z&&d.ctrlKey||nt&&d.metaKey}_setEventListener(d,Z,nt,ct){Z.includes("mouse")?d.addEventListener(Z,yt=>{var Pt;(Pt=this.linkService.eventBus)==null||Pt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:nt,value:ct(yt),shift:yt.shiftKey,modifier:this._getKeyModifier(yt)}})}):d.addEventListener(Z,yt=>{var Pt;(Pt=this.linkService.eventBus)==null||Pt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:nt,value:ct(yt)}})})}_setEventListeners(d,Z,nt){var ct;for(const[yt,Pt]of Z)(Pt==="Action"||(ct=this.data.actions)!=null&&ct[Pt])&&this._setEventListener(d,yt,Pt,nt)}_setBackgroundColor(d){const Z=this.data.backgroundColor||null;d.style.backgroundColor=Z===null?"transparent":e.Util.makeHexColor(Z[0],Z[1],Z[2])}_setTextStyle(d){const Z=["left","center","right"],{fontColor:nt}=this.data.defaultAppearanceData,ct=this.data.defaultAppearanceData.fontSize||j,yt=d.style;let Pt;if(this.data.multiLine){const Ut=Math.abs(this.data.rect[3]-this.data.rect[1]),Vt=Math.round(Ut/(e.LINE_FACTOR*ct))||1,It=Ut/Vt;Pt=Math.min(ct,Math.round(It/e.LINE_FACTOR))}else{const Ut=Math.abs(this.data.rect[3]-this.data.rect[1]);Pt=Math.min(ct,Math.round(Ut/e.LINE_FACTOR))}yt.fontSize=`calc(${Pt}px * var(--scale-factor))`,yt.color=e.Util.makeHexColor(nt[0],nt[1],nt[2]),this.data.textAlignment!==null&&(yt.textAlign=Z[this.data.textAlignment])}_setRequired(d,Z){Z?d.setAttribute("required",!0):d.removeAttribute("required"),d.setAttribute("aria-required",Z)}}class g extends f{constructor(d){const Z=d.renderForms||!d.data.hasAppearance&&!!d.data.fieldValue;super(d,{isRenderable:Z})}setPropertyOnSiblings(d,Z,nt,ct){const yt=this.annotationStorage;for(const Pt of this._getElementsByName(d.name,d.id))Pt.domElement&&(Pt.domElement[Z]=nt),yt.setValue(Pt.id,{[ct]:nt})}render(){var ct;const d=this.annotationStorage,Z=this.data.id;this.container.className="textWidgetAnnotation";let nt=null;if(this.renderForms){const yt=d.getValue(Z,{value:this.data.fieldValue});let Pt=yt.formattedValue||yt.value||"";const Ut=d.getValue(Z,{charLimit:this.data.maxLen}).charLimit;Ut&&Pt.length>Ut&&(Pt=Pt.slice(0,Ut));const Vt={userValue:Pt,formattedValue:null,valueOnFocus:""};this.data.multiLine?(nt=document.createElement("textarea"),nt.textContent=Pt,this.data.doNotScroll&&(nt.style.overflowY="hidden")):(nt=document.createElement("input"),nt.type="text",nt.setAttribute("value",Pt),this.data.doNotScroll&&(nt.style.overflowX="hidden")),lt.add(nt),nt.setAttribute("data-element-id",Z),nt.disabled=this.data.readOnly,nt.name=this.data.fieldName,nt.tabIndex=b,this._setRequired(nt,this.data.required),Ut&&(nt.maxLength=Ut),nt.addEventListener("input",$t=>{d.setValue(Z,{value:$t.target.value}),this.setPropertyOnSiblings(nt,"value",$t.target.value,"value")}),nt.addEventListener("resetform",$t=>{const Nt=this.data.defaultFieldValue??"";nt.value=Vt.userValue=Nt,Vt.formattedValue=null});let It=$t=>{const{formattedValue:Nt}=Vt;Nt!=null&&($t.target.value=Nt),$t.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){nt.addEventListener("focus",Nt=>{Vt.userValue&&(Nt.target.value=Vt.userValue),Vt.valueOnFocus=Nt.target.value}),nt.addEventListener("updatefromsandbox",Nt=>{const Gt={value(Yt){Vt.userValue=Yt.detail.value??"",d.setValue(Z,{value:Vt.userValue.toString()}),Yt.target.value=Vt.userValue},formattedValue(Yt){const{formattedValue:bt}=Yt.detail;Vt.formattedValue=bt,bt!=null&&Yt.target!==document.activeElement&&(Yt.target.value=bt),d.setValue(Z,{formattedValue:bt})},selRange(Yt){Yt.target.setSelectionRange(...Yt.detail.selRange)},charLimit:Yt=>{var re;const{charLimit:bt}=Yt.detail,{target:Xt}=Yt;if(bt===0){Xt.removeAttribute("maxLength");return}Xt.setAttribute("maxLength",bt);let ee=Vt.userValue;!ee||ee.length<=bt||(ee=ee.slice(0,bt),Xt.value=Vt.userValue=ee,d.setValue(Z,{value:ee}),(re=this.linkService.eventBus)==null||re.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Z,name:"Keystroke",value:ee,willCommit:!0,commitKey:1,selStart:Xt.selectionStart,selEnd:Xt.selectionEnd}}))}};this._dispatchEventFromSandbox(Gt,Nt)}),nt.addEventListener("keydown",Nt=>{var bt;let Gt=-1;if(Nt.key==="Escape"?Gt=0:Nt.key==="Enter"?Gt=2:Nt.key==="Tab"&&(Gt=3),Gt===-1)return;const{value:Yt}=Nt.target;Vt.valueOnFocus!==Yt&&(Vt.userValue=Yt,(bt=this.linkService.eventBus)==null||bt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Z,name:"Keystroke",value:Yt,willCommit:!0,commitKey:Gt,selStart:Nt.target.selectionStart,selEnd:Nt.target.selectionEnd}}))});const $t=It;It=null,nt.addEventListener("blur",Nt=>{var Yt;const{value:Gt}=Nt.target;Vt.userValue=Gt,this._mouseState.isDown&&Vt.valueOnFocus!==Gt&&((Yt=this.linkService.eventBus)==null||Yt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Z,name:"Keystroke",value:Gt,willCommit:!0,commitKey:1,selStart:Nt.target.selectionStart,selEnd:Nt.target.selectionEnd}})),$t(Nt)}),(ct=this.data.actions)!=null&&ct.Keystroke&&nt.addEventListener("beforeinput",Nt=>{var le;const{data:Gt,target:Yt}=Nt,{value:bt,selectionStart:Xt,selectionEnd:ee}=Yt;let re=Xt,se=ee;switch(Nt.inputType){case"deleteWordBackward":{const pe=bt.substring(0,Xt).match(/\w*[^\w]*$/);pe&&(re-=pe[0].length);break}case"deleteWordForward":{const pe=bt.substring(Xt).match(/^[^\w]*\w*/);pe&&(se+=pe[0].length);break}case"deleteContentBackward":Xt===ee&&(re-=1);break;case"deleteContentForward":Xt===ee&&(se+=1);break}Nt.preventDefault(),(le=this.linkService.eventBus)==null||le.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Z,name:"Keystroke",value:bt,change:Gt||"",willCommit:!1,selStart:re,selEnd:se}})}),this._setEventListeners(nt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Nt=>Nt.target.value)}if(It&&nt.addEventListener("blur",It),this.data.comb){const Nt=(this.data.rect[2]-this.data.rect[0])/Ut;nt.classList.add("comb"),nt.style.letterSpacing=`calc(${Nt}px * var(--scale-factor) - 1ch)`}}else nt=document.createElement("div"),nt.textContent=this.data.fieldValue,nt.style.verticalAlign="middle",nt.style.display="table-cell";return this._setTextStyle(nt),this._setBackgroundColor(nt),this._setDefaultPropertiesFromJS(nt),this.container.append(nt),this.container}}class rt extends f{constructor(d){super(d,{isRenderable:d.renderForms})}render(){const d=this.annotationStorage,Z=this.data,nt=Z.id;let ct=d.getValue(nt,{value:Z.exportValue===Z.fieldValue}).value;typeof ct=="string"&&(ct=ct!=="Off",d.setValue(nt,{value:ct})),this.container.className="buttonWidgetAnnotation checkBox";const yt=document.createElement("input");return lt.add(yt),yt.setAttribute("data-element-id",nt),yt.disabled=Z.readOnly,this._setRequired(yt,this.data.required),yt.type="checkbox",yt.name=Z.fieldName,ct&&yt.setAttribute("checked",!0),yt.setAttribute("exportValue",Z.exportValue),yt.tabIndex=b,yt.addEventListener("change",Pt=>{const{name:Ut,checked:Vt}=Pt.target;for(const It of this._getElementsByName(Ut,nt)){const $t=Vt&&It.exportValue===Z.exportValue;It.domElement&&(It.domElement.checked=$t),d.setValue(It.id,{value:$t})}d.setValue(nt,{value:Vt})}),yt.addEventListener("resetform",Pt=>{const Ut=Z.defaultFieldValue||"Off";Pt.target.checked=Ut===Z.exportValue}),this.enableScripting&&this.hasJSActions&&(yt.addEventListener("updatefromsandbox",Pt=>{const Ut={value(Vt){Vt.target.checked=Vt.detail.value!=="Off",d.setValue(nt,{value:Vt.target.checked})}};this._dispatchEventFromSandbox(Ut,Pt)}),this._setEventListeners(yt,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Pt=>Pt.target.checked)),this._setBackgroundColor(yt),this._setDefaultPropertiesFromJS(yt),this.container.append(yt),this.container}}class it extends f{constructor(d){super(d,{isRenderable:d.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const d=this.annotationStorage,Z=this.data,nt=Z.id;let ct=d.getValue(nt,{value:Z.fieldValue===Z.buttonValue}).value;typeof ct=="string"&&(ct=ct!==Z.buttonValue,d.setValue(nt,{value:ct}));const yt=document.createElement("input");if(lt.add(yt),yt.setAttribute("data-element-id",nt),yt.disabled=Z.readOnly,this._setRequired(yt,this.data.required),yt.type="radio",yt.name=Z.fieldName,ct&&yt.setAttribute("checked",!0),yt.tabIndex=b,yt.addEventListener("change",Pt=>{const{name:Ut,checked:Vt}=Pt.target;for(const It of this._getElementsByName(Ut,nt))d.setValue(It.id,{value:!1});d.setValue(nt,{value:Vt})}),yt.addEventListener("resetform",Pt=>{const Ut=Z.defaultFieldValue;Pt.target.checked=Ut!=null&&Ut===Z.buttonValue}),this.enableScripting&&this.hasJSActions){const Pt=Z.buttonValue;yt.addEventListener("updatefromsandbox",Ut=>{const Vt={value:It=>{const $t=Pt===It.detail.value;for(const Nt of this._getElementsByName(It.target.name)){const Gt=$t&&Nt.id===nt;Nt.domElement&&(Nt.domElement.checked=Gt),d.setValue(Nt.id,{value:Gt})}}};this._dispatchEventFromSandbox(Vt,Ut)}),this._setEventListeners(yt,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ut=>Ut.target.checked)}return this._setBackgroundColor(yt),this._setDefaultPropertiesFromJS(yt),this.container.append(yt),this.container}}class m extends _{constructor(d){super(d,{ignoreBorder:d.data.hasAppearance})}render(){const d=super.render();d.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(d.title=this.data.alternativeText);const Z=d.lastChild;return this.enableScripting&&this.hasJSActions&&Z&&(this._setDefaultPropertiesFromJS(Z),Z.addEventListener("updatefromsandbox",nt=>{this._dispatchEventFromSandbox({},nt)})),d}}class o extends f{constructor(d){super(d,{isRenderable:d.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const d=this.annotationStorage,Z=this.data.id,nt=d.getValue(Z,{value:this.data.fieldValue}),ct=document.createElement("select");lt.add(ct),ct.setAttribute("data-element-id",Z),ct.disabled=this.data.readOnly,this._setRequired(ct,this.data.required),ct.name=this.data.fieldName,ct.tabIndex=b;let yt=this.data.combo&&this.data.options.length>0;this.data.combo||(ct.size=this.data.options.length,this.data.multiSelect&&(ct.multiple=!0)),ct.addEventListener("resetform",It=>{const $t=this.data.defaultFieldValue;for(const Nt of ct.options)Nt.selected=Nt.value===$t});for(const It of this.data.options){const $t=document.createElement("option");$t.textContent=It.displayValue,$t.value=It.exportValue,nt.value.includes(It.exportValue)&&($t.setAttribute("selected",!0),yt=!1),ct.append($t)}let Pt=null;if(yt){const It=document.createElement("option");It.value=" ",It.setAttribute("hidden",!0),It.setAttribute("selected",!0),ct.prepend(It),Pt=()=>{It.remove(),ct.removeEventListener("input",Pt),Pt=null},ct.addEventListener("input",Pt)}const Ut=(It,$t)=>{const Nt=$t?"value":"textContent",Gt=It.target.options;return It.target.multiple?Array.prototype.filter.call(Gt,Yt=>Yt.selected).map(Yt=>Yt[Nt]):Gt.selectedIndex===-1?null:Gt[Gt.selectedIndex][Nt]},Vt=It=>{const $t=It.target.options;return Array.prototype.map.call($t,Nt=>({displayValue:Nt.textContent,exportValue:Nt.value}))};return this.enableScripting&&this.hasJSActions?(ct.addEventListener("updatefromsandbox",It=>{const $t={value(Nt){Pt==null||Pt();const Gt=Nt.detail.value,Yt=new Set(Array.isArray(Gt)?Gt:[Gt]);for(const bt of ct.options)bt.selected=Yt.has(bt.value);d.setValue(Z,{value:Ut(Nt,!0)})},multipleSelection(Nt){ct.multiple=!0},remove(Nt){const Gt=ct.options,Yt=Nt.detail.remove;Gt[Yt].selected=!1,ct.remove(Yt),Gt.length>0&&Array.prototype.findIndex.call(Gt,Xt=>Xt.selected)===-1&&(Gt[0].selected=!0),d.setValue(Z,{value:Ut(Nt,!0),items:Vt(Nt)})},clear(Nt){for(;ct.length!==0;)ct.remove(0);d.setValue(Z,{value:null,items:[]})},insert(Nt){const{index:Gt,displayValue:Yt,exportValue:bt}=Nt.detail.insert,Xt=ct.children[Gt],ee=document.createElement("option");ee.textContent=Yt,ee.value=bt,Xt?Xt.before(ee):ct.append(ee),d.setValue(Z,{value:Ut(Nt,!0),items:Vt(Nt)})},items(Nt){const{items:Gt}=Nt.detail;for(;ct.length!==0;)ct.remove(0);for(const Yt of Gt){const{displayValue:bt,exportValue:Xt}=Yt,ee=document.createElement("option");ee.textContent=bt,ee.value=Xt,ct.append(ee)}ct.options.length>0&&(ct.options[0].selected=!0),d.setValue(Z,{value:Ut(Nt,!0),items:Vt(Nt)})},indices(Nt){const Gt=new Set(Nt.detail.indices);for(const Yt of Nt.target.options)Yt.selected=Gt.has(Yt.index);d.setValue(Z,{value:Ut(Nt,!0)})},editable(Nt){Nt.target.disabled=!Nt.detail.editable}};this._dispatchEventFromSandbox($t,It)}),ct.addEventListener("input",It=>{var Gt;const $t=Ut(It,!0),Nt=Ut(It,!1);d.setValue(Z,{value:$t}),(Gt=this.linkService.eventBus)==null||Gt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Z,name:"Keystroke",value:Nt,changeEx:$t,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(ct,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],It=>It.target.checked)):ct.addEventListener("input",function(It){d.setValue(Z,{value:Ut(It,!0)})}),this.data.combo&&this._setTextStyle(ct),this._setBackgroundColor(ct),this._setDefaultPropertiesFromJS(ct),this.container.append(ct),this.container}}class c extends at{constructor(d){var nt,ct,yt;const Z=!!((nt=d.data.titleObj)!=null&&nt.str||(ct=d.data.contentsObj)!=null&&ct.str||(yt=d.data.richText)!=null&&yt.str);super(d,{isRenderable:Z})}render(){const d=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",d.includes(this.data.parentType))return this.container;const Z=`[data-annotation-id="${this.data.parentId}"]`,nt=this.layer.querySelectorAll(Z);if(nt.length===0)return this.container;const ct=new tt({container:this.container,trigger:Array.from(nt),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),yt=this.page,Pt=e.Util.normalizeRect([this.data.parentRect[0],yt.view[3]-this.data.parentRect[1]+yt.view[1],this.data.parentRect[2],yt.view[3]-this.data.parentRect[3]+yt.view[1]]),Ut=Pt[0]+this.data.parentRect[2]-this.data.parentRect[0],Vt=Pt[1],[It,$t,Nt,Gt]=this.viewport.viewBox,Yt=Nt-It,bt=Gt-$t;return this.container.style.left=`${100*(Ut-It)/Yt}%`,this.container.style.top=`${100*(Vt-$t)/bt}%`,this.container.append(ct.render()),this.container}}class tt{constructor(d){this.container=d.container,this.trigger=d.trigger,this.color=d.color,this.titleObj=d.titleObj,this.modificationDate=d.modificationDate,this.contentsObj=d.contentsObj,this.richText=d.richText,this.hideWrapper=d.hideWrapper||!1,this.pinned=!1}render(){var Ut,Vt;const Z=document.createElement("div");Z.className="popupWrapper",this.hideElement=this.hideWrapper?Z:this.container,this.hideElement.hidden=!0;const nt=document.createElement("div");nt.className="popup";const ct=this.color;if(ct){const It=.7*(255-ct[0])+ct[0],$t=.7*(255-ct[1])+ct[1],Nt=.7*(255-ct[2])+ct[2];nt.style.backgroundColor=e.Util.makeHexColor(It|0,$t|0,Nt|0)}const yt=document.createElement("h1");yt.dir=this.titleObj.dir,yt.textContent=this.titleObj.str,nt.append(yt);const Pt=a.PDFDateString.toDateObject(this.modificationDate);if(Pt){const It=document.createElement("span");It.className="popupDate",It.textContent="{{date}}, {{time}}",It.dataset.l10nId="annotation_date_string",It.dataset.l10nArgs=JSON.stringify({date:Pt.toLocaleDateString(),time:Pt.toLocaleTimeString()}),nt.append(It)}if((Ut=this.richText)!=null&&Ut.str&&(!((Vt=this.contentsObj)!=null&&Vt.str)||this.contentsObj.str===this.richText.str))st.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:nt}),nt.lastChild.className="richText popupContent";else{const It=this._formatContents(this.contentsObj);nt.append(It)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const It of this.trigger)It.addEventListener("click",this._toggle.bind(this)),It.addEventListener("mouseover",this._show.bind(this,!1)),It.addEventListener("mouseout",this._hide.bind(this,!1));return nt.addEventListener("click",this._hide.bind(this,!0)),Z.append(nt),Z}_formatContents({str:d,dir:Z}){const nt=document.createElement("p");nt.className="popupContent",nt.dir=Z;const ct=d.split(/(?:\r\n?|\n)/);for(let yt=0,Pt=ct.length;yt<Pt;++yt){const Ut=ct[yt];nt.append(document.createTextNode(Ut)),yt<Pt-1&&nt.append(document.createElement("br"))}return nt}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(d=!1){d&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(d=!0){d&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class ft extends at{constructor(d){var nt,ct,yt;const Z=!!(d.data.hasPopup||(nt=d.data.titleObj)!=null&&nt.str||(ct=d.data.contentsObj)!=null&&ct.str||(yt=d.data.richText)!=null&&yt.str);super(d,{isRenderable:Z,ignoreBorder:!0}),this.textContent=d.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const d=document.createElement("div");d.className="annotationTextContent",d.setAttribute("role","comment");for(const Z of this.textContent){const nt=document.createElement("span");nt.textContent=Z,d.append(nt)}this.container.append(d)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class ot extends at{constructor(d){var nt,ct,yt;const Z=!!(d.data.hasPopup||(nt=d.data.titleObj)!=null&&nt.str||(ct=d.data.contentsObj)!=null&&ct.str||(yt=d.data.richText)!=null&&yt.str);super(d,{isRenderable:Z,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const d=this.data,{width:Z,height:nt}=_t(d.rect),ct=this.svgFactory.create(Z,nt,!0),yt=this.svgFactory.createElement("svg:line");return yt.setAttribute("x1",d.rect[2]-d.lineCoordinates[0]),yt.setAttribute("y1",d.rect[3]-d.lineCoordinates[1]),yt.setAttribute("x2",d.rect[2]-d.lineCoordinates[2]),yt.setAttribute("y2",d.rect[3]-d.lineCoordinates[3]),yt.setAttribute("stroke-width",d.borderStyle.width||1),yt.setAttribute("stroke","transparent"),yt.setAttribute("fill","transparent"),ct.append(yt),this.container.append(ct),this._createPopup(yt,d),this.container}}class et extends at{constructor(d){var nt,ct,yt;const Z=!!(d.data.hasPopup||(nt=d.data.titleObj)!=null&&nt.str||(ct=d.data.contentsObj)!=null&&ct.str||(yt=d.data.richText)!=null&&yt.str);super(d,{isRenderable:Z,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const d=this.data,{width:Z,height:nt}=_t(d.rect),ct=this.svgFactory.create(Z,nt,!0),yt=d.borderStyle.width,Pt=this.svgFactory.createElement("svg:rect");return Pt.setAttribute("x",yt/2),Pt.setAttribute("y",yt/2),Pt.setAttribute("width",Z-yt),Pt.setAttribute("height",nt-yt),Pt.setAttribute("stroke-width",yt||1),Pt.setAttribute("stroke","transparent"),Pt.setAttribute("fill","transparent"),ct.append(Pt),this.container.append(ct),this._createPopup(Pt,d),this.container}}class gt extends at{constructor(d){var nt,ct,yt;const Z=!!(d.data.hasPopup||(nt=d.data.titleObj)!=null&&nt.str||(ct=d.data.contentsObj)!=null&&ct.str||(yt=d.data.richText)!=null&&yt.str);super(d,{isRenderable:Z,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const d=this.data,{width:Z,height:nt}=_t(d.rect),ct=this.svgFactory.create(Z,nt,!0),yt=d.borderStyle.width,Pt=this.svgFactory.createElement("svg:ellipse");return Pt.setAttribute("cx",Z/2),Pt.setAttribute("cy",nt/2),Pt.setAttribute("rx",Z/2-yt/2),Pt.setAttribute("ry",nt/2-yt/2),Pt.setAttribute("stroke-width",yt||1),Pt.setAttribute("stroke","transparent"),Pt.setAttribute("fill","transparent"),ct.append(Pt),this.container.append(ct),this._createPopup(Pt,d),this.container}}class Lt extends at{constructor(d){var nt,ct,yt;const Z=!!(d.data.hasPopup||(nt=d.data.titleObj)!=null&&nt.str||(ct=d.data.contentsObj)!=null&&ct.str||(yt=d.data.richText)!=null&&yt.str);super(d,{isRenderable:Z,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const d=this.data,{width:Z,height:nt}=_t(d.rect),ct=this.svgFactory.create(Z,nt,!0);let yt=[];for(const Ut of d.vertices){const Vt=Ut.x-d.rect[0],It=d.rect[3]-Ut.y;yt.push(Vt+","+It)}yt=yt.join(" ");const Pt=this.svgFactory.createElement(this.svgElementName);return Pt.setAttribute("points",yt),Pt.setAttribute("stroke-width",d.borderStyle.width||1),Pt.setAttribute("stroke","transparent"),Pt.setAttribute("fill","transparent"),ct.append(Pt),this.container.append(ct),this._createPopup(Pt,d),this.container}}class Bt extends Lt{constructor(d){super(d),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Dt extends at{constructor(d){var nt,ct,yt;const Z=!!(d.data.hasPopup||(nt=d.data.titleObj)!=null&&nt.str||(ct=d.data.contentsObj)!=null&&ct.str||(yt=d.data.richText)!=null&&yt.str);super(d,{isRenderable:Z,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Ot extends at{constructor(d){var nt,ct,yt;const Z=!!(d.data.hasPopup||(nt=d.data.titleObj)!=null&&nt.str||(ct=d.data.contentsObj)!=null&&ct.str||(yt=d.data.richText)!=null&&yt.str);super(d,{isRenderable:Z,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const d=this.data,{width:Z,height:nt}=_t(d.rect),ct=this.svgFactory.create(Z,nt,!0);for(const yt of d.inkLists){let Pt=[];for(const Vt of yt){const It=Vt.x-d.rect[0],$t=d.rect[3]-Vt.y;Pt.push(`${It},${$t}`)}Pt=Pt.join(" ");const Ut=this.svgFactory.createElement(this.svgElementName);Ut.setAttribute("points",Pt),Ut.setAttribute("stroke-width",d.borderStyle.width||1),Ut.setAttribute("stroke","transparent"),Ut.setAttribute("fill","transparent"),this._createPopup(Ut,d),ct.append(Ut)}return this.container.append(ct),this.container}}class Tt extends at{constructor(d){var nt,ct,yt;const Z=!!(d.data.hasPopup||(nt=d.data.titleObj)!=null&&nt.str||(ct=d.data.contentsObj)!=null&&ct.str||(yt=d.data.richText)!=null&&yt.str);super(d,{isRenderable:Z,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class Rt extends at{constructor(d){var nt,ct,yt;const Z=!!(d.data.hasPopup||(nt=d.data.titleObj)!=null&&nt.str||(ct=d.data.contentsObj)!=null&&ct.str||(yt=d.data.richText)!=null&&yt.str);super(d,{isRenderable:Z,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class Ft extends at{constructor(d){var nt,ct,yt;const Z=!!(d.data.hasPopup||(nt=d.data.titleObj)!=null&&nt.str||(ct=d.data.contentsObj)!=null&&ct.str||(yt=d.data.richText)!=null&&yt.str);super(d,{isRenderable:Z,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class jt extends at{constructor(d){var nt,ct,yt;const Z=!!(d.data.hasPopup||(nt=d.data.titleObj)!=null&&nt.str||(ct=d.data.contentsObj)!=null&&ct.str||(yt=d.data.richText)!=null&&yt.str);super(d,{isRenderable:Z,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class Ht extends at{constructor(d){var nt,ct,yt;const Z=!!(d.data.hasPopup||(nt=d.data.titleObj)!=null&&nt.str||(ct=d.data.contentsObj)!=null&&ct.str||(yt=d.data.richText)!=null&&yt.str);super(d,{isRenderable:Z,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class te extends at{constructor(d){var ct;super(d,{isRenderable:!0});const{filename:Z,content:nt}=this.data.file;this.filename=(0,a.getFilenameFromUrl)(Z),this.content=nt,(ct=this.linkService.eventBus)==null||ct.dispatch("fileattachmentannotation",{source:this,filename:Z,content:nt})}render(){var Z,nt;this.container.className="fileAttachmentAnnotation";const d=document.createElement("div");return d.className="popupTriggerArea",d.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((Z=this.data.titleObj)!=null&&Z.str||(nt=this.data.contentsObj)!=null&&nt.str||this.data.richText)&&this._createPopup(d,this.data),this.container.append(d),this.container}_download(){var d;(d=this.downloadManager)==null||d.openOrDownloadData(this.container,this.content,this.filename)}}const kt=class kt{static render(d){var Ut,Vt;const{annotations:Z,div:nt,viewport:ct,accessibilityManager:yt}=d;zt(this,pt,sn).call(this,nt,ct);let Pt=0;for(const It of Z){if(It.annotationType!==e.AnnotationType.POPUP){const{width:Nt,height:Gt}=_t(It.rect);if(Nt<=0||Gt<=0)continue}const $t=ut.create({data:It,layer:nt,page:d.page,viewport:ct,linkService:d.linkService,downloadManager:d.downloadManager,imageResourcesPath:d.imageResourcesPath||"",renderForms:d.renderForms!==!1,svgFactory:new a.DOMSVGFactory,annotationStorage:d.annotationStorage||new ht.AnnotationStorage,enableScripting:d.enableScripting,hasJSActions:d.hasJSActions,fieldObjects:d.fieldObjects,mouseState:d.mouseState||{isDown:!1}});if($t.isRenderable){const Nt=$t.render();if(It.hidden&&(Nt.style.visibility="hidden"),Array.isArray(Nt))for(const Gt of Nt)Gt.style.zIndex=Pt++,zt(Ut=kt,$,rn).call(Ut,Gt,It.id,nt,yt);else Nt.style.zIndex=Pt++,$t instanceof c?nt.prepend(Nt):zt(Vt=kt,$,rn).call(Vt,Nt,It.id,nt,yt)}}zt(this,At,an).call(this,nt,d.annotationCanvasMap)}static update(d){const{annotationCanvasMap:Z,div:nt,viewport:ct}=d;zt(this,pt,sn).call(this,nt,ct),zt(this,At,an).call(this,nt,Z),nt.hidden=!1}};$=new WeakSet,rn=function(d,Z,nt,ct){const yt=d.firstChild||d;yt.id=`${a.AnnotationPrefix}${Z}`,nt.append(d),ct==null||ct.moveElementInDOM(nt,d,yt,!1)},pt=new WeakSet,sn=function(d,{width:Z,height:nt,rotation:ct}){const{style:yt}=d,Pt=ct%180!==0,Ut=Math.floor(Z)+"px",Vt=Math.floor(nt)+"px";yt.width=Pt?Vt:Ut,yt.height=Pt?Ut:Vt,d.setAttribute("data-main-rotation",ct)},At=new WeakSet,an=function(d,Z){if(Z){for(const[nt,ct]of Z){const yt=d.querySelector(`[data-annotation-id="${nt}"]`);if(!yt)continue;const{firstChild:Pt}=yt;Pt?Pt.nodeName==="CANVAS"?Pt.replaceWith(ct):Pt.before(ct):yt.append(ct)}Z.clear()}},qt(kt,$),qt(kt,pt),qt(kt,At);let Et=kt;i.AnnotationLayer=Et},(h,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorConverters=void 0;function Y(a){return Math.floor(Math.max(0,Math.min(1,a))*255).toString(16).padStart(2,"0")}class e{static CMYK_G([ht,dt,st,b]){return["G",1-Math.min(1,.3*ht+.59*st+.11*dt+b)]}static G_CMYK([ht]){return["CMYK",0,0,0,1-ht]}static G_RGB([ht]){return["RGB",ht,ht,ht]}static G_HTML([ht]){const dt=Y(ht);return`#${dt}${dt}${dt}`}static RGB_G([ht,dt,st]){return["G",.3*ht+.59*dt+.11*st]}static RGB_HTML([ht,dt,st]){const b=Y(ht),j=Y(dt),lt=Y(st);return`#${b}${j}${lt}`}static T_HTML(){return"#00000000"}static CMYK_RGB([ht,dt,st,b]){return["RGB",1-Math.min(1,ht+b),1-Math.min(1,st+b),1-Math.min(1,dt+b)]}static CMYK_HTML(ht){const dt=this.CMYK_RGB(ht).slice(1);return this.RGB_HTML(dt)}static RGB_CMYK([ht,dt,st]){const b=1-ht,j=1-dt,lt=1-st,_t=Math.min(b,j,lt);return["CMYK",b,j,lt,_t]}}i.ColorConverters=e},(h,i,Y)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.XfaLayer=void 0;var e=Y(20);class a{static setupStorage(dt,st,b,j,lt){const _t=j.getValue(st,{value:null});switch(b.name){case"textarea":if(_t.value!==null&&(dt.textContent=_t.value),lt==="print")break;dt.addEventListener("input",ut=>{j.setValue(st,{value:ut.target.value})});break;case"input":if(b.attributes.type==="radio"||b.attributes.type==="checkbox"){if(_t.value===b.attributes.xfaOn?dt.setAttribute("checked",!0):_t.value===b.attributes.xfaOff&&dt.removeAttribute("checked"),lt==="print")break;dt.addEventListener("change",ut=>{j.setValue(st,{value:ut.target.checked?ut.target.getAttribute("xfaOn"):ut.target.getAttribute("xfaOff")})})}else{if(_t.value!==null&&dt.setAttribute("value",_t.value),lt==="print")break;dt.addEventListener("input",ut=>{j.setValue(st,{value:ut.target.value})})}break;case"select":if(_t.value!==null)for(const ut of b.children)ut.attributes.value===_t.value&&(ut.attributes.selected=!0);dt.addEventListener("input",ut=>{const at=ut.target.options,_=at.selectedIndex===-1?"":at[at.selectedIndex].value;j.setValue(st,{value:_})});break}}static setAttributes({html:dt,element:st,storage:b=null,intent:j,linkService:lt}){const{attributes:_t}=st,ut=dt instanceof HTMLAnchorElement;_t.type==="radio"&&(_t.name=`${_t.name}-${j}`);for(const[at,_]of Object.entries(_t))if(_!=null)switch(at){case"class":_.length&&dt.setAttribute(at,_.join(" "));break;case"dataId":break;case"id":dt.setAttribute("data-element-id",_);break;case"style":Object.assign(dt.style,_);break;case"textContent":dt.textContent=_;break;default:(!ut||at!=="href"&&at!=="newWindow")&&dt.setAttribute(at,_)}ut&&lt.addLinkAttributes(dt,_t.href,_t.newWindow),b&&_t.dataId&&this.setupStorage(dt,_t.dataId,st,b)}static render(dt){var s;const st=dt.annotationStorage,b=dt.linkService,j=dt.xfaHtml,lt=dt.intent||"display",_t=document.createElement(j.name);j.attributes&&this.setAttributes({html:_t,element:j,intent:lt,linkService:b});const ut=[[j,-1,_t]],at=dt.div;if(at.append(_t),dt.viewport){const f=`matrix(${dt.viewport.transform.join(",")})`;at.style.transform=f}lt!=="richText"&&at.setAttribute("class","xfaLayer xfaFont");const _=[];for(;ut.length>0;){const[f,g,rt]=ut.at(-1);if(g+1===f.children.length){ut.pop();continue}const it=f.children[++ut.at(-1)[1]];if(it===null)continue;const{name:m}=it;if(m==="#text"){const c=document.createTextNode(it.value);_.push(c),rt.append(c);continue}let o;if((s=it==null?void 0:it.attributes)!=null&&s.xmlns?o=document.createElementNS(it.attributes.xmlns,m):o=document.createElement(m),rt.append(o),it.attributes&&this.setAttributes({html:o,element:it,storage:st,intent:lt,linkService:b}),it.children&&it.children.length>0)ut.push([it,-1,o]);else if(it.value){const c=document.createTextNode(it.value);e.XfaText.shouldBuildText(m)&&_.push(c),o.append(c)}}for(const f of at.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))f.setAttribute("readOnly",!0);return{textDivs:_}}static update(dt){const st=`matrix(${dt.viewport.transform.join(",")})`;dt.div.style.transform=st,dt.div.hidden=!1}}i.XfaLayer=a},(h,i,Y)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TextLayerRenderTask=void 0,i.renderTextLayer=rt;var e=Y(1),a=Y(8);const ht=1e5,dt=30,st=.8,b=new Map,j=/^\s+$/g;function lt(it,m){const o=b.get(it);if(o)return o;m.save(),m.font=`${dt}px ${it}`;const c=m.measureText("");let tt=c.fontBoundingBoxAscent,ft=Math.abs(c.fontBoundingBoxDescent);if(tt){m.restore();const et=tt/(tt+ft);return b.set(it,et),et}m.strokeStyle="red",m.clearRect(0,0,dt,dt),m.strokeText("g",0,0);let ot=m.getImageData(0,0,dt,dt).data;ft=0;for(let et=ot.length-1-3;et>=0;et-=4)if(ot[et]>0){ft=Math.ceil(et/4/dt);break}m.clearRect(0,0,dt,dt),m.strokeText("A",0,dt),ot=m.getImageData(0,0,dt,dt).data,tt=0;for(let et=0,gt=ot.length;et<gt;et+=4)if(ot[et]>0){tt=dt-Math.floor(et/4/dt);break}if(m.restore(),tt){const et=tt/(tt+ft);return b.set(it,et),et}return b.set(it,st),st}function _t(it,m,o,c){const tt=document.createElement("span"),ft=it._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:m.str!=="",hasEOL:m.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:m.str!=="",hasEOL:m.hasEOL,fontSize:0};it._textDivs.push(tt);const ot=e.Util.transform(it._viewport.transform,m.transform);let et=Math.atan2(ot[1],ot[0]);const gt=o[m.fontName];gt.vertical&&(et+=Math.PI/2);const Lt=Math.hypot(ot[2],ot[3]),Bt=Lt*lt(gt.fontFamily,c);let Dt,Ot;et===0?(Dt=ot[4],Ot=ot[5]-Bt):(Dt=ot[4]+Bt*Math.sin(et),Ot=ot[5]-Bt*Math.cos(et)),tt.style.left=`${Dt}px`,tt.style.top=`${Ot}px`,tt.style.fontSize=`${Lt}px`,tt.style.fontFamily=gt.fontFamily,ft.fontSize=Lt,tt.setAttribute("role","presentation"),tt.textContent=m.str,tt.dir=m.dir,it._fontInspectorEnabled&&(tt.dataset.fontName=m.fontName),et!==0&&(ft.angle=et*(180/Math.PI));let Tt=!1;if(m.str.length>1||it._enhanceTextSelection&&j.test(m.str))Tt=!0;else if(m.str!==" "&&m.transform[0]!==m.transform[3]){const Rt=Math.abs(m.transform[0]),Ft=Math.abs(m.transform[3]);Rt!==Ft&&Math.max(Rt,Ft)/Math.min(Rt,Ft)>1.5&&(Tt=!0)}if(Tt&&(gt.vertical?ft.canvasWidth=m.height*it._viewport.scale:ft.canvasWidth=m.width*it._viewport.scale),it._textDivProperties.set(tt,ft),it._textContentStream&&it._layoutText(tt),it._enhanceTextSelection&&ft.hasText){let Rt=1,Ft=0;et!==0&&(Rt=Math.cos(et),Ft=Math.sin(et));const jt=(gt.vertical?m.height:m.width)*it._viewport.scale,Ht=Lt;let te,Et;et!==0?(te=[Rt,Ft,-Ft,Rt,Dt,Ot],Et=e.Util.getAxialAlignedBoundingBox([0,0,jt,Ht],te)):Et=[Dt,Ot,Dt+jt,Ot+Ht],it._bounds.push({left:Et[0],top:Et[1],right:Et[2],bottom:Et[3],div:tt,size:[jt,Ht],m:te})}}function ut(it){if(it._canceled)return;const m=it._textDivs,o=it._capability,c=m.length;if(c>ht){it._renderingDone=!0,o.resolve();return}if(!it._textContentStream)for(let tt=0;tt<c;tt++)it._layoutText(m[tt]);it._renderingDone=!0,o.resolve()}function at(it,m,o){let c=0;for(let tt=0;tt<o;tt++){const ft=it[m++];ft>0&&(c=c?Math.min(ft,c):ft)}return c}function _(it){const m=it._bounds,o=it._viewport,c=s(o.width,o.height,m);for(let tt=0;tt<c.length;tt++){const ft=m[tt].div,ot=it._textDivProperties.get(ft);if(ot.angle===0){ot.paddingLeft=m[tt].left-c[tt].left,ot.paddingTop=m[tt].top-c[tt].top,ot.paddingRight=c[tt].right-m[tt].right,ot.paddingBottom=c[tt].bottom-m[tt].bottom,it._textDivProperties.set(ft,ot);continue}const et=c[tt],gt=m[tt],Lt=gt.m,Bt=Lt[0],Dt=Lt[1],Ot=[[0,0],[0,gt.size[1]],[gt.size[0],0],gt.size],Tt=new Float64Array(64);for(let Ft=0,jt=Ot.length;Ft<jt;Ft++){const Ht=e.Util.applyTransform(Ot[Ft],Lt);Tt[Ft+0]=Bt&&(et.left-Ht[0])/Bt,Tt[Ft+4]=Dt&&(et.top-Ht[1])/Dt,Tt[Ft+8]=Bt&&(et.right-Ht[0])/Bt,Tt[Ft+12]=Dt&&(et.bottom-Ht[1])/Dt,Tt[Ft+16]=Dt&&(et.left-Ht[0])/-Dt,Tt[Ft+20]=Bt&&(et.top-Ht[1])/Bt,Tt[Ft+24]=Dt&&(et.right-Ht[0])/-Dt,Tt[Ft+28]=Bt&&(et.bottom-Ht[1])/Bt,Tt[Ft+32]=Bt&&(et.left-Ht[0])/-Bt,Tt[Ft+36]=Dt&&(et.top-Ht[1])/-Dt,Tt[Ft+40]=Bt&&(et.right-Ht[0])/-Bt,Tt[Ft+44]=Dt&&(et.bottom-Ht[1])/-Dt,Tt[Ft+48]=Dt&&(et.left-Ht[0])/Dt,Tt[Ft+52]=Bt&&(et.top-Ht[1])/-Bt,Tt[Ft+56]=Dt&&(et.right-Ht[0])/Dt,Tt[Ft+60]=Bt&&(et.bottom-Ht[1])/-Bt}const Rt=1+Math.min(Math.abs(Bt),Math.abs(Dt));ot.paddingLeft=at(Tt,32,16)/Rt,ot.paddingTop=at(Tt,48,16)/Rt,ot.paddingRight=at(Tt,0,16)/Rt,ot.paddingBottom=at(Tt,16,16)/Rt,it._textDivProperties.set(ft,ot)}}function s(it,m,o){const c=o.map(function(ft,ot){return{x1:ft.left,y1:ft.top,x2:ft.right,y2:ft.bottom,index:ot,x1New:void 0,x2New:void 0}});f(it,c);const tt=new Array(o.length);for(const ft of c){const ot=ft.index;tt[ot]={left:ft.x1New,top:0,right:ft.x2New,bottom:0}}o.map(function(ft,ot){const et=tt[ot],gt=c[ot];gt.x1=ft.top,gt.y1=it-et.right,gt.x2=ft.bottom,gt.y2=it-et.left,gt.index=ot,gt.x1New=void 0,gt.x2New=void 0}),f(m,c);for(const ft of c){const ot=ft.index;tt[ot].top=ft.x1New,tt[ot].bottom=ft.x2New}return tt}function f(it,m){m.sort(function(tt,ft){return tt.x1-ft.x1||tt.index-ft.index});const c=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const tt of m){let ft=0;for(;ft<c.length&&c[ft].end<=tt.y1;)ft++;let ot=c.length-1;for(;ot>=0&&c[ot].start>=tt.y2;)ot--;let et,gt,Lt,Bt,Dt=-1/0;for(Lt=ft;Lt<=ot;Lt++){et=c[Lt],gt=et.boundary;let Rt;gt.x2>tt.x1?Rt=gt.index>tt.index?gt.x1New:tt.x1:gt.x2New===void 0?Rt=(gt.x2+tt.x1)/2:Rt=gt.x2New,Rt>Dt&&(Dt=Rt)}for(tt.x1New=Dt,Lt=ft;Lt<=ot;Lt++)et=c[Lt],gt=et.boundary,gt.x2New===void 0?gt.x2>tt.x1?gt.index>tt.index&&(gt.x2New=gt.x2):gt.x2New=Dt:gt.x2New>Dt&&(gt.x2New=Math.max(Dt,gt.x2));const Ot=[];let Tt=null;for(Lt=ft;Lt<=ot;Lt++){et=c[Lt],gt=et.boundary;const Rt=gt.x2>tt.x2?gt:tt;Tt===Rt?Ot.at(-1).end=et.end:(Ot.push({start:et.start,end:et.end,boundary:Rt}),Tt=Rt)}for(c[ft].start<tt.y1&&(Ot[0].start=tt.y1,Ot.unshift({start:c[ft].start,end:tt.y1,boundary:c[ft].boundary})),tt.y2<c[ot].end&&(Ot.at(-1).end=tt.y2,Ot.push({start:tt.y2,end:c[ot].end,boundary:c[ot].boundary})),Lt=ft;Lt<=ot;Lt++){if(et=c[Lt],gt=et.boundary,gt.x2New!==void 0)continue;let Rt=!1;for(Bt=ft-1;!Rt&&Bt>=0&&c[Bt].start>=gt.y1;Bt--)Rt=c[Bt].boundary===gt;for(Bt=ot+1;!Rt&&Bt<c.length&&c[Bt].end<=gt.y2;Bt++)Rt=c[Bt].boundary===gt;for(Bt=0;!Rt&&Bt<Ot.length;Bt++)Rt=Ot[Bt].boundary===gt;Rt||(gt.x2New=Dt)}Array.prototype.splice.apply(c,[ft,ot-ft+1,...Ot])}for(const tt of c){const ft=tt.boundary;ft.x2New===void 0&&(ft.x2New=Math.max(it,ft.x2))}}class g{constructor({textContent:m,textContentStream:o,container:c,viewport:tt,textDivs:ft,textContentItemsStr:ot,enhanceTextSelection:et}){var gt;et&&(0,a.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=m,this._textContentStream=o,this._container=c,this._document=c.ownerDocument,this._viewport=tt,this._textDivs=ft||[],this._textContentItemsStr=ot||[],this._enhanceTextSelection=!!et,this._fontInspectorEnabled=!!((gt=globalThis.FontInspector)!=null&&gt.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,e.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new e.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(m,o){for(let c=0,tt=m.length;c<tt;c++){if(m[c].str===void 0){if(m[c].type==="beginMarkedContentProps"||m[c].type==="beginMarkedContent"){const ft=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),m[c].id!==null&&this._container.setAttribute("id",`${m[c].id}`),ft.append(this._container)}else m[c].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(m[c].str),_t(this,m[c],o,this._layoutTextCtx)}}_layoutText(m){const o=this._textDivProperties.get(m);let c="";if(o.canvasWidth!==0&&o.hasText){const{fontFamily:tt}=m.style,{fontSize:ft}=o;(ft!==this._layoutTextLastFontSize||tt!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${ft*this._devicePixelRatio}px ${tt}`,this._layoutTextLastFontSize=ft,this._layoutTextLastFontFamily=tt);const{width:ot}=this._layoutTextCtx.measureText(m.textContent);if(ot>0){const et=this._devicePixelRatio*o.canvasWidth/ot;this._enhanceTextSelection&&(o.scale=et),c=`scaleX(${et})`}}if(o.angle!==0&&(c=`rotate(${o.angle}deg) ${c}`),c.length>0&&(this._enhanceTextSelection&&(o.originalTransform=c),m.style.transform=c),o.hasText&&this._container.append(m),o.hasEOL){const tt=document.createElement("br");tt.setAttribute("role","presentation"),this._container.append(tt)}}_render(m=0){const o=(0,e.createPromiseCapability)();let c=Object.create(null);const tt=this._document.createElement("canvas");if(tt.height=tt.width=dt,this._layoutTextCtx=tt.getContext("2d",{alpha:!1}),this._textContent){const ft=this._textContent.items,ot=this._textContent.styles;this._processItems(ft,ot),o.resolve()}else if(this._textContentStream){const ft=()=>{this._reader.read().then(({value:ot,done:et})=>{if(et){o.resolve();return}Object.assign(c,ot.styles),this._processItems(ot.items,c),ft()},o.reject)};this._reader=this._textContentStream.getReader(),ft()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');o.promise.then(()=>{c=null,m?this._renderTimer=setTimeout(()=>{ut(this),this._renderTimer=null},m):ut(this)},this._capability.reject)}expandTextDivs(m=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(_(this),this._bounds=null);const o=[],c=[];for(let tt=0,ft=this._textDivs.length;tt<ft;tt++){const ot=this._textDivs[tt],et=this._textDivProperties.get(ot);et.hasText&&(m?(o.length=0,c.length=0,et.originalTransform&&o.push(et.originalTransform),et.paddingTop>0?(c.push(`${et.paddingTop}px`),o.push(`translateY(${-et.paddingTop}px)`)):c.push(0),et.paddingRight>0?c.push(`${et.paddingRight/et.scale}px`):c.push(0),et.paddingBottom>0?c.push(`${et.paddingBottom}px`):c.push(0),et.paddingLeft>0?(c.push(`${et.paddingLeft/et.scale}px`),o.push(`translateX(${-et.paddingLeft/et.scale}px)`)):c.push(0),ot.style.padding=c.join(" "),o.length&&(ot.style.transform=o.join(" "))):(ot.style.padding=null,ot.style.transform=et.originalTransform))}}}i.TextLayerRenderTask=g;function rt(it){const m=new g({textContent:it.textContent,textContentStream:it.textContentStream,container:it.container,viewport:it.viewport,textDivs:it.textDivs,textContentItemsStr:it.textContentItemsStr,enhanceTextSelection:it.enhanceTextSelection});return m._render(it.timeout),m}},(h,i,Y)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SVGGraphics=void 0;var e=Y(8),a=Y(1),ht=Y(3);let dt=class{constructor(){(0,a.unreachable)("Not implemented: SVGGraphics")}};i.SVGGraphics=dt;{let st=function(o){let c=[];const tt=[];for(const ft of o){if(ft.fn==="save"){c.push({fnId:92,fn:"group",items:[]}),tt.push(c),c=c.at(-1).items;continue}ft.fn==="restore"?c=tt.pop():c.push(ft)}return c},b=function(o){if(Number.isInteger(o))return o.toString();const c=o.toFixed(10);let tt=c.length-1;if(c[tt]!=="0")return c;do tt--;while(c[tt]==="0");return c.substring(0,c[tt]==="."?tt:tt+1)},j=function(o){if(o[4]===0&&o[5]===0){if(o[1]===0&&o[2]===0)return o[0]===1&&o[3]===1?"":`scale(${b(o[0])} ${b(o[3])})`;if(o[0]===o[3]&&o[1]===-o[2]){const c=Math.acos(o[0])*180/Math.PI;return`rotate(${b(c)})`}}else if(o[0]===1&&o[1]===0&&o[2]===0&&o[3]===1)return`translate(${b(o[4])} ${b(o[5])})`;return`matrix(${b(o[0])} ${b(o[1])} ${b(o[2])} ${b(o[3])} ${b(o[4])} ${b(o[5])})`};const lt={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},_t="http://www.w3.org/XML/1998/namespace",ut="http://www.w3.org/1999/xlink",at=["butt","round","square"],_=["miter","round","bevel"],s=function(o,c="",tt=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!tt)return URL.createObjectURL(new Blob([o],{type:c}));const ft="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let ot=`data:${c};base64,`;for(let et=0,gt=o.length;et<gt;et+=3){const Lt=o[et]&255,Bt=o[et+1]&255,Dt=o[et+2]&255,Ot=Lt>>2,Tt=(Lt&3)<<4|Bt>>4,Rt=et+1<gt?(Bt&15)<<2|Dt>>6:64,Ft=et+2<gt?Dt&63:64;ot+=ft[Ot]+ft[Tt]+ft[Rt]+ft[Ft]}return ot},f=function(){const o=new Uint8Array([137,80,78,71,13,10,26,10]),c=12,tt=new Int32Array(256);for(let Dt=0;Dt<256;Dt++){let Ot=Dt;for(let Tt=0;Tt<8;Tt++)Ot&1?Ot=3988292384^Ot>>1&2147483647:Ot=Ot>>1&2147483647;tt[Dt]=Ot}function ft(Dt,Ot,Tt){let Rt=-1;for(let Ft=Ot;Ft<Tt;Ft++){const jt=(Rt^Dt[Ft])&255,Ht=tt[jt];Rt=Rt>>>8^Ht}return Rt^-1}function ot(Dt,Ot,Tt,Rt){let Ft=Rt;const jt=Ot.length;Tt[Ft]=jt>>24&255,Tt[Ft+1]=jt>>16&255,Tt[Ft+2]=jt>>8&255,Tt[Ft+3]=jt&255,Ft+=4,Tt[Ft]=Dt.charCodeAt(0)&255,Tt[Ft+1]=Dt.charCodeAt(1)&255,Tt[Ft+2]=Dt.charCodeAt(2)&255,Tt[Ft+3]=Dt.charCodeAt(3)&255,Ft+=4,Tt.set(Ot,Ft),Ft+=Ot.length;const Ht=ft(Tt,Rt+4,Ft);Tt[Ft]=Ht>>24&255,Tt[Ft+1]=Ht>>16&255,Tt[Ft+2]=Ht>>8&255,Tt[Ft+3]=Ht&255}function et(Dt,Ot,Tt){let Rt=1,Ft=0;for(let jt=Ot;jt<Tt;++jt)Rt=(Rt+(Dt[jt]&255))%65521,Ft=(Ft+Rt)%65521;return Ft<<16|Rt}function gt(Dt){if(!ht.isNodeJS)return Lt(Dt);try{let Ot;parseInt(browser$1.versions.node)>=8?Ot=Dt:Ot=Buffer.from(Dt);const Tt=require$$5.deflateSync(Ot,{level:9});return Tt instanceof Uint8Array?Tt:new Uint8Array(Tt)}catch(Ot){(0,a.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Ot)}return Lt(Dt)}function Lt(Dt){let Ot=Dt.length;const Tt=65535,Rt=Math.ceil(Ot/Tt),Ft=new Uint8Array(2+Ot+Rt*5+4);let jt=0;Ft[jt++]=120,Ft[jt++]=156;let Ht=0;for(;Ot>Tt;)Ft[jt++]=0,Ft[jt++]=255,Ft[jt++]=255,Ft[jt++]=0,Ft[jt++]=0,Ft.set(Dt.subarray(Ht,Ht+Tt),jt),jt+=Tt,Ht+=Tt,Ot-=Tt;Ft[jt++]=1,Ft[jt++]=Ot&255,Ft[jt++]=Ot>>8&255,Ft[jt++]=~Ot&65535&255,Ft[jt++]=(~Ot&65535)>>8&255,Ft.set(Dt.subarray(Ht),jt),jt+=Dt.length-Ht;const te=et(Dt,0,Dt.length);return Ft[jt++]=te>>24&255,Ft[jt++]=te>>16&255,Ft[jt++]=te>>8&255,Ft[jt++]=te&255,Ft}function Bt(Dt,Ot,Tt,Rt){const Ft=Dt.width,jt=Dt.height;let Ht,te,Et;const $=Dt.data;switch(Ot){case a.ImageKind.GRAYSCALE_1BPP:te=0,Ht=1,Et=Ft+7>>3;break;case a.ImageKind.RGB_24BPP:te=2,Ht=8,Et=Ft*3;break;case a.ImageKind.RGBA_32BPP:te=6,Ht=8,Et=Ft*4;break;default:throw new Error("invalid format")}const k=new Uint8Array((1+Et)*jt);let pt=0,vt=0;for(let Z=0;Z<jt;++Z)k[pt++]=0,k.set($.subarray(vt,vt+Et),pt),vt+=Et,pt+=Et;if(Ot===a.ImageKind.GRAYSCALE_1BPP&&Rt){pt=0;for(let Z=0;Z<jt;Z++){pt++;for(let nt=0;nt<Et;nt++)k[pt++]^=255}}const At=new Uint8Array([Ft>>24&255,Ft>>16&255,Ft>>8&255,Ft&255,jt>>24&255,jt>>16&255,jt>>8&255,jt&255,Ht,te,0,0,0]),St=gt(k),kt=o.length+c*3+At.length+St.length,xt=new Uint8Array(kt);let d=0;return xt.set(o,d),d+=o.length,ot("IHDR",At,xt,d),d+=c+At.length,ot("IDATA",St,xt,d),d+=c+St.length,ot("IEND",new Uint8Array(0),xt,d),s(xt,"image/png",Tt)}return function(Ot,Tt,Rt){const Ft=Ot.kind===void 0?a.ImageKind.GRAYSCALE_1BPP:Ot.kind;return Bt(Ot,Ft,Tt,Rt)}}();class g{constructor(){this.fontSizeScale=1,this.fontWeight=lt.fontWeight,this.fontSize=0,this.textMatrix=a.IDENTITY_MATRIX,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=a.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=lt.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(c,tt){this.x=c,this.y=tt}}let rt=0,it=0,m=0;i.SVGGraphics=dt=class{constructor(o,c,tt=!1){(0,e.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new e.DOMSVGFactory,this.current=new g,this.transformMatrix=a.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=o,this.objs=c,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!tt,this._operatorIdMapping=[];for(const ft in a.OPS)this._operatorIdMapping[a.OPS[ft]]=ft}save(){this.transformStack.push(this.transformMatrix);const o=this.current;this.extraStack.push(o),this.current=o.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(o){this.save(),this.executeOpTree(o),this.restore()}loadDependencies(o){const c=o.fnArray,tt=o.argsArray;for(let ft=0,ot=c.length;ft<ot;ft++)if(c[ft]===a.OPS.dependency)for(const et of tt[ft]){const gt=et.startsWith("g_")?this.commonObjs:this.objs,Lt=new Promise(Bt=>{gt.get(et,Bt)});this.current.dependencies.push(Lt)}return Promise.all(this.current.dependencies)}transform(o,c,tt,ft,ot,et){const gt=[o,c,tt,ft,ot,et];this.transformMatrix=a.Util.transform(this.transformMatrix,gt),this.tgrp=null}getSVG(o,c){this.viewport=c;const tt=this._initialize(c);return this.loadDependencies(o).then(()=>(this.transformMatrix=a.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(o)),tt))}convertOpList(o){const c=this._operatorIdMapping,tt=o.argsArray,ft=o.fnArray,ot=[];for(let et=0,gt=ft.length;et<gt;et++){const Lt=ft[et];ot.push({fnId:Lt,fn:c[Lt],args:tt[et]})}return st(ot)}executeOpTree(o){for(const c of o){const tt=c.fn,ft=c.fnId,ot=c.args;switch(ft|0){case a.OPS.beginText:this.beginText();break;case a.OPS.dependency:break;case a.OPS.setLeading:this.setLeading(ot);break;case a.OPS.setLeadingMoveText:this.setLeadingMoveText(ot[0],ot[1]);break;case a.OPS.setFont:this.setFont(ot);break;case a.OPS.showText:this.showText(ot[0]);break;case a.OPS.showSpacedText:this.showText(ot[0]);break;case a.OPS.endText:this.endText();break;case a.OPS.moveText:this.moveText(ot[0],ot[1]);break;case a.OPS.setCharSpacing:this.setCharSpacing(ot[0]);break;case a.OPS.setWordSpacing:this.setWordSpacing(ot[0]);break;case a.OPS.setHScale:this.setHScale(ot[0]);break;case a.OPS.setTextMatrix:this.setTextMatrix(ot[0],ot[1],ot[2],ot[3],ot[4],ot[5]);break;case a.OPS.setTextRise:this.setTextRise(ot[0]);break;case a.OPS.setTextRenderingMode:this.setTextRenderingMode(ot[0]);break;case a.OPS.setLineWidth:this.setLineWidth(ot[0]);break;case a.OPS.setLineJoin:this.setLineJoin(ot[0]);break;case a.OPS.setLineCap:this.setLineCap(ot[0]);break;case a.OPS.setMiterLimit:this.setMiterLimit(ot[0]);break;case a.OPS.setFillRGBColor:this.setFillRGBColor(ot[0],ot[1],ot[2]);break;case a.OPS.setStrokeRGBColor:this.setStrokeRGBColor(ot[0],ot[1],ot[2]);break;case a.OPS.setStrokeColorN:this.setStrokeColorN(ot);break;case a.OPS.setFillColorN:this.setFillColorN(ot);break;case a.OPS.shadingFill:this.shadingFill(ot[0]);break;case a.OPS.setDash:this.setDash(ot[0],ot[1]);break;case a.OPS.setRenderingIntent:this.setRenderingIntent(ot[0]);break;case a.OPS.setFlatness:this.setFlatness(ot[0]);break;case a.OPS.setGState:this.setGState(ot[0]);break;case a.OPS.fill:this.fill();break;case a.OPS.eoFill:this.eoFill();break;case a.OPS.stroke:this.stroke();break;case a.OPS.fillStroke:this.fillStroke();break;case a.OPS.eoFillStroke:this.eoFillStroke();break;case a.OPS.clip:this.clip("nonzero");break;case a.OPS.eoClip:this.clip("evenodd");break;case a.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case a.OPS.paintImageXObject:this.paintImageXObject(ot[0]);break;case a.OPS.paintInlineImageXObject:this.paintInlineImageXObject(ot[0]);break;case a.OPS.paintImageMaskXObject:this.paintImageMaskXObject(ot[0]);break;case a.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(ot[0],ot[1]);break;case a.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case a.OPS.closePath:this.closePath();break;case a.OPS.closeStroke:this.closeStroke();break;case a.OPS.closeFillStroke:this.closeFillStroke();break;case a.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case a.OPS.nextLine:this.nextLine();break;case a.OPS.transform:this.transform(ot[0],ot[1],ot[2],ot[3],ot[4],ot[5]);break;case a.OPS.constructPath:this.constructPath(ot[0],ot[1]);break;case a.OPS.endPath:this.endPath();break;case 92:this.group(c.items);break;default:(0,a.warn)(`Unimplemented operator ${tt}`);break}}}setWordSpacing(o){this.current.wordSpacing=o}setCharSpacing(o){this.current.charSpacing=o}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(o,c,tt,ft,ot,et){const gt=this.current;gt.textMatrix=gt.lineMatrix=[o,c,tt,ft,ot,et],gt.textMatrixScale=Math.hypot(o,c),gt.x=gt.lineX=0,gt.y=gt.lineY=0,gt.xcoords=[],gt.ycoords=[],gt.tspan=this.svgFactory.createElement("svg:tspan"),gt.tspan.setAttributeNS(null,"font-family",gt.fontFamily),gt.tspan.setAttributeNS(null,"font-size",`${b(gt.fontSize)}px`),gt.tspan.setAttributeNS(null,"y",b(-gt.y)),gt.txtElement=this.svgFactory.createElement("svg:text"),gt.txtElement.append(gt.tspan)}beginText(){const o=this.current;o.x=o.lineX=0,o.y=o.lineY=0,o.textMatrix=a.IDENTITY_MATRIX,o.lineMatrix=a.IDENTITY_MATRIX,o.textMatrixScale=1,o.tspan=this.svgFactory.createElement("svg:tspan"),o.txtElement=this.svgFactory.createElement("svg:text"),o.txtgrp=this.svgFactory.createElement("svg:g"),o.xcoords=[],o.ycoords=[]}moveText(o,c){const tt=this.current;tt.x=tt.lineX+=o,tt.y=tt.lineY+=c,tt.xcoords=[],tt.ycoords=[],tt.tspan=this.svgFactory.createElement("svg:tspan"),tt.tspan.setAttributeNS(null,"font-family",tt.fontFamily),tt.tspan.setAttributeNS(null,"font-size",`${b(tt.fontSize)}px`),tt.tspan.setAttributeNS(null,"y",b(-tt.y))}showText(o){const c=this.current,tt=c.font,ft=c.fontSize;if(ft===0)return;const ot=c.fontSizeScale,et=c.charSpacing,gt=c.wordSpacing,Lt=c.fontDirection,Bt=c.textHScale*Lt,Dt=tt.vertical,Ot=Dt?1:-1,Tt=tt.defaultVMetrics,Rt=ft*c.fontMatrix[0];let Ft=0;for(const te of o){if(te===null){Ft+=Lt*gt;continue}else if(typeof te=="number"){Ft+=Ot*te*ft/1e3;continue}const Et=(te.isSpace?gt:0)+et,$=te.fontChar;let k,pt,vt=te.width;if(Dt){let St;const kt=te.vmetric||Tt;St=te.vmetric?kt[1]:vt*.5,St=-St*Rt;const xt=kt[2]*Rt;vt=kt?-kt[0]:vt,k=St/ot,pt=(Ft+xt)/ot}else k=Ft/ot,pt=0;(te.isInFont||tt.missingFile)&&(c.xcoords.push(c.x+k),Dt&&c.ycoords.push(-c.y+pt),c.tspan.textContent+=$);let At;Dt?At=vt*Rt-Et*Lt:At=vt*Rt+Et*Lt,Ft+=At}c.tspan.setAttributeNS(null,"x",c.xcoords.map(b).join(" ")),Dt?c.tspan.setAttributeNS(null,"y",c.ycoords.map(b).join(" ")):c.tspan.setAttributeNS(null,"y",b(-c.y)),Dt?c.y-=Ft:c.x+=Ft*Bt,c.tspan.setAttributeNS(null,"font-family",c.fontFamily),c.tspan.setAttributeNS(null,"font-size",`${b(c.fontSize)}px`),c.fontStyle!==lt.fontStyle&&c.tspan.setAttributeNS(null,"font-style",c.fontStyle),c.fontWeight!==lt.fontWeight&&c.tspan.setAttributeNS(null,"font-weight",c.fontWeight);const jt=c.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;if(jt===a.TextRenderingMode.FILL||jt===a.TextRenderingMode.FILL_STROKE?(c.fillColor!==lt.fillColor&&c.tspan.setAttributeNS(null,"fill",c.fillColor),c.fillAlpha<1&&c.tspan.setAttributeNS(null,"fill-opacity",c.fillAlpha)):c.textRenderingMode===a.TextRenderingMode.ADD_TO_PATH?c.tspan.setAttributeNS(null,"fill","transparent"):c.tspan.setAttributeNS(null,"fill","none"),jt===a.TextRenderingMode.STROKE||jt===a.TextRenderingMode.FILL_STROKE){const te=1/(c.textMatrixScale||1);this._setStrokeAttributes(c.tspan,te)}let Ht=c.textMatrix;c.textRise!==0&&(Ht=Ht.slice(),Ht[5]+=c.textRise),c.txtElement.setAttributeNS(null,"transform",`${j(Ht)} scale(${b(Bt)}, -1)`),c.txtElement.setAttributeNS(_t,"xml:space","preserve"),c.txtElement.append(c.tspan),c.txtgrp.append(c.txtElement),this._ensureTransformGroup().append(c.txtElement)}setLeadingMoveText(o,c){this.setLeading(-c),this.moveText(o,c)}addFontStyle(o){if(!o.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const c=s(o.data,o.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${o.loadedName}"; src: url(${c}); }
`}setFont(o){const c=this.current,tt=this.commonObjs.get(o[0]);let ft=o[1];c.font=tt,this.embedFonts&&!tt.missingFile&&!this.embeddedFonts[tt.loadedName]&&(this.addFontStyle(tt),this.embeddedFonts[tt.loadedName]=tt),c.fontMatrix=tt.fontMatrix||a.FONT_IDENTITY_MATRIX;let ot="normal";tt.black?ot="900":tt.bold&&(ot="bold");const et=tt.italic?"italic":"normal";ft<0?(ft=-ft,c.fontDirection=-1):c.fontDirection=1,c.fontSize=ft,c.fontFamily=tt.loadedName,c.fontWeight=ot,c.fontStyle=et,c.tspan=this.svgFactory.createElement("svg:tspan"),c.tspan.setAttributeNS(null,"y",b(-c.y)),c.xcoords=[],c.ycoords=[]}endText(){var c;const o=this.current;o.textRenderingMode&a.TextRenderingMode.ADD_TO_PATH_FLAG&&((c=o.txtElement)!=null&&c.hasChildNodes())&&(o.element=o.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(o){o>0&&(this.current.lineWidth=o)}setLineCap(o){this.current.lineCap=at[o]}setLineJoin(o){this.current.lineJoin=_[o]}setMiterLimit(o){this.current.miterLimit=o}setStrokeAlpha(o){this.current.strokeAlpha=o}setStrokeRGBColor(o,c,tt){this.current.strokeColor=a.Util.makeHexColor(o,c,tt)}setFillAlpha(o){this.current.fillAlpha=o}setFillRGBColor(o,c,tt){this.current.fillColor=a.Util.makeHexColor(o,c,tt),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(o){this.current.strokeColor=this._makeColorN_Pattern(o)}setFillColorN(o){this.current.fillColor=this._makeColorN_Pattern(o)}shadingFill(o){const c=this.viewport.width,tt=this.viewport.height,ft=a.Util.inverseTransform(this.transformMatrix),ot=a.Util.applyTransform([0,0],ft),et=a.Util.applyTransform([0,tt],ft),gt=a.Util.applyTransform([c,0],ft),Lt=a.Util.applyTransform([c,tt],ft),Bt=Math.min(ot[0],et[0],gt[0],Lt[0]),Dt=Math.min(ot[1],et[1],gt[1],Lt[1]),Ot=Math.max(ot[0],et[0],gt[0],Lt[0]),Tt=Math.max(ot[1],et[1],gt[1],Lt[1]),Rt=this.svgFactory.createElement("svg:rect");Rt.setAttributeNS(null,"x",Bt),Rt.setAttributeNS(null,"y",Dt),Rt.setAttributeNS(null,"width",Ot-Bt),Rt.setAttributeNS(null,"height",Tt-Dt),Rt.setAttributeNS(null,"fill",this._makeShadingPattern(o)),this.current.fillAlpha<1&&Rt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Rt)}_makeColorN_Pattern(o){return o[0]==="TilingPattern"?this._makeTilingPattern(o):this._makeShadingPattern(o)}_makeTilingPattern(o){const c=o[1],tt=o[2],ft=o[3]||a.IDENTITY_MATRIX,[ot,et,gt,Lt]=o[4],Bt=o[5],Dt=o[6],Ot=o[7],Tt=`shading${m++}`,[Rt,Ft,jt,Ht]=a.Util.normalizeRect([...a.Util.applyTransform([ot,et],ft),...a.Util.applyTransform([gt,Lt],ft)]),[te,Et]=a.Util.singularValueDecompose2dScale(ft),$=Bt*te,k=Dt*Et,pt=this.svgFactory.createElement("svg:pattern");pt.setAttributeNS(null,"id",Tt),pt.setAttributeNS(null,"patternUnits","userSpaceOnUse"),pt.setAttributeNS(null,"width",$),pt.setAttributeNS(null,"height",k),pt.setAttributeNS(null,"x",`${Rt}`),pt.setAttributeNS(null,"y",`${Ft}`);const vt=this.svg,At=this.transformMatrix,St=this.current.fillColor,kt=this.current.strokeColor,xt=this.svgFactory.create(jt-Rt,Ht-Ft);if(this.svg=xt,this.transformMatrix=ft,Ot===2){const d=a.Util.makeHexColor(...c);this.current.fillColor=d,this.current.strokeColor=d}return this.executeOpTree(this.convertOpList(tt)),this.svg=vt,this.transformMatrix=At,this.current.fillColor=St,this.current.strokeColor=kt,pt.append(xt.childNodes[0]),this.defs.append(pt),`url(#${Tt})`}_makeShadingPattern(o){switch(typeof o=="string"&&(o=this.objs.get(o)),o[0]){case"RadialAxial":const c=`shading${m++}`,tt=o[3];let ft;switch(o[1]){case"axial":const ot=o[4],et=o[5];ft=this.svgFactory.createElement("svg:linearGradient"),ft.setAttributeNS(null,"id",c),ft.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),ft.setAttributeNS(null,"x1",ot[0]),ft.setAttributeNS(null,"y1",ot[1]),ft.setAttributeNS(null,"x2",et[0]),ft.setAttributeNS(null,"y2",et[1]);break;case"radial":const gt=o[4],Lt=o[5],Bt=o[6],Dt=o[7];ft=this.svgFactory.createElement("svg:radialGradient"),ft.setAttributeNS(null,"id",c),ft.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),ft.setAttributeNS(null,"cx",Lt[0]),ft.setAttributeNS(null,"cy",Lt[1]),ft.setAttributeNS(null,"r",Dt),ft.setAttributeNS(null,"fx",gt[0]),ft.setAttributeNS(null,"fy",gt[1]),ft.setAttributeNS(null,"fr",Bt);break;default:throw new Error(`Unknown RadialAxial type: ${o[1]}`)}for(const ot of tt){const et=this.svgFactory.createElement("svg:stop");et.setAttributeNS(null,"offset",ot[0]),et.setAttributeNS(null,"stop-color",ot[1]),ft.append(et)}return this.defs.append(ft),`url(#${c})`;case"Mesh":return(0,a.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${o[0]}`)}}setDash(o,c){this.current.dashArray=o,this.current.dashPhase=c}constructPath(o,c){const tt=this.current;let ft=tt.x,ot=tt.y,et=[],gt=0;for(const Lt of o)switch(Lt|0){case a.OPS.rectangle:ft=c[gt++],ot=c[gt++];const Bt=c[gt++],Dt=c[gt++],Ot=ft+Bt,Tt=ot+Dt;et.push("M",b(ft),b(ot),"L",b(Ot),b(ot),"L",b(Ot),b(Tt),"L",b(ft),b(Tt),"Z");break;case a.OPS.moveTo:ft=c[gt++],ot=c[gt++],et.push("M",b(ft),b(ot));break;case a.OPS.lineTo:ft=c[gt++],ot=c[gt++],et.push("L",b(ft),b(ot));break;case a.OPS.curveTo:ft=c[gt+4],ot=c[gt+5],et.push("C",b(c[gt]),b(c[gt+1]),b(c[gt+2]),b(c[gt+3]),b(ft),b(ot)),gt+=6;break;case a.OPS.curveTo2:et.push("C",b(ft),b(ot),b(c[gt]),b(c[gt+1]),b(c[gt+2]),b(c[gt+3])),ft=c[gt+2],ot=c[gt+3],gt+=4;break;case a.OPS.curveTo3:ft=c[gt+2],ot=c[gt+3],et.push("C",b(c[gt]),b(c[gt+1]),b(ft),b(ot),b(ft),b(ot)),gt+=4;break;case a.OPS.closePath:et.push("Z");break}et=et.join(" "),tt.path&&o.length>0&&o[0]!==a.OPS.rectangle&&o[0]!==a.OPS.moveTo?et=tt.path.getAttributeNS(null,"d")+et:(tt.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(tt.path)),tt.path.setAttributeNS(null,"d",et),tt.path.setAttributeNS(null,"fill","none"),tt.element=tt.path,tt.setCurrentPoint(ft,ot)}endPath(){const o=this.current;if(o.path=null,!this.pendingClip)return;if(!o.element){this.pendingClip=null;return}const c=`clippath${rt++}`,tt=this.svgFactory.createElement("svg:clipPath");tt.setAttributeNS(null,"id",c),tt.setAttributeNS(null,"transform",j(this.transformMatrix));const ft=o.element.cloneNode(!0);if(this.pendingClip==="evenodd"?ft.setAttributeNS(null,"clip-rule","evenodd"):ft.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,tt.append(ft),this.defs.append(tt),o.activeClipUrl){o.clipGroup=null;for(const ot of this.extraStack)ot.clipGroup=null;tt.setAttributeNS(null,"clip-path",o.activeClipUrl)}o.activeClipUrl=`url(#${c})`,this.tgrp=null}clip(o){this.pendingClip=o}closePath(){const o=this.current;if(o.path){const c=`${o.path.getAttributeNS(null,"d")}Z`;o.path.setAttributeNS(null,"d",c)}}setLeading(o){this.current.leading=-o}setTextRise(o){this.current.textRise=o}setTextRenderingMode(o){this.current.textRenderingMode=o}setHScale(o){this.current.textHScale=o/100}setRenderingIntent(o){}setFlatness(o){}setGState(o){for(const[c,tt]of o)switch(c){case"LW":this.setLineWidth(tt);break;case"LC":this.setLineCap(tt);break;case"LJ":this.setLineJoin(tt);break;case"ML":this.setMiterLimit(tt);break;case"D":this.setDash(tt[0],tt[1]);break;case"RI":this.setRenderingIntent(tt);break;case"FL":this.setFlatness(tt);break;case"Font":this.setFont(tt);break;case"CA":this.setStrokeAlpha(tt);break;case"ca":this.setFillAlpha(tt);break;default:(0,a.warn)(`Unimplemented graphic state operator ${c}`);break}}fill(){const o=this.current;o.element&&(o.element.setAttributeNS(null,"fill",o.fillColor),o.element.setAttributeNS(null,"fill-opacity",o.fillAlpha),this.endPath())}stroke(){const o=this.current;o.element&&(this._setStrokeAttributes(o.element),o.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(o,c=1){const tt=this.current;let ft=tt.dashArray;c!==1&&ft.length>0&&(ft=ft.map(function(ot){return c*ot})),o.setAttributeNS(null,"stroke",tt.strokeColor),o.setAttributeNS(null,"stroke-opacity",tt.strokeAlpha),o.setAttributeNS(null,"stroke-miterlimit",b(tt.miterLimit)),o.setAttributeNS(null,"stroke-linecap",tt.lineCap),o.setAttributeNS(null,"stroke-linejoin",tt.lineJoin),o.setAttributeNS(null,"stroke-width",b(c*tt.lineWidth)+"px"),o.setAttributeNS(null,"stroke-dasharray",ft.map(b).join(" ")),o.setAttributeNS(null,"stroke-dashoffset",b(c*tt.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"width","1px"),o.setAttributeNS(null,"height","1px"),o.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(o)}paintImageXObject(o){const c=o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o);if(!c){(0,a.warn)(`Dependent image with object ID ${o} is not ready yet`);return}this.paintInlineImageXObject(c)}paintInlineImageXObject(o,c){const tt=o.width,ft=o.height,ot=f(o,this.forceDataSchema,!!c),et=this.svgFactory.createElement("svg:rect");et.setAttributeNS(null,"x","0"),et.setAttributeNS(null,"y","0"),et.setAttributeNS(null,"width",b(tt)),et.setAttributeNS(null,"height",b(ft)),this.current.element=et,this.clip("nonzero");const gt=this.svgFactory.createElement("svg:image");gt.setAttributeNS(ut,"xlink:href",ot),gt.setAttributeNS(null,"x","0"),gt.setAttributeNS(null,"y",b(-ft)),gt.setAttributeNS(null,"width",b(tt)+"px"),gt.setAttributeNS(null,"height",b(ft)+"px"),gt.setAttributeNS(null,"transform",`scale(${b(1/tt)} ${b(-1/ft)})`),c?c.append(gt):this._ensureTransformGroup().append(gt)}paintImageMaskXObject(o){const c=this.current,tt=o.width,ft=o.height,ot=c.fillColor;c.maskId=`mask${it++}`;const et=this.svgFactory.createElement("svg:mask");et.setAttributeNS(null,"id",c.maskId);const gt=this.svgFactory.createElement("svg:rect");gt.setAttributeNS(null,"x","0"),gt.setAttributeNS(null,"y","0"),gt.setAttributeNS(null,"width",b(tt)),gt.setAttributeNS(null,"height",b(ft)),gt.setAttributeNS(null,"fill",ot),gt.setAttributeNS(null,"mask",`url(#${c.maskId})`),this.defs.append(et),this._ensureTransformGroup().append(gt),this.paintInlineImageXObject(o,et)}paintFormXObjectBegin(o,c){if(Array.isArray(o)&&o.length===6&&this.transform(o[0],o[1],o[2],o[3],o[4],o[5]),c){const tt=c[2]-c[0],ft=c[3]-c[1],ot=this.svgFactory.createElement("svg:rect");ot.setAttributeNS(null,"x",c[0]),ot.setAttributeNS(null,"y",c[1]),ot.setAttributeNS(null,"width",b(tt)),ot.setAttributeNS(null,"height",b(ft)),this.current.element=ot,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(o){const c=this.svgFactory.create(o.width,o.height),tt=this.svgFactory.createElement("svg:defs");c.append(tt),this.defs=tt;const ft=this.svgFactory.createElement("svg:g");return ft.setAttributeNS(null,"transform",j(o.transform)),c.append(ft),this.svg=ft,c}_ensureClipGroup(){if(!this.current.clipGroup){const o=this.svgFactory.createElement("svg:g");o.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(o),this.current.clipGroup=o}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",j(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(h,i,Y)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFNodeStream=void 0;var e=Y(1),a=Y(33);const ht=require$$5,dt=require$$5,st=require$$5,b=require$$5,j=/^file:\/\/\/[a-zA-Z]:\//;function lt(it){const m=b.parse(it);return m.protocol==="file:"||m.host?m:/^[a-z]:[/\\]/i.test(it)?b.parse(`file:///${it}`):(m.host||(m.protocol="file:"),m)}class _t{constructor(m){this.source=m,this.url=lt(m.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&m.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var m;return((m=this._fullRequestReader)==null?void 0:m._loaded)??0}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new g(this):new s(this),this._fullRequestReader}getRangeReader(m,o){if(o<=this._progressiveDataLength)return null;const c=this.isFsUrl?new rt(this,m,o):new f(this,m,o);return this._rangeRequestReaders.push(c),c}cancelAllRequests(m){this._fullRequestReader&&this._fullRequestReader.cancel(m);for(const o of this._rangeRequestReaders.slice(0))o.cancel(m)}}i.PDFNodeStream=_t;class ut{constructor(m){this._url=m.url,this._done=!1,this._storedError=null,this.onProgress=null;const o=m.source;this._contentLength=o.length,this._loaded=0,this._filename=null,this._disableRange=o.disableRange||!1,this._rangeChunkSize=o.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!o.disableStream,this._isRangeSupported=!o.disableRange,this._readableStream=null,this._readCapability=(0,e.createPromiseCapability)(),this._headersCapability=(0,e.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const m=this._readableStream.read();return m===null?(this._readCapability=(0,e.createPromiseCapability)(),this.read()):(this._loaded+=m.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(m).buffer,done:!1})}cancel(m){if(!this._readableStream){this._error(m);return}this._readableStream.destroy(m)}_error(m){this._storedError=m,this._readCapability.resolve()}_setReadableStream(m){this._readableStream=m,m.on("readable",()=>{this._readCapability.resolve()}),m.on("end",()=>{m.destroy(),this._done=!0,this._readCapability.resolve()}),m.on("error",o=>{this._error(o)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new e.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class at{constructor(m){this._url=m.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,e.createPromiseCapability)();const o=m.source;this._isStreamingSupported=!o.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const m=this._readableStream.read();return m===null?(this._readCapability=(0,e.createPromiseCapability)(),this.read()):(this._loaded+=m.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(m).buffer,done:!1})}cancel(m){if(!this._readableStream){this._error(m);return}this._readableStream.destroy(m)}_error(m){this._storedError=m,this._readCapability.resolve()}_setReadableStream(m){this._readableStream=m,m.on("readable",()=>{this._readCapability.resolve()}),m.on("end",()=>{m.destroy(),this._done=!0,this._readCapability.resolve()}),m.on("error",o=>{this._error(o)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function _(it,m){return{protocol:it.protocol,auth:it.auth,host:it.hostname,port:it.port,path:it.path,method:"GET",headers:m}}class s extends ut{constructor(m){super(m);const o=c=>{if(c.statusCode===404){const et=new e.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=et,this._headersCapability.reject(et);return}this._headersCapability.resolve(),this._setReadableStream(c);const tt=et=>this._readableStream.headers[et.toLowerCase()],{allowRangeRequests:ft,suggestedLength:ot}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:tt,isHttp:m.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=ft,this._contentLength=ot||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(tt)};this._request=null,this._url.protocol==="http:"?this._request=dt.request(_(this._url,m.httpHeaders),o):this._request=st.request(_(this._url,m.httpHeaders),o),this._request.on("error",c=>{this._storedError=c,this._headersCapability.reject(c)}),this._request.end()}}class f extends at{constructor(m,o,c){super(m),this._httpHeaders={};for(const ft in m.httpHeaders){const ot=m.httpHeaders[ft];typeof ot>"u"||(this._httpHeaders[ft]=ot)}this._httpHeaders.Range=`bytes=${o}-${c-1}`;const tt=ft=>{if(ft.statusCode===404){const ot=new e.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=ot;return}this._setReadableStream(ft)};this._request=null,this._url.protocol==="http:"?this._request=dt.request(_(this._url,this._httpHeaders),tt):this._request=st.request(_(this._url,this._httpHeaders),tt),this._request.on("error",ft=>{this._storedError=ft}),this._request.end()}}class g extends ut{constructor(m){super(m);let o=decodeURIComponent(this._url.path);j.test(this._url.href)&&(o=o.replace(/^\//,"")),ht.lstat(o,(c,tt)=>{if(c){c.code==="ENOENT"&&(c=new e.MissingPDFException(`Missing PDF "${o}".`)),this._storedError=c,this._headersCapability.reject(c);return}this._contentLength=tt.size,this._setReadableStream(ht.createReadStream(o)),this._headersCapability.resolve()})}}class rt extends at{constructor(m,o,c){super(m);let tt=decodeURIComponent(this._url.path);j.test(this._url.href)&&(tt=tt.replace(/^\//,"")),this._setReadableStream(ht.createReadStream(tt,{start:o,end:c-1}))}}},(h,i,Y)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createResponseStatusError=b,i.extractFilenameFromHeader=st,i.validateRangeRequestCapabilities=dt,i.validateResponseStatus=j;var e=Y(1),a=Y(34),ht=Y(8);function dt({getResponseHeader:lt,isHttp:_t,rangeChunkSize:ut,disableRange:at}){const _={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(lt("Content-Length"),10);return!Number.isInteger(s)||(_.suggestedLength=s,s<=2*ut)||at||!_t||lt("Accept-Ranges")!=="bytes"||(lt("Content-Encoding")||"identity")!=="identity"||(_.allowRangeRequests=!0),_}function st(lt){const _t=lt("Content-Disposition");if(_t){let ut=(0,a.getFilenameFromContentDispositionHeader)(_t);if(ut.includes("%"))try{ut=decodeURIComponent(ut)}catch{}if((0,ht.isPdfFile)(ut))return ut}return null}function b(lt,_t){return lt===404||lt===0&&_t.startsWith("file:")?new e.MissingPDFException('Missing PDF "'+_t+'".'):new e.UnexpectedResponseException(`Unexpected server response (${lt}) while retrieving PDF "${_t}".`,lt)}function j(lt){return lt===200||lt===206}},(h,i,Y)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getFilenameFromContentDispositionHeader=a;var e=Y(1);function a(ht){let dt=!0,st=b("filename\\*","i").exec(ht);if(st){st=st[1];let s=ut(st);return s=unescape(s),s=at(s),s=_(s),lt(s)}if(st=_t(ht),st){const s=_(st);return lt(s)}if(st=b("filename","i").exec(ht),st){st=st[1];let s=ut(st);return s=_(s),lt(s)}function b(s,f){return new RegExp("(?:^|;)\\s*"+s+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function j(s,f){if(s){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const g=new TextDecoder(s,{fatal:!0}),rt=(0,e.stringToBytes)(f);f=g.decode(rt),dt=!1}catch{}}return f}function lt(s){return dt&&/[\x80-\xff]/.test(s)&&(s=j("utf-8",s),dt&&(s=j("iso-8859-1",s))),s}function _t(s){const f=[];let g;const rt=b("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(g=rt.exec(s))!==null;){let[,m,o,c]=g;if(m=parseInt(m,10),m in f){if(m===0)break;continue}f[m]=[o,c]}const it=[];for(let m=0;m<f.length&&m in f;++m){let[o,c]=f[m];c=ut(c),o&&(c=unescape(c),m===0&&(c=at(c))),it.push(c)}return it.join("")}function ut(s){if(s.startsWith('"')){const f=s.slice(1).split('\\"');for(let g=0;g<f.length;++g){const rt=f[g].indexOf('"');rt!==-1&&(f[g]=f[g].slice(0,rt),f.length=g+1),f[g]=f[g].replace(/\\(.)/g,"$1")}s=f.join('"')}return s}function at(s){const f=s.indexOf("'");if(f===-1)return s;const g=s.slice(0,f),it=s.slice(f+1).replace(/^[^']*'/,"");return j(g,it)}function _(s){return!s.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(s)?s:s.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,g,rt,it){if(rt==="q"||rt==="Q")return it=it.replace(/_/g," "),it=it.replace(/=([0-9a-fA-F]{2})/g,function(m,o){return String.fromCharCode(parseInt(o,16))}),j(g,it);try{it=atob(it)}catch{}return j(g,it)})}return""}},(h,i,Y)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFNetworkStream=void 0;var e=Y(1),a=Y(33);const ht=200,dt=206;function st(ut){const at=ut.response;return typeof at!="string"?at:(0,e.stringToBytes)(at).buffer}class b{constructor(at,_={}){this.url=at,this.isHttp=/^https?:/i.test(at),this.httpHeaders=this.isHttp&&_.httpHeaders||Object.create(null),this.withCredentials=_.withCredentials||!1,this.getXhr=_.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(at,_,s){const f={begin:at,end:_};for(const g in s)f[g]=s[g];return this.request(f)}requestFull(at){return this.request(at)}request(at){const _=this.getXhr(),s=this.currXhrId++,f=this.pendingRequests[s]={xhr:_};_.open("GET",this.url),_.withCredentials=this.withCredentials;for(const g in this.httpHeaders){const rt=this.httpHeaders[g];typeof rt>"u"||_.setRequestHeader(g,rt)}return this.isHttp&&"begin"in at&&"end"in at?(_.setRequestHeader("Range",`bytes=${at.begin}-${at.end-1}`),f.expectedStatus=dt):f.expectedStatus=ht,_.responseType="arraybuffer",at.onError&&(_.onerror=function(g){at.onError(_.status)}),_.onreadystatechange=this.onStateChange.bind(this,s),_.onprogress=this.onProgress.bind(this,s),f.onHeadersReceived=at.onHeadersReceived,f.onDone=at.onDone,f.onError=at.onError,f.onProgress=at.onProgress,_.send(null),s}onProgress(at,_){var f;const s=this.pendingRequests[at];s&&((f=s.onProgress)==null||f.call(s,_))}onStateChange(at,_){var m,o,c;const s=this.pendingRequests[at];if(!s)return;const f=s.xhr;if(f.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),f.readyState!==4||!(at in this.pendingRequests))return;if(delete this.pendingRequests[at],f.status===0&&this.isHttp){(m=s.onError)==null||m.call(s,f.status);return}const g=f.status||ht;if(!(g===ht&&s.expectedStatus===dt)&&g!==s.expectedStatus){(o=s.onError)==null||o.call(s,f.status);return}const it=st(f);if(g===dt){const tt=f.getResponseHeader("Content-Range"),ft=/bytes (\d+)-(\d+)\/(\d+)/.exec(tt);s.onDone({begin:parseInt(ft[1],10),chunk:it})}else it?s.onDone({begin:0,chunk:it}):(c=s.onError)==null||c.call(s,f.status)}getRequestXhr(at){return this.pendingRequests[at].xhr}isPendingRequest(at){return at in this.pendingRequests}abortRequest(at){const _=this.pendingRequests[at].xhr;delete this.pendingRequests[at],_.abort()}}class j{constructor(at){this._source=at,this._manager=new b(at.url,{httpHeaders:at.httpHeaders,withCredentials:at.withCredentials}),this._rangeChunkSize=at.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(at){const _=this._rangeRequestReaders.indexOf(at);_>=0&&this._rangeRequestReaders.splice(_,1)}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new lt(this._manager,this._source),this._fullRequestReader}getRangeReader(at,_){const s=new _t(this._manager,at,_);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(at){var _;(_=this._fullRequestReader)==null||_.cancel(at);for(const s of this._rangeRequestReaders.slice(0))s.cancel(at)}}i.PDFNetworkStream=j;class lt{constructor(at,_){this._manager=at;const s={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=_.url,this._fullRequestId=at.requestFull(s),this._headersReceivedCapability=(0,e.createPromiseCapability)(),this._disableRange=_.disableRange||!1,this._contentLength=_.length,this._rangeChunkSize=_.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const at=this._fullRequestId,_=this._manager.getRequestXhr(at),s=rt=>_.getResponseHeader(rt),{allowRangeRequests:f,suggestedLength:g}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});f&&(this._isRangeSupported=!0),this._contentLength=g||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(s),this._isRangeSupported&&this._manager.abortRequest(at),this._headersReceivedCapability.resolve()}_onDone(at){if(at&&(this._requests.length>0?this._requests.shift().resolve({value:at.chunk,done:!1}):this._cachedChunks.push(at.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(at){this._storedError=(0,a.createResponseStatusError)(at,this._url),this._headersReceivedCapability.reject(this._storedError);for(const _ of this._requests)_.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(at){var _;(_=this.onProgress)==null||_.call(this,{loaded:at.loaded,total:at.lengthComputable?at.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const at=(0,e.createPromiseCapability)();return this._requests.push(at),at.promise}cancel(at){this._done=!0,this._headersReceivedCapability.reject(at);for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class _t{constructor(at,_,s){this._manager=at;const f={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=at.url,this._requestId=at.requestRange(_,s,f),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var at;(at=this.onClosed)==null||at.call(this,this)}_onDone(at){const _=at.chunk;this._requests.length>0?this._requests.shift().resolve({value:_,done:!1}):this._queuedChunk=_,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(at){this._storedError=(0,a.createResponseStatusError)(at,this._url);for(const _ of this._requests)_.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(at){var _;this.isStreamingSupported||(_=this.onProgress)==null||_.call(this,{loaded:at.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const _=this._queuedChunk;return this._queuedChunk=null,{value:_,done:!1}}if(this._done)return{value:void 0,done:!0};const at=(0,e.createPromiseCapability)();return this._requests.push(at),at.promise}cancel(at){this._done=!0;for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(h,i,Y)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFFetchStream=void 0;var e=Y(1),a=Y(33);function ht(lt,_t,ut){return{method:"GET",headers:lt,signal:ut.signal,mode:"cors",credentials:_t?"include":"same-origin",redirect:"follow"}}function dt(lt){const _t=new Headers;for(const ut in lt){const at=lt[ut];typeof at>"u"||_t.append(ut,at)}return _t}class st{constructor(_t){this.source=_t,this.isHttp=/^https?:/i.test(_t.url),this.httpHeaders=this.isHttp&&_t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var _t;return((_t=this._fullRequestReader)==null?void 0:_t._loaded)??0}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new b(this),this._fullRequestReader}getRangeReader(_t,ut){if(ut<=this._progressiveDataLength)return null;const at=new j(this,_t,ut);return this._rangeRequestReaders.push(at),at}cancelAllRequests(_t){this._fullRequestReader&&this._fullRequestReader.cancel(_t);for(const ut of this._rangeRequestReaders.slice(0))ut.cancel(_t)}}i.PDFFetchStream=st;class b{constructor(_t){this._stream=_t,this._reader=null,this._loaded=0,this._filename=null;const ut=_t.source;this._withCredentials=ut.withCredentials||!1,this._contentLength=ut.length,this._headersCapability=(0,e.createPromiseCapability)(),this._disableRange=ut.disableRange||!1,this._rangeChunkSize=ut.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!ut.disableStream,this._isRangeSupported=!ut.disableRange,this._headers=dt(this._stream.httpHeaders);const at=ut.url;fetch(at,ht(this._headers,this._withCredentials,this._abortController)).then(_=>{if(!(0,a.validateResponseStatus)(_.status))throw(0,a.createResponseStatusError)(_.status,at);this._reader=_.body.getReader(),this._headersCapability.resolve();const s=rt=>_.headers.get(rt),{allowRangeRequests:f,suggestedLength:g}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:s,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=f,this._contentLength=g||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(s),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new e.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:_t,done:ut}=await this._reader.read();return ut?{value:_t,done:ut}:(this._loaded+=_t.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(_t).buffer,done:!1})}cancel(_t){this._reader&&this._reader.cancel(_t),this._abortController.abort()}}class j{constructor(_t,ut,at){this._stream=_t,this._reader=null,this._loaded=0;const _=_t.source;this._withCredentials=_.withCredentials||!1,this._readCapability=(0,e.createPromiseCapability)(),this._isStreamingSupported=!_.disableStream,this._abortController=new AbortController,this._headers=dt(this._stream.httpHeaders),this._headers.append("Range",`bytes=${ut}-${at-1}`);const s=_.url;fetch(s,ht(this._headers,this._withCredentials,this._abortController)).then(f=>{if(!(0,a.validateResponseStatus)(f.status))throw(0,a.createResponseStatusError)(f.status,s);this._readCapability.resolve(),this._reader=f.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:_t,done:ut}=await this._reader.read();return ut?{value:_t,done:ut}:(this._loaded+=_t.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(_t).buffer,done:!1})}cancel(_t){this._reader&&this._reader.cancel(_t),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(h){var i=__webpack_module_cache__[h];if(i!==void 0)return i.exports;var Y=__webpack_module_cache__[h]={exports:{}};return __webpack_modules__[h](Y,Y.exports,__w_pdfjs_require__),Y.exports}var __webpack_exports__={};return(()=>{var h=__webpack_exports__;Object.defineProperty(h,"__esModule",{value:!0}),Object.defineProperty(h,"AnnotationEditorLayer",{enumerable:!0,get:function(){return a.AnnotationEditorLayer}}),Object.defineProperty(h,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return i.AnnotationEditorParamsType}}),Object.defineProperty(h,"AnnotationEditorType",{enumerable:!0,get:function(){return i.AnnotationEditorType}}),Object.defineProperty(h,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return ht.AnnotationEditorUIManager}}),Object.defineProperty(h,"AnnotationLayer",{enumerable:!0,get:function(){return dt.AnnotationLayer}}),Object.defineProperty(h,"AnnotationMode",{enumerable:!0,get:function(){return i.AnnotationMode}}),Object.defineProperty(h,"CMapCompressionType",{enumerable:!0,get:function(){return i.CMapCompressionType}}),Object.defineProperty(h,"GlobalWorkerOptions",{enumerable:!0,get:function(){return st.GlobalWorkerOptions}}),Object.defineProperty(h,"InvalidPDFException",{enumerable:!0,get:function(){return i.InvalidPDFException}}),Object.defineProperty(h,"LoopbackPort",{enumerable:!0,get:function(){return Y.LoopbackPort}}),Object.defineProperty(h,"MissingPDFException",{enumerable:!0,get:function(){return i.MissingPDFException}}),Object.defineProperty(h,"OPS",{enumerable:!0,get:function(){return i.OPS}}),Object.defineProperty(h,"PDFDataRangeTransport",{enumerable:!0,get:function(){return Y.PDFDataRangeTransport}}),Object.defineProperty(h,"PDFDateString",{enumerable:!0,get:function(){return e.PDFDateString}}),Object.defineProperty(h,"PDFWorker",{enumerable:!0,get:function(){return Y.PDFWorker}}),Object.defineProperty(h,"PasswordResponses",{enumerable:!0,get:function(){return i.PasswordResponses}}),Object.defineProperty(h,"PermissionFlag",{enumerable:!0,get:function(){return i.PermissionFlag}}),Object.defineProperty(h,"PixelsPerInch",{enumerable:!0,get:function(){return e.PixelsPerInch}}),Object.defineProperty(h,"RenderingCancelledException",{enumerable:!0,get:function(){return e.RenderingCancelledException}}),Object.defineProperty(h,"SVGGraphics",{enumerable:!0,get:function(){return lt.SVGGraphics}}),Object.defineProperty(h,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return i.UNSUPPORTED_FEATURES}}),Object.defineProperty(h,"UnexpectedResponseException",{enumerable:!0,get:function(){return i.UnexpectedResponseException}}),Object.defineProperty(h,"Util",{enumerable:!0,get:function(){return i.Util}}),Object.defineProperty(h,"VerbosityLevel",{enumerable:!0,get:function(){return i.VerbosityLevel}}),Object.defineProperty(h,"XfaLayer",{enumerable:!0,get:function(){return _t.XfaLayer}}),Object.defineProperty(h,"build",{enumerable:!0,get:function(){return Y.build}}),Object.defineProperty(h,"createPromiseCapability",{enumerable:!0,get:function(){return i.createPromiseCapability}}),Object.defineProperty(h,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return i.createValidAbsoluteUrl}}),Object.defineProperty(h,"getDocument",{enumerable:!0,get:function(){return Y.getDocument}}),Object.defineProperty(h,"getFilenameFromUrl",{enumerable:!0,get:function(){return e.getFilenameFromUrl}}),Object.defineProperty(h,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return e.getPdfFilenameFromUrl}}),Object.defineProperty(h,"getXfaPageViewport",{enumerable:!0,get:function(){return e.getXfaPageViewport}}),Object.defineProperty(h,"isPdfFile",{enumerable:!0,get:function(){return e.isPdfFile}}),Object.defineProperty(h,"loadScript",{enumerable:!0,get:function(){return e.loadScript}}),Object.defineProperty(h,"renderTextLayer",{enumerable:!0,get:function(){return j.renderTextLayer}}),Object.defineProperty(h,"shadow",{enumerable:!0,get:function(){return i.shadow}}),Object.defineProperty(h,"version",{enumerable:!0,get:function(){return Y.version}});var i=__w_pdfjs_require__(1),Y=__w_pdfjs_require__(4),e=__w_pdfjs_require__(8),a=__w_pdfjs_require__(22),ht=__w_pdfjs_require__(7),dt=__w_pdfjs_require__(27),st=__w_pdfjs_require__(15),b=__w_pdfjs_require__(3),j=__w_pdfjs_require__(30),lt=__w_pdfjs_require__(31),_t=__w_pdfjs_require__(29);if(b.isNodeJS){const{PDFNodeStream:ut}=__w_pdfjs_require__(32);(0,Y.setPDFNetworkStreamFactory)(at=>new ut(at))}else{const{PDFNetworkStream:ut}=__w_pdfjs_require__(35),{PDFFetchStream:at}=__w_pdfjs_require__(36);(0,Y.setPDFNetworkStreamFactory)(_=>(0,e.isValidFetchUrl)(_.url)?new at(_):new ut(_))}})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;function _extends(){return _extends=Object.assign?Object.assign.bind():function(h){for(var i=1;i<arguments.length;i++){var Y=arguments[i];for(var e in Y)Object.prototype.hasOwnProperty.call(Y,e)&&(h[e]=Y[e])}return h},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(h,i){if(h==null)return{};var Y={};for(var e in h)if(Object.prototype.hasOwnProperty.call(h,e)){if(i.indexOf(e)>=0)continue;Y[e]=h[e]}return Y}function _objectWithoutProperties(h,i){if(h==null)return{};var Y=_objectWithoutPropertiesLoose(h,i),e,a;if(Object.getOwnPropertySymbols){var ht=Object.getOwnPropertySymbols(h);for(a=0;a<ht.length;a++)e=ht[a],!(i.indexOf(e)>=0)&&Object.prototype.propertyIsEnumerable.call(h,e)&&(Y[e]=h[e])}return Y}function _typeof(h){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof(h)}function _classCallCheck(h,i){if(!(h instanceof i))throw new TypeError("Cannot call a class as a function")}function toPrimitive(h,i){if(_typeof(h)!="object"||!h)return h;var Y=h[Symbol.toPrimitive];if(Y!==void 0){var e=Y.call(h,i||"default");if(_typeof(e)!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(h)}function toPropertyKey(h){var i=toPrimitive(h,"string");return _typeof(i)=="symbol"?i:i+""}function _defineProperties(h,i){for(var Y=0;Y<i.length;Y++){var e=i[Y];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(h,toPropertyKey(e.key),e)}}function _createClass(h,i,Y){return i&&_defineProperties(h.prototype,i),Y&&_defineProperties(h,Y),Object.defineProperty(h,"prototype",{writable:!1}),h}function _assertThisInitialized(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function _setPrototypeOf(h,i){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,a){return e.__proto__=a,e},_setPrototypeOf(h,i)}function _inherits(h,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(i&&i.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),i&&_setPrototypeOf(h,i)}function _possibleConstructorReturn(h,i){if(i&&(_typeof(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(h)}function _getPrototypeOf(h){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Y){return Y.__proto__||Object.getPrototypeOf(Y)},_getPrototypeOf(h)}function _defineProperty(h,i,Y){return i=toPropertyKey(i),i in h?Object.defineProperty(h,i,{value:Y,enumerable:!0,configurable:!0,writable:!0}):h[i]=Y,h}var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function h(e,a,ht,dt,st,b){if(b!==ReactPropTypesSecret){var j=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw j.name="Invariant Violation",j}}h.isRequired=h;function i(){return h}var Y={array:h,bigint:h,bool:h,func:h,number:h,object:h,string:h,symbol:h,any:h,arrayOf:i,element:h,elementType:h,instanceOf:i,node:h,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return Y.PropTypes=Y,Y};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);var __spreadArray=function(h,i,Y){if(Y||arguments.length===2)for(var e=0,a=i.length,ht;e<a;e++)(ht||!(e in i))&&(ht||(ht=Array.prototype.slice.call(i,0,e)),ht[e]=i[e]);return h.concat(ht||Array.prototype.slice.call(i))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(h,i){var Y={};return allEvents.forEach(function(e){var a=h[e];a&&(i?Y[e]=function(ht){return a(ht,i(e))}:Y[e]=a)}),Y}function makeCancellablePromise(h){var i=!1,Y=new Promise(function(e,a){h.then(function(ht){return!i&&e(ht)}).catch(function(ht){return!i&&a(ht)})});return{promise:Y,cancel:function(){i=!0}}}function r(h){var i,Y,e="";if(typeof h=="string"||typeof h=="number")e+=h;else if(typeof h=="object")if(Array.isArray(h))for(i=0;i<h.length;i++)h[i]&&(Y=r(h[i]))&&(e&&(e+=" "),e+=Y);else for(i in h)h[i]&&(e&&(e+=" "),e+=i);return e}function clsx(){for(var h,i,Y=0,e="";Y<arguments.length;)(h=arguments[Y++])&&(i=r(h))&&(e&&(e+=" "),e+=i);return e}var prefix="Invariant failed";function invariant(h,i){if(!h)throw new Error(prefix)}function warning(h,i){}const DocumentContext=reactExports.createContext(null);function Message(h){var i=h.children,Y=h.type;return React.createElement("div",{className:"react-pdf__message react-pdf__message--".concat(Y)},i)}Message.propTypes={children:PropTypes.node,type:PropTypes.oneOf(["error","loading","no-data"]).isRequired};var DEFAULT_LINK_REL="noopener noreferrer nofollow",LinkService=function(){function h(){_classCallCheck(this,h),this.externalLinkTarget=null,this.externalLinkRel=null}return _createClass(h,[{key:"setDocument",value:function(Y){this.pdfDocument=Y}},{key:"setViewer",value:function(Y){this.pdfViewer=Y}},{key:"setExternalLinkRel",value:function(Y){this.externalLinkRel=Y}},{key:"setExternalLinkTarget",value:function(Y){this.externalLinkTarget=Y}},{key:"setHistory",value:function(){}},{key:"pagesCount",get:function(){return this.pdfDocument?this.pdfDocument.numPages:0}},{key:"page",get:function(){return this.pdfViewer.currentPageNumber},set:function(Y){this.pdfViewer.currentPageNumber=Y}},{key:"rotation",get:function(){return 0},set:function(Y){}},{key:"goToDestination",value:function(Y){var e=this;new Promise(function(a){typeof Y=="string"?e.pdfDocument.getDestination(Y).then(a):Array.isArray(Y)?a(Y):Y.then(a)}).then(function(a){invariant(Array.isArray(a));var ht=a[0];new Promise(function(dt){ht instanceof Object?e.pdfDocument.getPageIndex(ht).then(function(st){dt(st)}).catch(function(){invariant(!1)}):typeof ht=="number"?dt(ht):invariant(!1)}).then(function(dt){var st=dt+1;invariant(st>=1&&st<=e.pagesCount),e.pdfViewer.scrollPageIntoView({dest:Y,pageIndex:dt,pageNumber:st})})})}},{key:"navigateTo",value:function(Y){this.goToDestination(Y)}},{key:"goToPage",value:function(){}},{key:"addLinkAttributes",value:function(Y,e,a){Y.href=e,Y.rel=this.externalLinkRel||DEFAULT_LINK_REL,Y.target=a?"_blank":this.externalLinkTarget||""}},{key:"getDestinationHash",value:function(){return"#"}},{key:"getAnchorUrl",value:function(){return"#"}},{key:"setHash",value:function(){}},{key:"executeNamedAction",value:function(){}},{key:"cachePageRef",value:function(){}},{key:"isPageVisible",value:function(){return!0}},{key:"isPageCached",value:function(){return!0}}]),h}(),PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function _arrayWithHoles(h){if(Array.isArray(h))return h}function _iterableToArrayLimit(h,i){var Y=h==null?null:typeof Symbol<"u"&&h[Symbol.iterator]||h["@@iterator"];if(Y!=null){var e,a,ht,dt,st=[],b=!0,j=!1;try{if(ht=(Y=Y.call(h)).next,i===0){if(Object(Y)!==Y)return;b=!1}else for(;!(b=(e=ht.call(Y)).done)&&(st.push(e.value),st.length!==i);b=!0);}catch(lt){j=!0,a=lt}finally{try{if(!b&&Y.return!=null&&(dt=Y.return(),Object(dt)!==dt))return}finally{if(j)throw a}}return st}}function _arrayLikeToArray(h,i){(i==null||i>h.length)&&(i=h.length);for(var Y=0,e=new Array(i);Y<i;Y++)e[Y]=h[Y];return e}function _unsupportedIterableToArray(h,i){if(h){if(typeof h=="string")return _arrayLikeToArray(h,i);var Y=Object.prototype.toString.call(h).slice(8,-1);if(Y==="Object"&&h.constructor&&(Y=h.constructor.name),Y==="Map"||Y==="Set")return Array.from(h);if(Y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Y))return _arrayLikeToArray(h,i)}}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _slicedToArray(h,i){return _arrayWithHoles(h)||_iterableToArrayLimit(h,i)||_unsupportedIterableToArray(h,i)||_nonIterableRest()}var isBrowser=typeof document<"u";function isDefined(h){return typeof h<"u"}function isProvided(h){return isDefined(h)&&h!==null}function isString(h){return typeof h=="string"}function isArrayBuffer(h){return h instanceof ArrayBuffer}function isBlob(h){return invariant(isBrowser),h instanceof Blob}function isFile$1(h){return invariant(isBrowser),h instanceof File}function isDataURI(h){return isString(h)&&/^data:/.test(h)}function dataURItoByteString(h){invariant(isDataURI(h));var i=h.split(","),Y=_slicedToArray(i,2),e=Y[0],a=Y[1],ht=e.split(";");return ht.indexOf("base64")!==-1?atob(a):unescape(a)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}function cancelRunningTask(h){h&&h.cancel&&h.cancel()}function makePageCallback(h,i){return Object.defineProperty(h,"width",{get:function(){return this.view[2]*i},configurable:!0}),Object.defineProperty(h,"height",{get:function(){return this.view[3]*i},configurable:!0}),Object.defineProperty(h,"originalWidth",{get:function(){return this.view[2]},configurable:!0}),Object.defineProperty(h,"originalHeight",{get:function(){return this.view[3]},configurable:!0}),h}function isCancelException(h){return h.name==="RenderingCancelledException"}function loadFromFile(h){return new Promise(function(i,Y){var e=new FileReader;return e.onload=function(){return i(new Uint8Array(e.result))},e.onerror=function(a){switch(a.target.error.code){case a.target.error.NOT_FOUND_ERR:return Y(new Error("Error while reading a file: File not found."));case a.target.error.NOT_READABLE_ERR:return Y(new Error("Error while reading a file: File not readable."));case a.target.error.SECURITY_ERR:return Y(new Error("Error while reading a file: Security error."));case a.target.error.ABORT_ERR:return Y(new Error("Error while reading a file: Aborted."));default:return Y(new Error("Error while reading a file."))}},e.readAsArrayBuffer(h),null})}function _arrayWithoutHoles(h){if(Array.isArray(h))return _arrayLikeToArray(h)}function _iterableToArray(h){if(typeof Symbol<"u"&&h[Symbol.iterator]!=null||h["@@iterator"]!=null)return Array.from(h)}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toConsumableArray(h){return _arrayWithoutHoles(h)||_iterableToArray(h)||_unsupportedIterableToArray(h)||_nonIterableSpread()}var eventProps=function(){var h={};return[].concat(_toConsumableArray(mouseEvents),_toConsumableArray(touchEvents),_toConsumableArray(keyboardEvents)).forEach(function(i){h[i]=PropTypes.func}),h}(),fileTypes=[PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.shape({data:PropTypes.oneOfType([PropTypes.object,PropTypes.string]),httpHeaders:PropTypes.object,range:PropTypes.object,url:PropTypes.string,withCredentials:PropTypes.bool})];typeof File<"u"&&fileTypes.push(PropTypes.instanceOf(File));typeof Blob<"u"&&fileTypes.push(PropTypes.instanceOf(Blob));var isClassName=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),isFile=PropTypes.oneOfType(fileTypes),isLinkService=PropTypes.instanceOf(LinkService);PropTypes.oneOf(["_self","_blank","_parent","_top"]);var isPage=PropTypes.shape({commonObjs:PropTypes.shape({}).isRequired,getAnnotations:PropTypes.func.isRequired,getTextContent:PropTypes.func.isRequired,getViewport:PropTypes.func.isRequired,render:PropTypes.func.isRequired}),isPageIndex=function h(i,Y,e){var a=i[Y],ht=i.pageNumber,dt=i.pdf;if(!isDefined(dt))return null;if(isDefined(a)){if(typeof a!="number")return new Error("`".concat(Y,"` of type `").concat(_typeof(a),"` supplied to `").concat(e,"`, expected `number`."));if(a<0)return new Error("Expected `".concat(Y,"` to be greater or equal to 0."));var st=dt.numPages;if(a+1>st)return new Error("Expected `".concat(Y,"` to be less or equal to ").concat(st-1,"."))}else if(!isDefined(ht))return new Error("`".concat(Y,"` not supplied. Either pageIndex or pageNumber must be supplied to `").concat(e,"`."));return null},isPageNumber=function h(i,Y,e){var a=i[Y],ht=i.pageIndex,dt=i.pdf;if(!isDefined(dt))return null;if(isDefined(a)){if(typeof a!="number")return new Error("`".concat(Y,"` of type `").concat(_typeof(a),"` supplied to `").concat(e,"`, expected `number`."));if(a<1)return new Error("Expected `".concat(Y,"` to be greater or equal to 1."));var st=dt.numPages;if(a>st)return new Error("Expected `".concat(Y,"` to be less or equal to ").concat(st,"."))}else if(!isDefined(ht))return new Error("`".concat(Y,"` not supplied. Either pageIndex or pageNumber must be supplied to `").concat(e,"`."));return null},isPdf=PropTypes.oneOfType([PropTypes.shape({getDestination:PropTypes.func.isRequired,getOutline:PropTypes.func.isRequired,getPage:PropTypes.func.isRequired,numPages:PropTypes.number.isRequired}),PropTypes.bool]),isRef=PropTypes.oneOfType([PropTypes.func,PropTypes.shape({current:PropTypes.any})]),isRenderMode=PropTypes.oneOf(["canvas","none","svg"]),isRotate=PropTypes.oneOf([0,90,180,270]),_excluded=["url"];function ownKeys$3(h,i){var Y=Object.keys(h);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(h);i&&(e=e.filter(function(a){return Object.getOwnPropertyDescriptor(h,a).enumerable})),Y.push.apply(Y,e)}return Y}function _objectSpread$3(h){for(var i=1;i<arguments.length;i++){var Y=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$3(Object(Y),!0).forEach(function(e){_defineProperty(h,e,Y[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(Y)):ownKeys$3(Object(Y)).forEach(function(e){Object.defineProperty(h,e,Object.getOwnPropertyDescriptor(Y,e))})}return h}function _createSuper$5(h){var i=_isNativeReflectConstruct$5();return function(){var e=_getPrototypeOf(h),a;if(i){var ht=_getPrototypeOf(this).constructor;a=Reflect.construct(e,arguments,ht)}else a=e.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _isNativeReflectConstruct$5(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var PDFDataRangeTransport=pdfExports.PDFDataRangeTransport,Document=function(h){_inherits(Y,h);var i=_createSuper$5(Y);function Y(){var e;_classCallCheck(this,Y);for(var a=arguments.length,ht=new Array(a),dt=0;dt<a;dt++)ht[dt]=arguments[dt];return e=i.call.apply(i,[this].concat(ht)),_defineProperty(_assertThisInitialized(e),"state",{pdf:null}),_defineProperty(_assertThisInitialized(e),"viewer",{scrollPageIntoView:function(b){var j=b.dest,lt=b.pageIndex,_t=b.pageNumber,ut=e.props.onItemClick;if(ut){ut({dest:j,pageIndex:lt,pageNumber:_t});return}var at=e.pages[lt];if(at){at.scrollIntoView();return}}}),_defineProperty(_assertThisInitialized(e),"linkService",new LinkService),_defineProperty(_assertThisInitialized(e),"loadDocument",function(){cancelRunningTask(e.runningTask),e.loadingTask&&e.loadingTask.destroy();var st=makeCancellablePromise(e.findDocumentSource());e.runningTask=st,st.promise.then(function(b){if(e.onSourceSuccess(),!!b){e.setState(function(_){return _.pdf?{pdf:null}:null});var j=e.props,lt=j.options,_t=j.onLoadProgress,ut=j.onPassword,at=pdfExports.getDocument(_objectSpread$3(_objectSpread$3({},b),lt));at.onPassword=ut,_t&&(at.onProgress=_t),e.loadingTask=at,at.promise.then(function(_){e.setState(function(s){return s.pdf&&s.pdf.fingerprint===_.fingerprint?null:{pdf:_}},e.onLoadSuccess)}).catch(function(_){e.onLoadError(_)})}}).catch(function(b){e.onSourceError(b)})}),_defineProperty(_assertThisInitialized(e),"setupLinkService",function(){var st=e.props,b=st.externalLinkRel,j=st.externalLinkTarget;e.linkService.setViewer(e.viewer),e.linkService.setExternalLinkRel(b),e.linkService.setExternalLinkTarget(j)}),_defineProperty(_assertThisInitialized(e),"onSourceSuccess",function(){var st=e.props.onSourceSuccess;st&&st()}),_defineProperty(_assertThisInitialized(e),"onSourceError",function(st){var b=e.props.onSourceError;b&&b(st)}),_defineProperty(_assertThisInitialized(e),"onLoadSuccess",function(){var st=e.props.onLoadSuccess,b=e.state.pdf;st&&st(b),e.pages=new Array(b.numPages),e.linkService.setDocument(b)}),_defineProperty(_assertThisInitialized(e),"onLoadError",function(st){e.setState({pdf:!1});var b=e.props.onLoadError;b&&b(st)}),_defineProperty(_assertThisInitialized(e),"findDocumentSource",function(){return new Promise(function(st){var b=e.props.file;if(b||st(null),typeof b=="string"){if(isDataURI(b)){var j=dataURItoByteString(b);st({data:j})}st({url:b})}if(b instanceof PDFDataRangeTransport&&st({range:b}),isArrayBuffer(b)&&st({data:b}),isBrowser&&(isBlob(b)||isFile$1(b))){loadFromFile(b).then(function(at){st({data:at})});return}if(invariant(_typeof(b)==="object"),invariant(b.url||b.data||b.range),typeof b.url=="string"&&isDataURI(b.url)){var lt=b.url,_t=_objectWithoutProperties(b,_excluded),ut=dataURItoByteString(lt);st(_objectSpread$3({data:ut},_t))}st(b)})}),_defineProperty(_assertThisInitialized(e),"registerPage",function(st,b){e.pages[st]=b}),_defineProperty(_assertThisInitialized(e),"unregisterPage",function(st){delete e.pages[st]}),e}return _createClass(Y,[{key:"componentDidMount",value:function(){this.loadDocument(),this.setupLinkService()}},{key:"componentDidUpdate",value:function(a){var ht=this.props.file;ht!==a.file&&this.loadDocument()}},{key:"componentWillUnmount",value:function(){cancelRunningTask(this.runningTask),this.loadingTask&&this.loadingTask.destroy()}},{key:"childContext",get:function(){var a=this.linkService,ht=this.registerPage,dt=this.unregisterPage,st=this.props,b=st.imageResourcesPath,j=st.renderMode,lt=st.rotate,_t=this.state.pdf;return{imageResourcesPath:b,linkService:a,pdf:_t,registerPage:ht,renderMode:j,rotate:lt,unregisterPage:dt}}},{key:"eventProps",get:function(){var a=this;return makeEventProps(this.props,function(){return a.state.pdf})}},{key:"renderChildren",value:function(){var a=this.props.children;return React.createElement(DocumentContext.Provider,{value:this.childContext},a)}},{key:"renderContent",value:function(){var a=this.props.file,ht=this.state.pdf;if(!a){var dt=this.props.noData;return React.createElement(Message,{type:"no-data"},typeof dt=="function"?dt():dt)}if(ht===null){var st=this.props.loading;return React.createElement(Message,{type:"loading"},typeof st=="function"?st():st)}if(ht===!1){var b=this.props.error;return React.createElement(Message,{type:"error"},typeof b=="function"?b():b)}return this.renderChildren()}},{key:"render",value:function(){var a=this.props,ht=a.className,dt=a.inputRef;return React.createElement("div",_extends({className:clsx("react-pdf__Document",ht),ref:dt},this.eventProps),this.renderContent())}}]),Y}(reactExports.PureComponent);Document.defaultProps={error:"Failed to load PDF file.",loading:"Loading PDF…",noData:"No PDF file specified.",onPassword:function h(i,Y){switch(Y){case PasswordResponses.NEED_PASSWORD:{var e=prompt("Enter the password to open this PDF file.");i(e);break}case PasswordResponses.INCORRECT_PASSWORD:{var a=prompt("Invalid password. Please try again.");i(a);break}}}};var isFunctionOrNode$1=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Document.propTypes=_objectSpread$3(_objectSpread$3({},eventProps),{},{children:PropTypes.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:PropTypes.string,externalLinkTarget:PropTypes.string,file:isFile,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadProgress:PropTypes.func,onLoadSuccess:PropTypes.func,onPassword:PropTypes.func,onSourceError:PropTypes.func,onSourceSuccess:PropTypes.func,rotate:PropTypes.number});var isDestination=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.any)]);PropTypes.shape({dest:isDestination,items:PropTypes.arrayOf(PropTypes.shape({dest:isDestination,title:PropTypes.string})),title:PropTypes.string}).isRequired,PropTypes.func,isPdf.isRequired;function ownKeys$2(h,i){var Y=Object.keys(h);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(h);i&&(e=e.filter(function(a){return Object.getOwnPropertyDescriptor(h,a).enumerable})),Y.push.apply(Y,e)}return Y}function _objectSpread$2(h){for(var i=1;i<arguments.length;i++){var Y=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$2(Object(Y),!0).forEach(function(e){_defineProperty(h,e,Y[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(Y)):ownKeys$2(Object(Y)).forEach(function(e){Object.defineProperty(h,e,Object.getOwnPropertyDescriptor(Y,e))})}return h}_objectSpread$2({className:isClassName,inputRef:isRef,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,pdf:isPdf},eventProps);function mergeRefs(){for(var h=[],i=0;i<arguments.length;i++)h[i]=arguments[i];var Y=h.filter(Boolean);if(Y.length<=1){var e=Y[0];return e||null}return function(ht){Y.forEach(function(dt){typeof dt=="function"?dt(ht):dt&&(dt.current=ht)})}}const PageContext=reactExports.createContext(null);function _createSuper$4(h){var i=_isNativeReflectConstruct$4();return function(){var e=_getPrototypeOf(h),a;if(i){var ht=_getPrototypeOf(this).constructor;a=Reflect.construct(e,arguments,ht)}else a=e.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _isNativeReflectConstruct$4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ANNOTATION_MODE=pdfExports.AnnotationMode,PageCanvasInternal=function(h){_inherits(Y,h);var i=_createSuper$4(Y);function Y(){var e;_classCallCheck(this,Y);for(var a=arguments.length,ht=new Array(a),dt=0;dt<a;dt++)ht[dt]=arguments[dt];return e=i.call.apply(i,[this].concat(ht)),_defineProperty(_assertThisInitialized(e),"canvasElement",reactExports.createRef()),_defineProperty(_assertThisInitialized(e),"onRenderSuccess",function(){e.renderer=null;var st=e.props,b=st.onRenderSuccess,j=st.page,lt=st.scale;b&&b(makePageCallback(j,lt))}),_defineProperty(_assertThisInitialized(e),"onRenderError",function(st){if(!isCancelException(st)){var b=e.props.onRenderError;b&&b(st)}}),_defineProperty(_assertThisInitialized(e),"drawPageOnCanvas",function(){var st=e.canvasElement.current;if(!st)return null;var b=_assertThisInitialized(e),j=b.renderViewport,lt=b.viewport,_t=e.props,ut=_t.canvasBackground,at=_t.page,_=_t.renderForms;st.width=j.width,st.height=j.height,st.style.width="".concat(Math.floor(lt.width),"px"),st.style.height="".concat(Math.floor(lt.height),"px");var s={annotationMode:_?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,get canvasContext(){return st.getContext("2d",{alpha:!1})},viewport:j};ut&&(s.background=ut),e.cancelRenderingTask();var f=at.render(s);return e.renderer=f,f.promise.then(e.onRenderSuccess).catch(e.onRenderError)}),e}return _createClass(Y,[{key:"componentDidMount",value:function(){this.drawPageOnCanvas()}},{key:"componentDidUpdate",value:function(a){var ht=this.props,dt=ht.canvasBackground,st=ht.devicePixelRatio,b=ht.page,j=ht.renderForms;(dt!==a.canvasBackground||st!==a.devicePixelRatio||j!==a.renderForms)&&(b.cleanup(),this.drawPageOnCanvas())}},{key:"componentWillUnmount",value:function(){this.cancelRenderingTask();var a=this.canvasElement.current;a&&(a.width=0,a.height=0)}},{key:"cancelRenderingTask",value:function(){this.renderer&&(this.renderer.cancel(),this.renderer=null)}},{key:"devicePixelRatio",get:function(){var a=this.props.devicePixelRatio;return a||getDevicePixelRatio()}},{key:"renderViewport",get:function(){var a=this.devicePixelRatio,ht=this.props,dt=ht.page,st=ht.rotate,b=ht.scale;return dt.getViewport({scale:b*a,rotation:st})}},{key:"viewport",get:function(){var a=this.props,ht=a.page,dt=a.rotate,st=a.scale;return ht.getViewport({scale:st,rotation:dt})}},{key:"render",value:function(){var a=this.props.canvasRef;return React.createElement("canvas",{className:"react-pdf__Page__canvas",dir:"ltr",ref:mergeRefs(a,this.canvasElement),style:{display:"block",userSelect:"none"}})}}]),Y}(reactExports.PureComponent);PageCanvasInternal.propTypes={canvasBackground:PropTypes.string,canvasRef:isRef,devicePixelRatio:PropTypes.number,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,page:isPage.isRequired,renderForms:PropTypes.bool,rotate:isRotate,scale:PropTypes.number.isRequired};function PageCanvas(h){return React.createElement(PageContext.Consumer,null,function(i){return React.createElement(PageCanvasInternal,_extends({},i,h))})}function _createSuper$3(h){var i=_isNativeReflectConstruct$3();return function(){var e=_getPrototypeOf(h),a;if(i){var ht=_getPrototypeOf(this).constructor;a=Reflect.construct(e,arguments,ht)}else a=e.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _isNativeReflectConstruct$3(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var PageSVGInternal=function(h){_inherits(Y,h);var i=_createSuper$3(Y);function Y(){var e;_classCallCheck(this,Y);for(var a=arguments.length,ht=new Array(a),dt=0;dt<a;dt++)ht[dt]=arguments[dt];return e=i.call.apply(i,[this].concat(ht)),_defineProperty(_assertThisInitialized(e),"state",{svg:null}),_defineProperty(_assertThisInitialized(e),"onRenderSuccess",function(){e.renderer=null;var st=e.props,b=st.onRenderSuccess,j=st.page,lt=st.scale;b&&b(makePageCallback(j,lt))}),_defineProperty(_assertThisInitialized(e),"onRenderError",function(st){if(!isCancelException(st)){var b=e.props.onRenderError;b&&b(st)}}),_defineProperty(_assertThisInitialized(e),"renderSVG",function(){var st=e.props.page;return e.renderer=st.getOperatorList(),e.renderer.then(function(b){var j=new pdfExports.SVGGraphics(st.commonObjs,st.objs);e.renderer=j.getSVG(b,e.viewport).then(function(lt){e.setState({svg:lt},e.onRenderSuccess)}).catch(e.onRenderError)}).catch(e.onRenderError)}),_defineProperty(_assertThisInitialized(e),"drawPageOnContainer",function(st){var b=e.state.svg;if(!(!st||!b)){st.firstElementChild||st.appendChild(b);var j=e.viewport,lt=j.width,_t=j.height;b.setAttribute("width",lt),b.setAttribute("height",_t)}}),e}return _createClass(Y,[{key:"componentDidMount",value:function(){this.renderSVG()}},{key:"viewport",get:function(){var a=this.props,ht=a.page,dt=a.rotate,st=a.scale;return ht.getViewport({scale:st,rotation:dt})}},{key:"render",value:function(){var a=this,ht=this.viewport,dt=ht.width,st=ht.height;return React.createElement("div",{className:"react-pdf__Page__svg",ref:function(j){return a.drawPageOnContainer(j)},style:{display:"block",backgroundColor:"white",overflow:"hidden",width:dt,height:st,userSelect:"none"}})}}]),Y}(reactExports.PureComponent);PageSVGInternal.propTypes={onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,page:isPage.isRequired,rotate:isRotate,scale:PropTypes.number.isRequired};function PageSVG(h){return React.createElement(PageContext.Consumer,null,function(i){return React.createElement(PageSVGInternal,_extends({},i,h))})}function ownKeys$1(h,i){var Y=Object.keys(h);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(h);i&&(e=e.filter(function(a){return Object.getOwnPropertyDescriptor(h,a).enumerable})),Y.push.apply(Y,e)}return Y}function _objectSpread$1(h){for(var i=1;i<arguments.length;i++){var Y=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$1(Object(Y),!0).forEach(function(e){_defineProperty(h,e,Y[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(Y)):ownKeys$1(Object(Y)).forEach(function(e){Object.defineProperty(h,e,Object.getOwnPropertyDescriptor(Y,e))})}return h}function _createSuper$2(h){var i=_isNativeReflectConstruct$2();return function(){var e=_getPrototypeOf(h),a;if(i){var ht=_getPrototypeOf(this).constructor;a=Reflect.construct(e,arguments,ht)}else a=e.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _isNativeReflectConstruct$2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var TextLayerInternal=function(h){_inherits(Y,h);var i=_createSuper$2(Y);function Y(){var e;_classCallCheck(this,Y);for(var a=arguments.length,ht=new Array(a),dt=0;dt<a;dt++)ht[dt]=arguments[dt];return e=i.call.apply(i,[this].concat(ht)),_defineProperty(_assertThisInitialized(e),"state",{textContent:null}),_defineProperty(_assertThisInitialized(e),"layerElement",reactExports.createRef()),_defineProperty(_assertThisInitialized(e),"endElement",reactExports.createRef()),_defineProperty(_assertThisInitialized(e),"loadTextContent",function(){var st=e.props.page,b=makeCancellablePromise(st.getTextContent());e.runningTask=b,b.promise.then(function(j){e.setState({textContent:j},e.onLoadSuccess)}).catch(function(j){e.onLoadError(j)})}),_defineProperty(_assertThisInitialized(e),"onLoadSuccess",function(){var st=e.props.onGetTextSuccess,b=e.state.textContent;st&&st(b)}),_defineProperty(_assertThisInitialized(e),"onLoadError",function(st){e.setState({textItems:!1});var b=e.props.onGetTextError;b&&b(st)}),_defineProperty(_assertThisInitialized(e),"onRenderSuccess",function(){var st=e.props.onRenderTextLayerSuccess;st&&st()}),_defineProperty(_assertThisInitialized(e),"onRenderError",function(st){var b=e.props.onRenderTextLayerError;b&&b(st)}),_defineProperty(_assertThisInitialized(e),"onMouseDown",function(){var st=e.endElement.current;st&&st.classList.add("active")}),_defineProperty(_assertThisInitialized(e),"onMouseUp",function(){var st=e.endElement.current;st&&st.classList.remove("active")}),e}return _createClass(Y,[{key:"componentDidMount",value:function(){var a=this.props.page;invariant(a),parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10),this.loadTextContent()}},{key:"componentDidUpdate",value:function(a){var ht=this.props.page;a.page&&ht!==a.page&&this.loadTextContent()}},{key:"componentWillUnmount",value:function(){cancelRunningTask(this.runningTask)}},{key:"viewport",get:function(){var a=this.props,ht=a.page,dt=a.rotate,st=a.scale;return ht.getViewport({scale:st,rotation:dt})}},{key:"unrotatedViewport",get:function(){var a=this.props,ht=a.page,dt=a.scale;return ht.getViewport({scale:dt})}},{key:"rotate",get:function(){var a=this.props,ht=a.page,dt=a.rotate;return dt-ht.rotate}},{key:"renderTextLayer",value:function(){var a=this,ht=this.state.textContent;if(!ht)return null;var dt=this.layerElement.current,st=this.viewport,b=this.props,j=b.customTextRenderer,lt=b.pageIndex,_t=b.pageNumber;cancelRunningTask(this.runningTask),dt.innerHTML="";var ut={container:dt,textContent:ht,viewport:st},at=pdfExports.renderTextLayer(ut);this.runningTask=at,at.promise.then(function(){var _=document.createElement("div");if(_.className="endOfContent",dt.append(_),a.endElement.current=_,j){var s=0;ht.items.forEach(function(f,g){var rt=a.layerElement.current.children[s],it=j(_objectSpread$1({pageIndex:lt,pageNumber:_t,itemIndex:g},f));rt.innerHTML=it,s+=f.str&&f.hasEOL?2:1})}a.onRenderSuccess()}).catch(function(_){a.onRenderError(_)})}},{key:"render",value:function(){return React.createElement("div",{className:"react-pdf__Page__textContent textLayer",onMouseUp:this.onMouseUp,onMouseDown:this.onMouseDown,ref:this.layerElement},this.renderTextLayer())}}]),Y}(reactExports.PureComponent);TextLayerInternal.propTypes={customTextRenderer:PropTypes.func,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onRenderTextLayerError:PropTypes.func,onRenderTextLayerSuccess:PropTypes.func,page:isPage.isRequired,pageIndex:PropTypes.number.isRequired,pageNumber:PropTypes.number.isRequired,rotate:isRotate,scale:PropTypes.number};function TextLayer(h){return React.createElement(PageContext.Consumer,null,function(i){return React.createElement(TextLayerInternal,_extends({},i,h))})}function _createSuper$1(h){var i=_isNativeReflectConstruct$1();return function(){var e=_getPrototypeOf(h),a;if(i){var ht=_getPrototypeOf(this).constructor;a=Reflect.construct(e,arguments,ht)}else a=e.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _isNativeReflectConstruct$1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var AnnotationLayerInternal=function(h){_inherits(Y,h);var i=_createSuper$1(Y);function Y(){var e;_classCallCheck(this,Y);for(var a=arguments.length,ht=new Array(a),dt=0;dt<a;dt++)ht[dt]=arguments[dt];return e=i.call.apply(i,[this].concat(ht)),_defineProperty(_assertThisInitialized(e),"state",{annotations:null}),_defineProperty(_assertThisInitialized(e),"layerElement",reactExports.createRef()),_defineProperty(_assertThisInitialized(e),"loadAnnotations",function(){var st=e.props.page,b=makeCancellablePromise(st.getAnnotations());e.runningTask=b,b.promise.then(function(j){e.setState({annotations:j},e.onLoadSuccess)}).catch(function(j){e.onLoadError(j)})}),_defineProperty(_assertThisInitialized(e),"onLoadSuccess",function(){var st=e.props.onGetAnnotationsSuccess,b=e.state.annotations;st&&st(b)}),_defineProperty(_assertThisInitialized(e),"onLoadError",function(st){e.setState({annotations:!1});var b=e.props.onGetAnnotationsError;b&&b(st)}),_defineProperty(_assertThisInitialized(e),"onRenderSuccess",function(){var st=e.props.onRenderAnnotationLayerSuccess;st&&st()}),_defineProperty(_assertThisInitialized(e),"onRenderError",function(st){var b=e.props.onRenderAnnotationLayerError;b&&b(st)}),e}return _createClass(Y,[{key:"componentDidMount",value:function(){var a=this.props.page;invariant(a),parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10),this.loadAnnotations()}},{key:"componentDidUpdate",value:function(a){var ht=this.props,dt=ht.page,st=ht.renderForms;(a.page&&dt!==a.page||st!==a.renderForms)&&this.loadAnnotations()}},{key:"componentWillUnmount",value:function(){cancelRunningTask(this.runningTask)}},{key:"viewport",get:function(){var a=this.props,ht=a.page,dt=a.rotate,st=a.scale;return ht.getViewport({scale:st,rotation:dt})}},{key:"renderAnnotationLayer",value:function(){var a=this.state.annotations;if(a){var ht=this.props,dt=ht.imageResourcesPath,st=ht.linkService,b=ht.page,j=ht.renderForms,lt=this.viewport.clone({dontFlip:!0}),_t={annotations:a,div:this.layerElement.current,imageResourcesPath:dt,linkService:st,page:b,renderForms:j,viewport:lt};this.layerElement.current.innerHTML="";try{pdfExports.AnnotationLayer.render(_t),this.onRenderSuccess()}catch(ut){this.onRenderError(ut)}}}},{key:"render",value:function(){return React.createElement("div",{className:"react-pdf__Page__annotations annotationLayer",ref:this.layerElement},this.renderAnnotationLayer())}}]),Y}(reactExports.PureComponent);AnnotationLayerInternal.propTypes={imageResourcesPath:PropTypes.string,linkService:isLinkService.isRequired,onGetAnnotationsError:PropTypes.func,onGetAnnotationsSuccess:PropTypes.func,onRenderAnnotationLayerError:PropTypes.func,onRenderAnnotationLayerSuccess:PropTypes.func,page:isPage,renderForms:PropTypes.bool,rotate:isRotate,scale:PropTypes.number};var AnnotationLayer=function h(i){return React.createElement(DocumentContext.Consumer,null,function(Y){return React.createElement(PageContext.Consumer,null,function(e){return React.createElement(AnnotationLayerInternal,_extends({},Y,e,i))})})};function ownKeys(h,i){var Y=Object.keys(h);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(h);i&&(e=e.filter(function(a){return Object.getOwnPropertyDescriptor(h,a).enumerable})),Y.push.apply(Y,e)}return Y}function _objectSpread(h){for(var i=1;i<arguments.length;i++){var Y=arguments[i]!=null?arguments[i]:{};i%2?ownKeys(Object(Y),!0).forEach(function(e){_defineProperty(h,e,Y[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(Y)):ownKeys(Object(Y)).forEach(function(e){Object.defineProperty(h,e,Object.getOwnPropertyDescriptor(Y,e))})}return h}function _createSuper(h){var i=_isNativeReflectConstruct();return function(){var e=_getPrototypeOf(h),a;if(i){var ht=_getPrototypeOf(this).constructor;a=Reflect.construct(e,arguments,ht)}else a=e.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var defaultScale=1,PageInternal=function(h){_inherits(Y,h);var i=_createSuper(Y);function Y(){var e;_classCallCheck(this,Y);for(var a=arguments.length,ht=new Array(a),dt=0;dt<a;dt++)ht[dt]=arguments[dt];return e=i.call.apply(i,[this].concat(ht)),_defineProperty(_assertThisInitialized(e),"state",{page:null}),_defineProperty(_assertThisInitialized(e),"pageElement",reactExports.createRef()),_defineProperty(_assertThisInitialized(e),"onLoadSuccess",function(){var st=e.props,b=st.onLoadSuccess,j=st.registerPage,lt=e.state.page;b&&b(makePageCallback(lt,e.scale)),j&&j(e.pageIndex,e.pageElement.current)}),_defineProperty(_assertThisInitialized(e),"onLoadError",function(st){e.setState({page:!1});var b=e.props.onLoadError;b&&b(st)}),_defineProperty(_assertThisInitialized(e),"loadPage",function(){var st=e.props.pdf,b=e.getPageNumber();if(b){e.setState(function(lt){return lt.page?{page:null}:null});var j=makeCancellablePromise(st.getPage(b));e.runningTask=j,j.promise.then(function(lt){e.setState({page:lt},e.onLoadSuccess)}).catch(function(lt){e.onLoadError(lt)})}}),e}return _createClass(Y,[{key:"componentDidMount",value:function(){var a=this.props.pdf;invariant(a),this.loadPage()}},{key:"componentDidUpdate",value:function(a){var ht=this.props.pdf;if(a.pdf&&ht!==a.pdf||this.getPageNumber()!==this.getPageNumber(a)){var dt=this.props.unregisterPage;dt&&dt(this.getPageIndex(a)),this.loadPage()}}},{key:"componentWillUnmount",value:function(){var a=this.props.unregisterPage;a&&a(this.pageIndex),cancelRunningTask(this.runningTask)}},{key:"childContext",get:function(){var a=this.pageIndex,ht=this.pageNumber,dt=this.state.page;if(!dt)return{};var st=this.props,b=st.canvasBackground,j=st.customTextRenderer,lt=st.devicePixelRatio,_t=st.onGetAnnotationsError,ut=st.onGetAnnotationsSuccess,at=st.onGetTextError,_=st.onGetTextSuccess,s=st.onRenderAnnotationLayerError,f=st.onRenderAnnotationLayerSuccess,g=st.onRenderError,rt=st.onRenderSuccess,it=st.onRenderTextLayerError,m=st.onRenderTextLayerSuccess,o=st.renderForms,c=st.renderInteractiveForms;return{canvasBackground:b,customTextRenderer:j,devicePixelRatio:lt,onGetAnnotationsError:_t,onGetAnnotationsSuccess:ut,onGetTextError:at,onGetTextSuccess:_,onRenderAnnotationLayerError:s,onRenderAnnotationLayerSuccess:f,onRenderError:g,onRenderSuccess:rt,onRenderTextLayerError:it,onRenderTextLayerSuccess:m,page:dt,pageIndex:a,pageNumber:ht,renderForms:o??c,rotate:this.rotate,scale:this.scale}}},{key:"getPageIndex",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props;return isProvided(a.pageNumber)?a.pageNumber-1:isProvided(a.pageIndex)?a.pageIndex:null}},{key:"getPageNumber",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props;return isProvided(a.pageNumber)?a.pageNumber:isProvided(a.pageIndex)?a.pageIndex+1:null}},{key:"pageIndex",get:function(){return this.getPageIndex()}},{key:"pageNumber",get:function(){return this.getPageNumber()}},{key:"rotate",get:function(){var a=this.props.rotate;if(isProvided(a))return a;var ht=this.state.page;return ht?ht.rotate:null}},{key:"scale",get:function(){var a=this.state.page;if(!a)return null;var ht=this.props,dt=ht.scale,st=ht.width,b=ht.height,j=this.rotate,lt=1,_t=dt===null?defaultScale:dt;if(st||b){var ut=a.getViewport({scale:1,rotation:j});lt=st?st/ut.width:b/ut.height}return _t*lt}},{key:"eventProps",get:function(){var a=this;return makeEventProps(this.props,function(){var ht=a.state.page;return ht&&makePageCallback(ht,a.scale)})}},{key:"pageKey",get:function(){return"".concat(this.pageIndex,"@").concat(this.scale,"/").concat(this.rotate)}},{key:"pageKeyNoScale",get:function(){return"".concat(this.pageIndex,"/").concat(this.rotate)}},{key:"renderMainLayer",value:function(){var a=this.props,ht=a.canvasRef,dt=a.renderMode;switch(dt){case"none":return null;case"svg":return React.createElement(PageSVG,{key:"".concat(this.pageKeyNoScale,"_svg")});case"canvas":default:return React.createElement(PageCanvas,{key:"".concat(this.pageKey,"_canvas"),canvasRef:ht})}}},{key:"renderTextLayer",value:function(){var a=this.props.renderTextLayer;return a?React.createElement(TextLayer,{key:"".concat(this.pageKey,"_text")}):null}},{key:"renderAnnotationLayer",value:function(){var a=this.props.renderAnnotationLayer;return a?React.createElement(AnnotationLayer,{key:"".concat(this.pageKey,"_annotations")}):null}},{key:"renderChildren",value:function(){var a=this.props.children;return React.createElement(PageContext.Provider,{value:this.childContext},this.renderMainLayer(),this.renderTextLayer(),this.renderAnnotationLayer(),a)}},{key:"renderContent",value:function(){var a=this.pageNumber,ht=this.props.pdf,dt=this.state.page;if(!a){var st=this.props.noData;return React.createElement(Message,{type:"no-data"},typeof st=="function"?st():st)}if(ht===null||dt===null){var b=this.props.loading;return React.createElement(Message,{type:"loading"},typeof b=="function"?b():b)}if(ht===!1||dt===!1){var j=this.props.error;return React.createElement(Message,{type:"error"},typeof j=="function"?j():j)}return this.renderChildren()}},{key:"render",value:function(){var a=this.pageNumber,ht=this.props,dt=ht.className,st=ht.inputRef;return React.createElement("div",_extends({className:clsx("react-pdf__Page",dt),"data-page-number":a,ref:mergeRefs(st,this.pageElement),style:{position:"relative",minWidth:"min-content",minHeight:"min-content"}},this.eventProps),this.renderContent())}}]),Y}(reactExports.PureComponent);PageInternal.defaultProps={error:"Failed to load the page.",loading:"Loading page…",noData:"No page specified.",renderAnnotationLayer:!0,renderMode:"canvas",renderTextLayer:!0,scale:defaultScale};var isFunctionOrNode=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);PageInternal.propTypes=_objectSpread(_objectSpread({},eventProps),{},{canvasBackground:PropTypes.string,children:PropTypes.node,className:isClassName,customTextRenderer:PropTypes.func,devicePixelRatio:PropTypes.number,error:isFunctionOrNode,height:PropTypes.number,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,onRenderTextLayerError:PropTypes.func,onRenderTextLayerSuccess:PropTypes.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,registerPage:PropTypes.func,renderAnnotationLayer:PropTypes.bool,renderForms:PropTypes.bool,renderInteractiveForms:PropTypes.bool,renderMode:isRenderMode,renderTextLayer:PropTypes.bool,rotate:isRotate,scale:PropTypes.number,unregisterPage:PropTypes.func,width:PropTypes.number});function Page(h,i){return React.createElement(DocumentContext.Consumer,null,function(Y){return React.createElement(PageInternal,_extends({ref:i},Y,h))})}const Page$1=React.forwardRef(Page);export{Document as D,Page$1 as P,React$1 as R,_defineProperty as _,React as a,PropTypes as b,_objectWithoutProperties as c,_slicedToArray as d,_getPrototypeOf as e,_possibleConstructorReturn as f,_typeof as g,_extends as h,_inherits as i,_classCallCheck as j,_toConsumableArray as k,_createClass as l,pdfExports as p,reactExports as r};
